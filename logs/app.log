{"timestamp": "2026-01-12T08:07:11.190240Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:07:11.192248Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:07:11.192326Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:07:11.192370Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:07:11.195658Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.942759Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.944752Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.944813Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.944854Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.947963Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.467569Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.469599Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.469665Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.469706Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.473077Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.250410Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.252227Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.252289Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.252331Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.255180Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.761339Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.763087Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.763150Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.763192Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.766426Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.983814Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.985615Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.985672Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.985716Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.988996Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.994703Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.005053Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "<module>", "line": 290, "message": "Starting Vendor HelpDesk Agent API server (Production Mode with Rate Limiting)...", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.356556Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.358209Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.358263Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.358304Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.360931Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.365326Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.411802Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.413491Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.413550Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.413589Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.416290Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.420526Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.385784Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.387420Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.387476Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.387517Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.390097Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.394459Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.409176Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 270, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, metrics_enabled=True, rate_limiting=enabled", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.238965Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 282, "message": "app_shutdown", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.578257Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.579946Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.580005Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.580046Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.582663Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.587210Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.601949Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 270, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, metrics_enabled=True, rate_limiting=enabled", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.708672Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/, trace_id=a2cc380a-516d-43c5-bed7-2cfaa97e81a5, request_id=16d61242-962a-47c1-af7d-0d0d1aedab34", "trace_id": "a2cc380a-516d-43c5-bed7-2cfaa97e81a5", "request_id": "16d61242-962a-47c1-af7d-0d0d1aedab34", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.708783Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/, remaining=99, limit=100", "trace_id": "a2cc380a-516d-43c5-bed7-2cfaa97e81a5", "request_id": "16d61242-962a-47c1-af7d-0d0d1aedab34", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.709610Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/, status=200, duration_ms=0.79, trace_id=a2cc380a-516d-43c5-bed7-2cfaa97e81a5, request_id=16d61242-962a-47c1-af7d-0d0d1aedab34", "trace_id": "a2cc380a-516d-43c5-bed7-2cfaa97e81a5", "request_id": "16d61242-962a-47c1-af7d-0d0d1aedab34", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.745971Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/favicon.ico, trace_id=5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc, request_id=690ec9fb-f11d-4398-ab63-2de446976f39", "trace_id": "5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc", "request_id": "690ec9fb-f11d-4398-ab63-2de446976f39", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.746313Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/favicon.ico, remaining=99, limit=100", "trace_id": "5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc", "request_id": "690ec9fb-f11d-4398-ab63-2de446976f39", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.746622Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/favicon.ico, status=404, duration_ms=0.68, trace_id=5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc, request_id=690ec9fb-f11d-4398-ab63-2de446976f39", "trace_id": "5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc", "request_id": "690ec9fb-f11d-4398-ab63-2de446976f39", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:46.819801Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/docs, trace_id=b02518b9-0808-497b-825c-380147b41fe6, request_id=3a5154bb-8fcd-4bf0-a6cd-08f6dd3ba11d", "trace_id": "b02518b9-0808-497b-825c-380147b41fe6", "request_id": "3a5154bb-8fcd-4bf0-a6cd-08f6dd3ba11d", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:46.820304Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/docs, status=200, duration_ms=0.61, trace_id=b02518b9-0808-497b-825c-380147b41fe6, request_id=3a5154bb-8fcd-4bf0-a6cd-08f6dd3ba11d", "trace_id": "b02518b9-0808-497b-825c-380147b41fe6", "request_id": "3a5154bb-8fcd-4bf0-a6cd-08f6dd3ba11d", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:46.949364Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/openapi.json, trace_id=df1fc87f-d60b-407f-b66f-6cc0ffcf3059, request_id=75317f1c-1b56-4b9d-836c-b5aaa843e8da", "trace_id": "df1fc87f-d60b-407f-b66f-6cc0ffcf3059", "request_id": "75317f1c-1b56-4b9d-836c-b5aaa843e8da", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:46.954198Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/openapi.json, status=200, duration_ms=4.89, trace_id=df1fc87f-d60b-407f-b66f-6cc0ffcf3059, request_id=75317f1c-1b56-4b9d-836c-b5aaa843e8da", "trace_id": "df1fc87f-d60b-407f-b66f-6cc0ffcf3059", "request_id": "75317f1c-1b56-4b9d-836c-b5aaa843e8da", "user_id_hash": null}
{"timestamp": "2026-01-12T10:39:38.724782Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/auth/login, trace_id=d9248969-8abb-4d78-9cf8-6101387768c4, request_id=7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "trace_id": "d9248969-8abb-4d78-9cf8-6101387768c4", "request_id": "7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "user_id_hash": null}
{"timestamp": "2026-01-12T10:39:38.726119Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/auth/login, remaining=4, limit=5", "trace_id": "d9248969-8abb-4d78-9cf8-6101387768c4", "request_id": "7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "user_id_hash": null}
{"timestamp": "2026-01-12T10:39:40.409798Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=5aea7c64-d2e9-4767-970d-834ec6bf47ea", "trace_id": "5aea7c64-d2e9-4767-970d-834ec6bf47ea", "request_id": "79a8b758-e28e-474a-951f-03fc17a08087", "user_id_hash": null}
{"timestamp": "2026-01-12T10:39:40.410150Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=1685.67, trace_id=d9248969-8abb-4d78-9cf8-6101387768c4, request_id=7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "trace_id": "d9248969-8abb-4d78-9cf8-6101387768c4", "request_id": "7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:39.792076Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/chat, trace_id=4ae44142-b00d-4e45-be48-81240d17a13c, request_id=fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "trace_id": "4ae44142-b00d-4e45-be48-81240d17a13c", "request_id": "fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:39.793156Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat, remaining=19, limit=20", "trace_id": "4ae44142-b00d-4e45-be48-81240d17a13c", "request_id": "fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:39.794544Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/chat, status=401, duration_ms=3.13, trace_id=4ae44142-b00d-4e45-be48-81240d17a13c, request_id=fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "trace_id": "4ae44142-b00d-4e45-be48-81240d17a13c", "request_id": "fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:59.792120Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/chat, trace_id=6e795f75-2874-4fa6-84ed-a0d1f5798b6b, request_id=0074e529-60fd-45b6-bb54-ee32babd8300", "trace_id": "6e795f75-2874-4fa6-84ed-a0d1f5798b6b", "request_id": "0074e529-60fd-45b6-bb54-ee32babd8300", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:59.792294Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat, remaining=18, limit=20", "trace_id": "6e795f75-2874-4fa6-84ed-a0d1f5798b6b", "request_id": "0074e529-60fd-45b6-bb54-ee32babd8300", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:59.793025Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/chat, status=401, duration_ms=0.97, trace_id=6e795f75-2874-4fa6-84ed-a0d1f5798b6b, request_id=0074e529-60fd-45b6-bb54-ee32babd8300", "trace_id": "6e795f75-2874-4fa6-84ed-a0d1f5798b6b", "request_id": "0074e529-60fd-45b6-bb54-ee32babd8300", "user_id_hash": null}
{"timestamp": "2026-01-12T10:41:48.457101Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/chat, trace_id=1bf202ce-02e9-4893-9d91-0d45c855ca4f, request_id=f67422dc-4351-408e-9eec-e1ff601df6ad", "trace_id": "1bf202ce-02e9-4893-9d91-0d45c855ca4f", "request_id": "f67422dc-4351-408e-9eec-e1ff601df6ad", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.457206Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat, remaining=19, limit=20", "trace_id": "1bf202ce-02e9-4893-9d91-0d45c855ca4f", "request_id": "f67422dc-4351-408e-9eec-e1ff601df6ad", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.458688Z", "level": "INFO", "logger": "app_logger", "module": "cache_manager", "function": "create_chat_session", "line": 147, "message": "chat_session_created - chat_id=string, trace_id=43228bf0-0953-420f-85ff-fdaa3227a438", "trace_id": "43228bf0-0953-420f-85ff-fdaa3227a438", "request_id": "a39ca352-a868-441d-b714-aede1d4e46ce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.458807Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 181, "message": "chat_continue - chat_id=string, user_id_hash=c55ea77e83770883", "trace_id": "43228bf0-0953-420f-85ff-fdaa3227a438", "request_id": "a39ca352-a868-441d-b714-aede1d4e46ce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.458907Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 232, "message": "agent_invoke_start - chat_id=string", "trace_id": "43228bf0-0953-420f-85ff-fdaa3227a438", "request_id": "a39ca352-a868-441d-b714-aede1d4e46ce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.462846Z", "level": "ERROR", "logger": "app_logger", "module": "routes", "function": "chat", "line": 249, "message": "chat_error - error=", "trace_id": "43228bf0-0953-420f-85ff-fdaa3227a438", "request_id": "a39ca352-a868-441d-b714-aede1d4e46ce", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/api/routes.py\", line 233, in chat\n    result = await agent_graph.ainvoke(initial_state, config)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/main.py\", line 3158, in ainvoke\n    async for chunk in self.astream(\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/main.py\", line 2888, in astream\n    async with AsyncPregelLoop(\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/_loop.py\", line 1264, in __aenter__\n    saved = await self.checkpointer.aget_tuple(self.checkpoint_config)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/checkpoint/base/__init__.py\", line 271, in aget_tuple\n    raise NotImplementedError\nNotImplementedError"}
{"timestamp": "2026-01-12T10:41:48.463709Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/chat, status=500, duration_ms=6.74, trace_id=1bf202ce-02e9-4893-9d91-0d45c855ca4f, request_id=f67422dc-4351-408e-9eec-e1ff601df6ad", "trace_id": "1bf202ce-02e9-4893-9d91-0d45c855ca4f", "request_id": "f67422dc-4351-408e-9eec-e1ff601df6ad", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:42:29.943837Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 282, "message": "app_shutdown", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.450247Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.451866Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.451920Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.451968Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.455272Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.460304Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.482055Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 270, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, metrics_enabled=True, rate_limiting=enabled", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:11.396517Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/auth/login, trace_id=5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5, request_id=cda126a8-5cc3-4619-b598-82a9408cc122", "trace_id": "5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5", "request_id": "cda126a8-5cc3-4619-b598-82a9408cc122", "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:11.396918Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/auth/login, remaining=4, limit=5", "trace_id": "5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5", "request_id": "cda126a8-5cc3-4619-b598-82a9408cc122", "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:12.926800Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=36eda188-91f8-4056-8170-4cb2af45d4b4", "trace_id": "36eda188-91f8-4056-8170-4cb2af45d4b4", "request_id": "5d27baf4-1412-48bc-9c9d-2f1c32ec454c", "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:12.927101Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=1530.66, trace_id=5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5, request_id=cda126a8-5cc3-4619-b598-82a9408cc122", "trace_id": "5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5", "request_id": "cda126a8-5cc3-4619-b598-82a9408cc122", "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:12.929530Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/api/chat/history, trace_id=7a46e461-cbb0-4234-bb3c-8d138f51efec, request_id=bb3dd184-5a61-405f-8b30-2390fb1d9fed", "trace_id": "7a46e461-cbb0-4234-bb3c-8d138f51efec", "request_id": "bb3dd184-5a61-405f-8b30-2390fb1d9fed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:12.929635Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat/history, remaining=99, limit=100", "trace_id": "7a46e461-cbb0-4234-bb3c-8d138f51efec", "request_id": "bb3dd184-5a61-405f-8b30-2390fb1d9fed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:12.929943Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/api/chat/history, status=404, duration_ms=0.48, trace_id=7a46e461-cbb0-4234-bb3c-8d138f51efec, request_id=bb3dd184-5a61-405f-8b30-2390fb1d9fed", "trace_id": "7a46e461-cbb0-4234-bb3c-8d138f51efec", "request_id": "bb3dd184-5a61-405f-8b30-2390fb1d9fed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.436329Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/chat, trace_id=b51c1149-d9db-45e3-a5d2-a31518f8a2ac, request_id=edc1fd70-020b-4262-8d20-c40288536dc7", "trace_id": "b51c1149-d9db-45e3-a5d2-a31518f8a2ac", "request_id": "edc1fd70-020b-4262-8d20-c40288536dc7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.436439Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat, remaining=19, limit=20", "trace_id": "b51c1149-d9db-45e3-a5d2-a31518f8a2ac", "request_id": "edc1fd70-020b-4262-8d20-c40288536dc7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.437057Z", "level": "INFO", "logger": "app_logger", "module": "cache_manager", "function": "create_chat_session", "line": 147, "message": "chat_session_created - chat_id=chat_791a7aa8, trace_id=30173cca-6eec-4fd9-8064-f427d1228de4", "trace_id": "30173cca-6eec-4fd9-8064-f427d1228de4", "request_id": "121f5aa2-d8e8-421b-a30e-8a4efa59e204", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.437123Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_created - chat_id=chat_791a7aa8, user_id_hash=c55ea77e83770883", "trace_id": "30173cca-6eec-4fd9-8064-f427d1228de4", "request_id": "121f5aa2-d8e8-421b-a30e-8a4efa59e204", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.437200Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 232, "message": "agent_invoke_start - chat_id=chat_791a7aa8", "trace_id": "30173cca-6eec-4fd9-8064-f427d1228de4", "request_id": "121f5aa2-d8e8-421b-a30e-8a4efa59e204", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.440948Z", "level": "ERROR", "logger": "app_logger", "module": "routes", "function": "chat", "line": 249, "message": "chat_error - error=", "trace_id": "30173cca-6eec-4fd9-8064-f427d1228de4", "request_id": "121f5aa2-d8e8-421b-a30e-8a4efa59e204", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/api/routes.py\", line 233, in chat\n    result = await agent_graph.ainvoke(initial_state, config)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/main.py\", line 3158, in ainvoke\n    async for chunk in self.astream(\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/main.py\", line 2888, in astream\n    async with AsyncPregelLoop(\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/_loop.py\", line 1264, in __aenter__\n    saved = await self.checkpointer.aget_tuple(self.checkpoint_config)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/checkpoint/base/__init__.py\", line 271, in aget_tuple\n    raise NotImplementedError\nNotImplementedError"}
{"timestamp": "2026-01-12T10:44:17.442790Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/chat, status=500, duration_ms=6.51, trace_id=b51c1149-d9db-45e3-a5d2-a31518f8a2ac, request_id=edc1fd70-020b-4262-8d20-c40288536dc7", "trace_id": "b51c1149-d9db-45e3-a5d2-a31518f8a2ac", "request_id": "edc1fd70-020b-4262-8d20-c40288536dc7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:10:40.751962Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 282, "message": "app_shutdown", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.256304Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.257867Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.257928Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.257969Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.261233Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.265944Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.289098Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.603450Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.953321Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.954987Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.955049Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.955088Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.957712Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.961997Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.976055Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.517785Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.904161Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.906078Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.906157Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.906204Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.909134Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.913431Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.927873Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:09.052118Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:09.405247Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:21.640010Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:22.423196Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:47.692926Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.994263Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.996121Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.996219Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.996284Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 62, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.998874Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 75, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:31.004200Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:31.019489Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:41.629219Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.080548Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.099941Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.101760Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.101834Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.101881Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.104594Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.110387Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.126174Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:30.019283Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/auth/login, trace_id=b05c2e3d-d38e-4975-8773-1ed116600de3, request_id=7923e239-0466-46b5-ac6a-7d426d3be33a", "trace_id": "b05c2e3d-d38e-4975-8773-1ed116600de3", "request_id": "7923e239-0466-46b5-ac6a-7d426d3be33a", "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:30.019442Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/auth/login, remaining=4", "trace_id": "b05c2e3d-d38e-4975-8773-1ed116600de3", "request_id": "7923e239-0466-46b5-ac6a-7d426d3be33a", "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:31.329455Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=ca5fe1f1-ff09-4a40-afbe-4e15fd36231a", "trace_id": "ca5fe1f1-ff09-4a40-afbe-4e15fd36231a", "request_id": "3169a578-565f-421c-94c6-cef5f3821be0", "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:31.329809Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=1310.59, trace_id=b05c2e3d-d38e-4975-8773-1ed116600de3", "trace_id": "b05c2e3d-d38e-4975-8773-1ed116600de3", "request_id": "7923e239-0466-46b5-ac6a-7d426d3be33a", "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:31.332524Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=cfbb2016-15b2-4d6f-ac3e-c6db4a778697, request_id=9664140a-2b73-4a10-8780-ba45139bf839", "trace_id": "cfbb2016-15b2-4d6f-ac3e-c6db4a778697", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:31.332614Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "cfbb2016-15b2-4d6f-ac3e-c6db4a778697", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:32.177747Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "2af1f357-1fa6-4dac-864e-a401fbe22c92", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 844.5849418640137, "row_count": 20, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:13:32.178478Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=20, total_time=845.51ms", "trace_id": "2af1f357-1fa6-4dac-864e-a401fbe22c92", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:32.178661Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=20", "trace_id": "2af1f357-1fa6-4dac-864e-a401fbe22c92", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:32.179334Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=846.80, trace_id=cfbb2016-15b2-4d6f-ac3e-c6db4a778697", "trace_id": "cfbb2016-15b2-4d6f-ac3e-c6db4a778697", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:36.745919Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=53999af3-8b7d-4fe1-9600-0eaa14293a4b, request_id=3991062d-a933-4684-91eb-5d759110fe7c", "trace_id": "53999af3-8b7d-4fe1-9600-0eaa14293a4b", "request_id": "3991062d-a933-4684-91eb-5d759110fe7c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:36.746027Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "53999af3-8b7d-4fe1-9600-0eaa14293a4b", "request_id": "3991062d-a933-4684-91eb-5d759110fe7c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.291125Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a843e971e5987b40", "execution_time_ms": 544.3010330200195, "row_count": 1, "query_preview": "\n        INSERT INTO chats (chat_id, user_id, topic, total_tokens, is_active, created_at, updated_at"}}
{"timestamp": "2026-01-12T11:13:37.291880Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=545.27ms", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.291992Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "create_new_chat", "line": 76, "message": "chat_created_db - chat_id=chat_e7792cd60731462d", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.292077Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 196, "message": "chat_created - chat_id=chat_e7792cd60731462d", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.292192Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_e7792cd60731462d", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.294155Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_e7792cd60731462d", "trace_id": "a8858714-17e5-4e21-bcf3-ef64abf44342", "request_id": "fda90521-dc8b-42f4-8157-2d0cb25b90ab", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.353261Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.355099Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_e7792cd60731462d, input_messages=3", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.107576Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 873, "output_tokens": 60, "total_tokens": 933, "latency_ms": 812.4947547912598}}
{"timestamp": "2026-01-12T11:13:38.107704Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=user, tokens=873, cumulative_total=873, unsaved_count=1", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.107753Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=assistant, tokens=60, cumulative_total=933, unsaved_count=2", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.107811Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_e7792cd60731462d, input_tokens=873, output_tokens=60, turn_total=933, cumulative_total=933, latency_ms=812.49", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.108761Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_e7792cd60731462d, cumulative_total=933, cumulative_input=873, cumulative_output=60, turns=2", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.109470Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=1363.64, trace_id=53999af3-8b7d-4fe1-9600-0eaa14293a4b", "trace_id": "53999af3-8b7d-4fe1-9600-0eaa14293a4b", "request_id": "3991062d-a933-4684-91eb-5d759110fe7c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.112586Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=1569aae5-5e6d-461b-a038-3d2708a46334, request_id=9f1639a0-1872-41b1-b56a-9471f555ffe1", "trace_id": "1569aae5-5e6d-461b-a038-3d2708a46334", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.112654Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "1569aae5-5e6d-461b-a038-3d2708a46334", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.608963Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "0d0c2810-5dc2-4be8-99fa-4d00d418e68c", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 495.78094482421875, "row_count": 21, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:13:38.609230Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=21, total_time=496.27ms", "trace_id": "0d0c2810-5dc2-4be8-99fa-4d00d418e68c", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.609286Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=21", "trace_id": "0d0c2810-5dc2-4be8-99fa-4d00d418e68c", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.609515Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=496.99, trace_id=1569aae5-5e6d-461b-a038-3d2708a46334", "trace_id": "1569aae5-5e6d-461b-a038-3d2708a46334", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.617910Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "f1eacbcdbb4bec3c", "execution_time_ms": 507.997989654541, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T11:13:38.618224Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=508.45ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:39.101998Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "25eb4d9f28b0515c", "execution_time_ms": 483.43610763549805, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 933, updated_at = NOW()\n            WHERE c"}}
{"timestamp": "2026-01-12T11:13:39.102657Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=484.29ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:39.102795Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_e7792cd60731462d, messages_saved=2, cumulative_tokens=933", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:14:14.091653Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=680e41fe-efd9-4fc7-b218-b0f1865ec5a5, request_id=45c714e6-d312-4131-8e6b-e32246320a8b", "trace_id": "680e41fe-efd9-4fc7-b218-b0f1865ec5a5", "request_id": "45c714e6-d312-4131-8e6b-e32246320a8b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.091750Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=18", "trace_id": "680e41fe-efd9-4fc7-b218-b0f1865ec5a5", "request_id": "45c714e6-d312-4131-8e6b-e32246320a8b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.092312Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 109, "message": "chat_cache_hit - chat_id=chat_e7792cd60731462d", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.092381Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_e7792cd60731462d", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.092492Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_e7792cd60731462d", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.093642Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "aget_tuple", "line": 120, "message": "adaptive_checkpoint_windowed - original=12, windowed=10, tokens=148", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.094286Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_e7792cd60731462d", "trace_id": "7d68b7de-5ee1-491b-b103-1ef10eadabcf", "request_id": "1002241f-2ff9-4063-8bee-3c6595a81921", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.096556Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_e7792cd60731462d, input_messages=7", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.605517Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 969, "output_tokens": 144, "total_tokens": 1113, "latency_ms": 510.69092750549316}}
{"timestamp": "2026-01-12T11:14:14.605666Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=user, tokens=969, cumulative_total=1902, unsaved_count=1", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.605743Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=assistant, tokens=144, cumulative_total=2046, unsaved_count=2", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.605824Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_e7792cd60731462d, input_tokens=969, output_tokens=144, turn_total=1113, cumulative_total=2046, latency_ms=510.69", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.606202Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.608260Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=6c2f505c096b63fc", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:15.226894Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "6c2f505c096b63fc", "execution_time_ms": 618.1881427764893, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date, due_date, status, amount, balance, invoice"}}
{"timestamp": "2026-01-12T11:14:15.227192Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=618.82ms", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:15.227283Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 87, "message": "tool_exec_complete - tool=query_database, query_hash=6c2f505c096b63fc, rows=5, duration_ms=619.07, offload=no", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:15.229016Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=6c2f505c096b63fc, error=Object of type date is not JSON serializable, duration_ms=619.17", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 91, in query_database_with_offload\n    return json.dumps({\n           ^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type date is not JSON serializable"}
{"timestamp": "2026-01-12T11:14:15.232464Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_e7792cd60731462d, input_messages=7", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.103586Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1036, "output_tokens": 139, "total_tokens": 1175, "latency_ms": 873.2259273529053}}
{"timestamp": "2026-01-12T11:14:16.103706Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=user, tokens=1036, cumulative_total=3082, unsaved_count=3", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.103782Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=assistant, tokens=139, cumulative_total=3221, unsaved_count=4", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.103832Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_e7792cd60731462d, input_tokens=1036, output_tokens=139, turn_total=1175, cumulative_total=3221, latency_ms=873.23", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.104059Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.105290Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=44fb1af23d15f964", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.583186Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "44fb1af23d15f964", "execution_time_ms": 477.69999504089355, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text AS invoice_date, due_date::text AS du"}}
{"timestamp": "2026-01-12T11:14:16.583441Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=478.10ms", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.583493Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 87, "message": "tool_exec_complete - tool=query_database, query_hash=44fb1af23d15f964, rows=5, duration_ms=478.21, offload=no", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.585738Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_e7792cd60731462d, input_messages=7", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.206037Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1499, "output_tokens": 356, "total_tokens": 1855, "latency_ms": 2621.60587310791}}
{"timestamp": "2026-01-12T11:14:19.206195Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=user, tokens=1499, cumulative_total=4720, unsaved_count=5", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.206272Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=assistant, tokens=356, cumulative_total=5076, unsaved_count=6", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.206350Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_e7792cd60731462d, input_tokens=1499, output_tokens=356, turn_total=1855, cumulative_total=5076, latency_ms=2621.61", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.209122Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_e7792cd60731462d, cumulative_total=5076, cumulative_input=4377, cumulative_output=699, turns=8", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.212456Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=5120.89, trace_id=680e41fe-efd9-4fc7-b218-b0f1865ec5a5", "trace_id": "680e41fe-efd9-4fc7-b218-b0f1865ec5a5", "request_id": "45c714e6-d312-4131-8e6b-e32246320a8b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.215380Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=ec44a679-ba3f-4d3e-b115-de17197cd082, request_id=f6634936-01b4-430b-8744-939154ef4760", "trace_id": "ec44a679-ba3f-4d3e-b115-de17197cd082", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.215464Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=97", "trace_id": "ec44a679-ba3f-4d3e-b115-de17197cd082", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.616901Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "27e35d1eb264fdd6", "execution_time_ms": 404.00004386901855, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T11:14:19.617238Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=404.49ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:14:19.829830Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4a6b01be-6c1b-4193-92bf-6172e5608c61", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 613.8961315155029, "row_count": 21, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:14:19.830106Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=21, total_time=614.36ms", "trace_id": "4a6b01be-6c1b-4193-92bf-6172e5608c61", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.830164Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=21", "trace_id": "4a6b01be-6c1b-4193-92bf-6172e5608c61", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.830431Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=615.11, trace_id=ec44a679-ba3f-4d3e-b115-de17197cd082", "trace_id": "ec44a679-ba3f-4d3e-b115-de17197cd082", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:20.123630Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "7ba041a133d41d53", "execution_time_ms": 506.11376762390137, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 5076, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T11:14:20.123938Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=506.59ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:14:20.124002Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_e7792cd60731462d, messages_saved=6, cumulative_tokens=5076", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:15:13.774175Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_e7792cd60731462d/end, trace_id=30ad90f2-daa7-45a9-8b74-acf8e663e133, request_id=2f59ea6f-28ae-4fdb-9511-88be394dde2f", "trace_id": "30ad90f2-daa7-45a9-8b74-acf8e663e133", "request_id": "2f59ea6f-28ae-4fdb-9511-88be394dde2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.774319Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_e7792cd60731462d/end, remaining=99", "trace_id": "30ad90f2-daa7-45a9-8b74-acf8e663e133", "request_id": "2f59ea6f-28ae-4fdb-9511-88be394dde2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.774627Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "end_session", "line": 331, "message": "session_ended - chat_id=chat_e7792cd60731462d", "trace_id": "29898406-1742-4635-9b44-4a8b4f0b5fde", "request_id": "2f59ea6f-28ae-4fdb-9511-88be394dde2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.774851Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_e7792cd60731462d/end, status=200, duration_ms=0.78, trace_id=30ad90f2-daa7-45a9-8b74-acf8e663e133", "trace_id": "30ad90f2-daa7-45a9-8b74-acf8e663e133", "request_id": "2f59ea6f-28ae-4fdb-9511-88be394dde2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.776479Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_385af20397794cde/messages, trace_id=180f5700-26f8-46ca-a5cc-647ec8811734, request_id=a1200acd-3a59-4535-ab58-59bf0037770e", "trace_id": "180f5700-26f8-46ca-a5cc-647ec8811734", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.776582Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_385af20397794cde/messages, remaining=99", "trace_id": "180f5700-26f8-46ca-a5cc-647ec8811734", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:14.286366Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "53ab31ed-c3e2-4ac5-9404-a264fe1f25c6", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "f6d91f9474d80e60", "execution_time_ms": 509.397029876709, "row_count": 0, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T11:15:14.286660Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=509.88ms", "trace_id": "53ab31ed-c3e2-4ac5-9404-a264fe1f25c6", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:14.286873Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_385af20397794cde/messages, status=200, duration_ms=510.44, trace_id=180f5700-26f8-46ca-a5cc-647ec8811734", "trace_id": "180f5700-26f8-46ca-a5cc-647ec8811734", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.359917Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_385af20397794cde/end, trace_id=aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee, request_id=ed2ba627-001e-4a3f-969b-8f73bfd76393", "trace_id": "aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee", "request_id": "ed2ba627-001e-4a3f-969b-8f73bfd76393", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.360027Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_385af20397794cde/end, remaining=99", "trace_id": "aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee", "request_id": "ed2ba627-001e-4a3f-969b-8f73bfd76393", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.360396Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_385af20397794cde/end, status=200, duration_ms=0.58, trace_id=aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee", "trace_id": "aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee", "request_id": "ed2ba627-001e-4a3f-969b-8f73bfd76393", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.362002Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_566d693dacc44704/messages, trace_id=65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95, request_id=cc0bb00e-f98d-408d-a17b-364f67c5029a", "trace_id": "65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.362110Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_566d693dacc44704/messages, remaining=99", "trace_id": "65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.773336Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4301c9a9-d8bb-4738-8c12-aa88bba3026b", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "01cd98f1dc02b855", "execution_time_ms": 410.8607769012451, "row_count": 3, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T11:15:16.773670Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=3, total_time=411.31ms", "trace_id": "4301c9a9-d8bb-4738-8c12-aa88bba3026b", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.774051Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_566d693dacc44704/messages, status=200, duration_ms=411.98, trace_id=65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95", "trace_id": "65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.040081Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_566d693dacc44704/end, trace_id=ed9c09ca-3176-4d24-ae9c-ff054f60ed56, request_id=9dcdfe4e-e9bc-4f1d-87d9-2e7eb6609495", "trace_id": "ed9c09ca-3176-4d24-ae9c-ff054f60ed56", "request_id": "9dcdfe4e-e9bc-4f1d-87d9-2e7eb6609495", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.040194Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_566d693dacc44704/end, remaining=99", "trace_id": "ed9c09ca-3176-4d24-ae9c-ff054f60ed56", "request_id": "9dcdfe4e-e9bc-4f1d-87d9-2e7eb6609495", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.040605Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_566d693dacc44704/end, status=200, duration_ms=0.57, trace_id=ed9c09ca-3176-4d24-ae9c-ff054f60ed56", "trace_id": "ed9c09ca-3176-4d24-ae9c-ff054f60ed56", "request_id": "9dcdfe4e-e9bc-4f1d-87d9-2e7eb6609495", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.042235Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_ecdddea753724b5d/messages, trace_id=592dc84a-2d01-474d-af1c-2ab9c7bc66cf, request_id=f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "trace_id": "592dc84a-2d01-474d-af1c-2ab9c7bc66cf", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.042327Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_ecdddea753724b5d/messages, remaining=99", "trace_id": "592dc84a-2d01-474d-af1c-2ab9c7bc66cf", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.691662Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "34754783-d1be-4089-9a46-4a6db915839c", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "653748381cae0214", "execution_time_ms": 648.9739418029785, "row_count": 11, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T11:15:22.691935Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=11, total_time=649.39ms", "trace_id": "34754783-d1be-4089-9a46-4a6db915839c", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.692194Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_ecdddea753724b5d/messages, status=200, duration_ms=650.03, trace_id=592dc84a-2d01-474d-af1c-2ab9c7bc66cf", "trace_id": "592dc84a-2d01-474d-af1c-2ab9c7bc66cf", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:16:23.068862Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_ecdddea753724b5d/end, trace_id=acab8b1a-6be9-4d44-bcb4-d785fb3e1d20, request_id=14beca18-be48-49df-956f-e421ff792e50", "trace_id": "acab8b1a-6be9-4d44-bcb4-d785fb3e1d20", "request_id": "14beca18-be48-49df-956f-e421ff792e50", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:16:23.069192Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_ecdddea753724b5d/end, remaining=99", "trace_id": "acab8b1a-6be9-4d44-bcb4-d785fb3e1d20", "request_id": "14beca18-be48-49df-956f-e421ff792e50", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:16:23.069655Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_ecdddea753724b5d/end, status=200, duration_ms=0.88, trace_id=acab8b1a-6be9-4d44-bcb4-d785fb3e1d20", "trace_id": "acab8b1a-6be9-4d44-bcb4-d785fb3e1d20", "request_id": "14beca18-be48-49df-956f-e421ff792e50", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:44.480959Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/auth/login, trace_id=2edea2e4-9e11-4803-87ad-fe410eaee4a1, request_id=233d1eca-55a9-4f24-ac0d-3269ad13861b", "trace_id": "2edea2e4-9e11-4803-87ad-fe410eaee4a1", "request_id": "233d1eca-55a9-4f24-ac0d-3269ad13861b", "user_id_hash": null}
{"timestamp": "2026-01-12T11:19:44.481215Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/auth/login, remaining=4", "trace_id": "2edea2e4-9e11-4803-87ad-fe410eaee4a1", "request_id": "233d1eca-55a9-4f24-ac0d-3269ad13861b", "user_id_hash": null}
{"timestamp": "2026-01-12T11:19:45.118085Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=46faa92a-addb-4e30-a5ec-ea73be9a9c5c", "trace_id": "46faa92a-addb-4e30-a5ec-ea73be9a9c5c", "request_id": "5aad5246-7aae-43ff-a7af-6b981911db46", "user_id_hash": null}
{"timestamp": "2026-01-12T11:19:45.118340Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=637.56, trace_id=2edea2e4-9e11-4803-87ad-fe410eaee4a1", "trace_id": "2edea2e4-9e11-4803-87ad-fe410eaee4a1", "request_id": "233d1eca-55a9-4f24-ac0d-3269ad13861b", "user_id_hash": null}
{"timestamp": "2026-01-12T11:19:45.120319Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=8f68b0fd-dec1-4fde-ae53-bdcd0de68533, request_id=d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "trace_id": "8f68b0fd-dec1-4fde-ae53-bdcd0de68533", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:45.120392Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "8f68b0fd-dec1-4fde-ae53-bdcd0de68533", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:45.647309Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "fa7b1ceb-fbdf-4544-bef0-df3c082c83c4", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 526.5028476715088, "row_count": 21, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:19:45.647720Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=21, total_time=527.08ms", "trace_id": "fa7b1ceb-fbdf-4544-bef0-df3c082c83c4", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:45.647810Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=21", "trace_id": "fa7b1ceb-fbdf-4544-bef0-df3c082c83c4", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:45.648179Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=527.90, trace_id=8f68b0fd-dec1-4fde-ae53-bdcd0de68533", "trace_id": "8f68b0fd-dec1-4fde-ae53-bdcd0de68533", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:22:26.709193Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.234564Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.253860Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.255493Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.255549Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.255594Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.259109Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.265063Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.289055Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.098074Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.428670Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.446124Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.447728Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.447783Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.447828Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.450707Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.455895Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.471147Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:30.897335Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.220232Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.237810Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.239447Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.239501Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.239542Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.242125Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.247314Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.263641Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.305253Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.778480Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.797309Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.798831Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.798899Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.798948Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.801983Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.807893Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.831179Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.549331Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.874408Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.891845Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.893445Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.893501Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.893542Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.896132Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.901636Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.916705Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:44:42.714932Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_4c7727e6b3e344c1/messages, trace_id=f381e3cf-6e8b-4bef-911c-540283088c6f, request_id=2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "trace_id": "f381e3cf-6e8b-4bef-911c-540283088c6f", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:44:42.715271Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_4c7727e6b3e344c1/messages, remaining=99", "trace_id": "f381e3cf-6e8b-4bef-911c-540283088c6f", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:44:43.293759Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "b62d39a0-c3fd-46eb-8cd9-2db4dddecb7b", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "ae37f2793eda729b", "execution_time_ms": 577.5411128997803, "row_count": 3, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T11:44:43.294139Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=3, total_time=578.42ms", "trace_id": "b62d39a0-c3fd-46eb-8cd9-2db4dddecb7b", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:44:43.294452Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_4c7727e6b3e344c1/messages, status=200, duration_ms=579.74, trace_id=f381e3cf-6e8b-4bef-911c-540283088c6f", "trace_id": "f381e3cf-6e8b-4bef-911c-540283088c6f", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:53:56.977683Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:57.462643Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.056468Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.076560Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.078306Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.078364Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.078406Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.081687Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.087744Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.117112Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:03.777011Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.096600Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.114265Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.115896Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.115948Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.115991Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.118528Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.124028Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.139782Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.175651Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.496739Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.514835Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.516471Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.516523Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.516566Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.519437Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.525013Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.540589Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.494638Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.816807Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.835681Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.837393Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.837445Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.837486Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.840103Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.845881Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.863098Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:14.994818Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.321123Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.340033Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=200", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.341902Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.342001Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.342071Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.344761Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.349960Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.365486Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.387017Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.743524Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.763809Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=200", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.765519Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.765576Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.765620Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.768217Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.774233Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.790282Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.530239Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.851357Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.869577Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.871258Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.871311Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.871357Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.873945Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.879359Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.894539Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:35.512046Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_4c7727e6b3e344c1/end, trace_id=709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2, request_id=7c933d1f-535e-40a1-a2ea-5ceb67f9fe80", "trace_id": "709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2", "request_id": "7c933d1f-535e-40a1-a2ea-5ceb67f9fe80", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:35.512205Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_4c7727e6b3e344c1/end, remaining=99", "trace_id": "709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2", "request_id": "7c933d1f-535e-40a1-a2ea-5ceb67f9fe80", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:35.512724Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_4c7727e6b3e344c1/end, status=200, duration_ms=0.82, trace_id=709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2", "trace_id": "709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2", "request_id": "7c933d1f-535e-40a1-a2ea-5ceb67f9fe80", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:35.514670Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=786baa2e-2310-4062-9c07-18f305d0d917, request_id=a8d81cab-1f89-4ef0-80f1-1464e759df32", "trace_id": "786baa2e-2310-4062-9c07-18f305d0d917", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:35.514744Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "786baa2e-2310-4062-9c07-18f305d0d917", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:36.088565Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "366dcbf2-4561-4f27-ba76-6fa7e614d3e8", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 573.0860233306885, "row_count": 21, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:55:36.088892Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=21, total_time=573.87ms", "trace_id": "366dcbf2-4561-4f27-ba76-6fa7e614d3e8", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:36.088941Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=21", "trace_id": "366dcbf2-4561-4f27-ba76-6fa7e614d3e8", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:36.089335Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=574.63, trace_id=786baa2e-2310-4062-9c07-18f305d0d917", "trace_id": "786baa2e-2310-4062-9c07-18f305d0d917", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:46.792534Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=fc0735ad-c49a-4fce-ae54-280481dd6262, request_id=9b6f1a46-3552-4b8c-9444-1b115c338464", "trace_id": "fc0735ad-c49a-4fce-ae54-280481dd6262", "request_id": "9b6f1a46-3552-4b8c-9444-1b115c338464", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:46.792640Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "fc0735ad-c49a-4fce-ae54-280481dd6262", "request_id": "9b6f1a46-3552-4b8c-9444-1b115c338464", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.485561Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "315873be9d602855", "execution_time_ms": 692.2080516815186, "row_count": 1, "query_preview": "\n        INSERT INTO chats (chat_id, user_id, topic, total_tokens, is_active, created_at, updated_at"}}
{"timestamp": "2026-01-12T11:55:47.485915Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=692.78ms", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.485973Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "create_new_chat", "line": 76, "message": "chat_created_db - chat_id=chat_3ca399e0033f469a", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.486020Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 196, "message": "chat_created - chat_id=chat_3ca399e0033f469a", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.486087Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_3ca399e0033f469a", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.486848Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_3ca399e0033f469a", "trace_id": "f76d87c3-abc4-4f42-8619-d422bfc3f7ef", "request_id": "362548fe-e942-456f-a4ee-faf2865c452e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.555450Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.557116Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=3", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.261851Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 885, "output_tokens": 148, "total_tokens": 1033, "latency_ms": 774.2300033569336}}
{"timestamp": "2026-01-12T11:55:48.262013Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=885, cumulative_total=885, unsaved_count=1", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.262071Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=148, cumulative_total=1033, unsaved_count=2", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.262126Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=885, output_tokens=148, turn_total=1033, cumulative_total=1033, latency_ms=774.23", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.262466Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.263632Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=8ec48f770d7434cf", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.831428Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "8ec48f770d7434cf", "execution_time_ms": 567.5668716430664, "row_count": 5, "query_preview": "SELECT * FROM invoices"}}
{"timestamp": "2026-01-12T11:55:48.831746Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=568.05ms", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.832742Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=8ec48f770d7434cf, error=Object of type date is not JSON serializable, duration_ms=568.26", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type date is not JSON serializable"}
{"timestamp": "2026-01-12T11:55:48.835583Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.781802Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 970, "output_tokens": 219, "total_tokens": 1189, "latency_ms": 947.7570056915283}}
{"timestamp": "2026-01-12T11:55:49.781886Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=970, cumulative_total=2003, unsaved_count=3", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.781928Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=219, cumulative_total=2222, unsaved_count=4", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.781970Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=970, output_tokens=219, turn_total=1189, cumulative_total=2222, latency_ms=947.76", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.782160Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.783008Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=a45939829c1a3766", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:50.250170Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a45939829c1a3766", "execution_time_ms": 466.95566177368164, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text as invoice_date, payment_terms, due_d"}}
{"timestamp": "2026-01-12T11:55:50.250465Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=467.36ms", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:50.250726Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=a45939829c1a3766, error=Object of type UUID is not JSON serializable, duration_ms=467.58", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T11:55:50.253419Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.009501Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1062, "output_tokens": 194, "total_tokens": 1256, "latency_ms": 757.6870918273926}}
{"timestamp": "2026-01-12T11:55:51.009585Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=1062, cumulative_total=3284, unsaved_count=5", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.009625Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=194, cumulative_total=3478, unsaved_count=6", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.009663Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=1062, output_tokens=194, turn_total=1256, cumulative_total=3478, latency_ms=757.69", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.009905Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.010853Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=4b9adde55169f2d9", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.584088Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "4b9adde55169f2d9", "execution_time_ms": 573.0471611022949, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text as invoice_date, payment_terms, due_d"}}
{"timestamp": "2026-01-12T11:55:51.584328Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=573.42ms", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.584460Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 141, "message": "context_offload_stored - session_id=session_6524c2c99c0b, rows=5, chunks=5, chunk_size=100", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.584509Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=4b9adde55169f2d9, rows=5, chunks=5, duration_ms=573.54, offload=yes", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.587206Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.284017Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1360, "output_tokens": 78, "total_tokens": 1438, "latency_ms": 698.7242698669434}}
{"timestamp": "2026-01-12T11:55:52.284171Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=1360, cumulative_total=4838, unsaved_count=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.284262Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=78, cumulative_total=4916, unsaved_count=8", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.284342Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=1360, output_tokens=78, turn_total=1438, cumulative_total=4916, latency_ms=698.72", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.284712Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.288429Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_6524c2c99c0b, chunks=[0]", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.288623Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_6524c2c99c0b, chunks_requested=[0], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.288755Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_6524c2c99c0b, chunks=[0], rows=1, duration_ms=0.35", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.292292Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.818823Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1820, "output_tokens": 133, "total_tokens": 1953, "latency_ms": 528.8629531860352}}
{"timestamp": "2026-01-12T11:55:52.818908Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=1820, cumulative_total=6736, unsaved_count=9", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.818951Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=133, cumulative_total=6869, unsaved_count=10", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.818993Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=1820, output_tokens=133, turn_total=1953, cumulative_total=6869, latency_ms=528.86", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.819197Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.822281Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_6524c2c99c0b, chunks=[1, 2, 3, 4]", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.822409Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_6524c2c99c0b, chunks_requested=[1, 2, 3, 4], rows=4, progress=100.0%, retrieved=5/5", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.822492Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_6524c2c99c0b, chunks=[1, 2, 3, 4], rows=4, duration_ms=0.24", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.824774Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.207031Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2924, "output_tokens": 913, "total_tokens": 3837, "latency_ms": 2383.6259841918945}}
{"timestamp": "2026-01-12T11:55:55.207129Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=2924, cumulative_total=9793, unsaved_count=11", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.207177Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=913, cumulative_total=10706, unsaved_count=12", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.207221Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=2924, output_tokens=913, turn_total=3837, cumulative_total=10706, latency_ms=2383.63", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.208869Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_3ca399e0033f469a, cumulative_total=10706, cumulative_input=9021, cumulative_output=1685, turns=12", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.211577Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=8419.09, trace_id=fc0735ad-c49a-4fce-ae54-280481dd6262", "trace_id": "fc0735ad-c49a-4fce-ae54-280481dd6262", "request_id": "9b6f1a46-3552-4b8c-9444-1b115c338464", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.214494Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=3948589e-dcca-4115-acaf-e5020083fc86, request_id=2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "trace_id": "3948589e-dcca-4115-acaf-e5020083fc86", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.214599Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "3948589e-dcca-4115-acaf-e5020083fc86", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.688405Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "4e5e31055afa414a", "execution_time_ms": 476.4223098754883, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T11:55:55.688694Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=476.81ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:55.761870Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "0e96309c-4234-411d-976b-18def2ce27aa", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 546.6229915618896, "row_count": 22, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:55:55.762085Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=22, total_time=547.20ms", "trace_id": "0e96309c-4234-411d-976b-18def2ce27aa", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.762137Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=22", "trace_id": "0e96309c-4234-411d-976b-18def2ce27aa", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.762425Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=547.94, trace_id=3948589e-dcca-4115-acaf-e5020083fc86", "trace_id": "3948589e-dcca-4115-acaf-e5020083fc86", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:56.159826Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "911a6bb07eeaa656", "execution_time_ms": 470.9198474884033, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 10706, updated_at = NOW()\n            WHERE"}}
{"timestamp": "2026-01-12T11:55:56.160138Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=471.37ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:56.160184Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_3ca399e0033f469a, messages_saved=12, cumulative_tokens=10706", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:37.682223Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.015945Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.034290Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.036010Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.036111Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.036168Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.038769Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.044106Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.060179Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.213802Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.541414Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.561390Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.563084Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.563136Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.563181Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.565803Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.571210Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.586872Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:47.730591Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.049082Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.067003Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.068595Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.068645Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.068686Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.071275Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.076560Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.092794Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:53.719492Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_3ca399e0033f469a/end, trace_id=6deca207-c18b-4df5-9006-e48f9720d56b, request_id=c6a3dc9e-e946-4098-9cab-3c49c287a6b3", "trace_id": "6deca207-c18b-4df5-9006-e48f9720d56b", "request_id": "c6a3dc9e-e946-4098-9cab-3c49c287a6b3", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:53.719607Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_3ca399e0033f469a/end, remaining=99", "trace_id": "6deca207-c18b-4df5-9006-e48f9720d56b", "request_id": "c6a3dc9e-e946-4098-9cab-3c49c287a6b3", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:53.720232Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_3ca399e0033f469a/end, status=200, duration_ms=0.82, trace_id=6deca207-c18b-4df5-9006-e48f9720d56b", "trace_id": "6deca207-c18b-4df5-9006-e48f9720d56b", "request_id": "c6a3dc9e-e946-4098-9cab-3c49c287a6b3", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:53.722077Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=c2e851d7-2ab5-44ed-87a3-27608ec745c3, request_id=fd23520e-850a-4c41-9c4c-40ac785cddce", "trace_id": "c2e851d7-2ab5-44ed-87a3-27608ec745c3", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:53.722150Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "c2e851d7-2ab5-44ed-87a3-27608ec745c3", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:54.441017Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "522eb8a7-3e7f-44db-894d-75b5f8b4ee78", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 718.1529998779297, "row_count": 22, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:57:54.441735Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=22, total_time=719.22ms", "trace_id": "522eb8a7-3e7f-44db-894d-75b5f8b4ee78", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:54.441841Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=22", "trace_id": "522eb8a7-3e7f-44db-894d-75b5f8b4ee78", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:54.442464Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=720.32, trace_id=c2e851d7-2ab5-44ed-87a3-27608ec745c3", "trace_id": "c2e851d7-2ab5-44ed-87a3-27608ec745c3", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.156957Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=177a5e76-48b8-4a48-8a61-8433c7f60e14, request_id=51711d10-4773-42ca-aebb-d43dc9497fbb", "trace_id": "177a5e76-48b8-4a48-8a61-8433c7f60e14", "request_id": "51711d10-4773-42ca-aebb-d43dc9497fbb", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.157115Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "177a5e76-48b8-4a48-8a61-8433c7f60e14", "request_id": "51711d10-4773-42ca-aebb-d43dc9497fbb", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.797417Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a44d1c7b68f7976f", "execution_time_ms": 639.6210193634033, "row_count": 1, "query_preview": "\n        INSERT INTO chats (chat_id, user_id, topic, total_tokens, is_active, created_at, updated_at"}}
{"timestamp": "2026-01-12T11:58:02.797822Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=640.14ms", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.797887Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "create_new_chat", "line": 76, "message": "chat_created_db - chat_id=chat_b1d05aca94c94f8c", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.797927Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 196, "message": "chat_created - chat_id=chat_b1d05aca94c94f8c", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.797983Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_b1d05aca94c94f8c", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.798738Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_b1d05aca94c94f8c", "trace_id": "33a6c42e-0805-49bc-9ae4-11c1b65a21bf", "request_id": "541e1ade-6d3f-4b74-94af-4507ef36a8b8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.862767Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.864443Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=3", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.342738Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 885, "output_tokens": 149, "total_tokens": 1034, "latency_ms": 1543.2376861572266}}
{"timestamp": "2026-01-12T11:58:04.342855Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=885, cumulative_total=885, unsaved_count=1", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.342905Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=149, cumulative_total=1034, unsaved_count=2", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.342960Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=885, output_tokens=149, turn_total=1034, cumulative_total=1034, latency_ms=1543.24", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.343247Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.344457Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=45b4e2382f2bf29f", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.952770Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "45b4e2382f2bf29f", "execution_time_ms": 608.0639362335205, "row_count": 5, "query_preview": "SELECT * FROM invoices ORDER BY invoice_date"}}
{"timestamp": "2026-01-12T11:58:04.953095Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=608.53ms", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.954051Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=45b4e2382f2bf29f, error=Object of type date is not JSON serializable, duration_ms=608.79", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type date is not JSON serializable"}
{"timestamp": "2026-01-12T11:58:04.957037Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.974750Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 978, "output_tokens": 281, "total_tokens": 1259, "latency_ms": 1019.395112991333}}
{"timestamp": "2026-01-12T11:58:05.974842Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=978, cumulative_total=2012, unsaved_count=3", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.974892Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=281, cumulative_total=2293, unsaved_count=4", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.974946Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=978, output_tokens=281, turn_total=1259, cumulative_total=2293, latency_ms=1019.40", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.975201Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.976071Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=fd20b3cf47dc4207", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:06.465191Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "fd20b3cf47dc4207", "execution_time_ms": 488.9211654663086, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, to_char(invoice_date, 'YYYY-MM-DD') AS invoice_date, pay"}}
{"timestamp": "2026-01-12T11:58:06.465541Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=489.40ms", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:06.465772Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=fd20b3cf47dc4207, error=Object of type UUID is not JSON serializable, duration_ms=489.55", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T11:58:06.468448Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.817431Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1119, "output_tokens": 245, "total_tokens": 1364, "latency_ms": 1350.60715675354}}
{"timestamp": "2026-01-12T11:58:07.817510Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1119, cumulative_total=3412, unsaved_count=5", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.817548Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=245, cumulative_total=3657, unsaved_count=6", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.817590Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1119, output_tokens=245, turn_total=1364, cumulative_total=3657, latency_ms=1350.61", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.817820Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.818797Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=a36b0d89f6d3d35f", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:08.290572Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a36b0d89f6d3d35f", "execution_time_ms": 471.57907485961914, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, to_char(invoice_date, 'YYYY-MM-DD') AS invoice_date, pay"}}
{"timestamp": "2026-01-12T11:58:08.290911Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=472.02ms", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:08.291092Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 141, "message": "context_offload_stored - session_id=session_0696bfb953bb, rows=5, chunks=5, chunk_size=100", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:08.291146Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=a36b0d89f6d3d35f, rows=5, chunks=5, duration_ms=472.19, offload=yes", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:08.293849Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.937344Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1464, "output_tokens": 66, "total_tokens": 1530, "latency_ms": 4645.501136779785}}
{"timestamp": "2026-01-12T11:58:12.937424Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1464, cumulative_total=5121, unsaved_count=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.937466Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=66, cumulative_total=5187, unsaved_count=8", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.937508Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1464, output_tokens=66, turn_total=1530, cumulative_total=5187, latency_ms=4645.50", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.937697Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.939400Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_0696bfb953bb, chunks=[0]", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.939486Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_0696bfb953bb, chunks_requested=[0], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.939547Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_0696bfb953bb, chunks=[0], rows=1, duration_ms=0.15", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.941731Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.064820Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1888, "output_tokens": 404, "total_tokens": 2292, "latency_ms": 1124.5088577270508}}
{"timestamp": "2026-01-12T11:58:14.065068Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1888, cumulative_total=7075, unsaved_count=9", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.065209Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=404, cumulative_total=7479, unsaved_count=10", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.065327Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1888, output_tokens=404, turn_total=2292, cumulative_total=7479, latency_ms=1124.51", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.067875Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_b1d05aca94c94f8c, cumulative_total=7479, cumulative_input=6334, cumulative_output=1145, turns=10", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.071819Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=11914.83, trace_id=177a5e76-48b8-4a48-8a61-8433c7f60e14", "trace_id": "177a5e76-48b8-4a48-8a61-8433c7f60e14", "request_id": "51711d10-4773-42ca-aebb-d43dc9497fbb", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.074968Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=f0092190-b67e-43be-9c74-3924ed325765, request_id=01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "trace_id": "f0092190-b67e-43be-9c74-3924ed325765", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.075039Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "f0092190-b67e-43be-9c74-3924ed325765", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.542267Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "38f4889f-edf1-42bb-889f-8140a60782df", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 466.5510654449463, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:58:14.542835Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=467.49ms", "trace_id": "38f4889f-edf1-42bb-889f-8140a60782df", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.542935Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "38f4889f-edf1-42bb-889f-8140a60782df", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.543505Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=468.47, trace_id=f0092190-b67e-43be-9c74-3924ed325765", "trace_id": "f0092190-b67e-43be-9c74-3924ed325765", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.650648Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "8058b45202d733e2", "execution_time_ms": 578.2709121704102, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T11:58:14.650959Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=578.72ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:58:15.341723Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "8a8f36441d151db5", "execution_time_ms": 690.5310153961182, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 7479, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T11:58:15.342003Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=690.98ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:58:15.342050Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_b1d05aca94c94f8c, messages_saved=10, cumulative_tokens=7479", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:01:28.986097Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=03608518-fe7e-4af6-8281-a1697ef019a1, request_id=ef3da02a-ed9f-4509-837f-5aaad6368ea5", "trace_id": "03608518-fe7e-4af6-8281-a1697ef019a1", "request_id": "ef3da02a-ed9f-4509-837f-5aaad6368ea5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.986997Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "03608518-fe7e-4af6-8281-a1697ef019a1", "request_id": "ef3da02a-ed9f-4509-837f-5aaad6368ea5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.987782Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 109, "message": "chat_cache_hit - chat_id=chat_b1d05aca94c94f8c", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.987858Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_b1d05aca94c94f8c", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.988017Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_b1d05aca94c94f8c", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.990269Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "aget_tuple", "line": 120, "message": "adaptive_checkpoint_windowed - original=312, windowed=10, tokens=881", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.990884Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_b1d05aca94c94f8c", "trace_id": "d0b345a8-0c7d-449b-8f21-c16813b9307c", "request_id": "839a160a-94b9-4ea1-b0fd-dc7bcd849b06", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.993920Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.981619Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1249, "output_tokens": 57, "total_tokens": 1306, "latency_ms": 1990.0548458099365}}
{"timestamp": "2026-01-12T12:01:30.981712Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1249, cumulative_total=8728, unsaved_count=1", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.981752Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=57, cumulative_total=8785, unsaved_count=2", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.981793Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1249, output_tokens=57, turn_total=1306, cumulative_total=8785, latency_ms=1990.05", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.982031Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.983287Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=45b4e2382f2bf29f", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:31.533388Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "45b4e2382f2bf29f", "execution_time_ms": 549.8530864715576, "row_count": 5, "query_preview": "SELECT * FROM invoices ORDER BY invoice_date"}}
{"timestamp": "2026-01-12T12:01:31.533688Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=550.30ms", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:31.534000Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=45b4e2382f2bf29f, error=Object of type date is not JSON serializable, duration_ms=550.53", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type date is not JSON serializable"}
{"timestamp": "2026-01-12T12:01:31.537427Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.029579Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1288, "output_tokens": 250, "total_tokens": 1538, "latency_ms": 1493.5753345489502}}
{"timestamp": "2026-01-12T12:01:33.029693Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1288, cumulative_total=10073, unsaved_count=3", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.029764Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=250, cumulative_total=10323, unsaved_count=4", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.029811Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1288, output_tokens=250, turn_total=1538, cumulative_total=10323, latency_ms=1493.58", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.030007Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.031536Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=9d8b059dbc6c8912", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.612668Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "9d8b059dbc6c8912", "execution_time_ms": 580.9340476989746, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text as invoice_date, payment_terms, due_d"}}
{"timestamp": "2026-01-12T12:01:33.612967Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=581.35ms", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.613255Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=9d8b059dbc6c8912, error=Object of type UUID is not JSON serializable, duration_ms=581.54", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T12:01:33.617808Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.375600Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1400, "output_tokens": 203, "total_tokens": 1603, "latency_ms": 760.2221965789795}}
{"timestamp": "2026-01-12T12:01:34.375706Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1400, cumulative_total=11723, unsaved_count=5", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.375762Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=203, cumulative_total=11926, unsaved_count=6", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.375828Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1400, output_tokens=203, turn_total=1603, cumulative_total=11926, latency_ms=760.22", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.376058Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.378556Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=0609a982aa2889b7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.850567Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "0609a982aa2889b7", "execution_time_ms": 471.7979431152344, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text as invoice_date, payment_terms, due_d"}}
{"timestamp": "2026-01-12T12:01:34.850876Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=472.23ms", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.851008Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 141, "message": "context_offload_stored - session_id=session_7b1b59b20203, rows=5, chunks=5, chunk_size=100", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.851058Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=0609a982aa2889b7, rows=5, chunks=5, duration_ms=472.40, offload=yes", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.854060Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.944150Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1370, "output_tokens": 77, "total_tokens": 1447, "latency_ms": 3091.850996017456}}
{"timestamp": "2026-01-12T12:01:37.944240Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1370, cumulative_total=13296, unsaved_count=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.944279Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=77, cumulative_total=13373, unsaved_count=8", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.944318Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1370, output_tokens=77, turn_total=1447, cumulative_total=13373, latency_ms=3091.85", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.944549Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.953728Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_7b1b59b20203, chunks=[0]", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.953807Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_7b1b59b20203, chunks_requested=[0], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.953851Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_7b1b59b20203, chunks=[0], rows=1, duration_ms=0.14", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.956972Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.686544Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1806, "output_tokens": 120, "total_tokens": 1926, "latency_ms": 1730.828046798706}}
{"timestamp": "2026-01-12T12:01:39.686708Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1806, cumulative_total=15179, unsaved_count=9", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.686788Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=120, cumulative_total=15299, unsaved_count=10", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.686869Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1806, output_tokens=120, turn_total=1926, cumulative_total=15299, latency_ms=1730.83", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.687284Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.712856Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_7b1b59b20203, chunks=[1, 2, 3, 4]", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.712975Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_7b1b59b20203, chunks_requested=[1, 2, 3, 4], rows=4, progress=100.0%, retrieved=5/5", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.713022Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_7b1b59b20203, chunks=[1, 2, 3, 4], rows=4, duration_ms=0.22", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.719391Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.600959Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2922, "output_tokens": 779, "total_tokens": 3701, "latency_ms": 4883.671998977661}}
{"timestamp": "2026-01-12T12:01:44.601080Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=2922, cumulative_total=18221, unsaved_count=11", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.601130Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=779, cumulative_total=19000, unsaved_count=12", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.601173Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=2922, output_tokens=779, turn_total=3701, cumulative_total=19000, latency_ms=4883.67", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.610037Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_b1d05aca94c94f8c, cumulative_total=19000, cumulative_input=16369, cumulative_output=2631, turns=22", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.626862Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=15641.07, trace_id=03608518-fe7e-4af6-8281-a1697ef019a1", "trace_id": "03608518-fe7e-4af6-8281-a1697ef019a1", "request_id": "ef3da02a-ed9f-4509-837f-5aaad6368ea5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.629795Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=0b51c4f0-ef42-4e6a-9c39-d1accbe25b98, request_id=3d83287e-2220-4766-80b6-1ed2bd4f16dd", "trace_id": "0b51c4f0-ef42-4e6a-9c39-d1accbe25b98", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.629876Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "0b51c4f0-ef42-4e6a-9c39-d1accbe25b98", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:45.088182Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "bc70b319dff1556d", "execution_time_ms": 460.82115173339844, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:01:45.088452Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "dc33c699-655e-429c-be48-c7ab208ec569", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 457.86333084106445, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:01:45.088607Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=461.36ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:01:45.088735Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=458.61ms", "trace_id": "dc33c699-655e-429c-be48-c7ab208ec569", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:45.088773Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "dc33c699-655e-429c-be48-c7ab208ec569", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:45.089122Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=459.37, trace_id=0b51c4f0-ef42-4e6a-9c39-d1accbe25b98", "trace_id": "0b51c4f0-ef42-4e6a-9c39-d1accbe25b98", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:45.581463Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "47e244b527354a49", "execution_time_ms": 492.42305755615234, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 19000, updated_at = NOW()\n            WHERE"}}
{"timestamp": "2026-01-12T12:01:45.581803Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=493.13ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:01:45.581867Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_b1d05aca94c94f8c, messages_saved=12, cumulative_tokens=19000", "trace_id": null, "request_id": null, "user_id_hash": null}
