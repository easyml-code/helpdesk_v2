{"timestamp": "2026-01-12T08:07:11.190240Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:07:11.192248Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:07:11.192326Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:07:11.192370Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:07:11.195658Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.942759Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.944752Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.944813Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.944854Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:08:29.947963Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.467569Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.469599Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.469665Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.469706Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T08:13:29.473077Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.250410Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.252227Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.252289Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.252331Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T09:14:27.255180Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.761339Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.763087Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.763150Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.763192Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:22:58.766426Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.983814Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.985615Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.985672Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.985716Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.988996Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:33.994703Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.005053Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "<module>", "line": 290, "message": "Starting Vendor HelpDesk Agent API server (Production Mode with Rate Limiting)...", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.356556Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.358209Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.358263Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.358304Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.360931Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:34:34.365326Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.411802Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.413491Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.413550Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.413589Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.416290Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:35:57.420526Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.385784Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.387420Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.387476Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.387517Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.390097Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.394459Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:10.409176Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 270, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, metrics_enabled=True, rate_limiting=enabled", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.238965Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 282, "message": "app_shutdown", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.578257Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.579946Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.580005Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.580046Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.582663Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.587210Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:13.601949Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 270, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, metrics_enabled=True, rate_limiting=enabled", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.708672Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/, trace_id=a2cc380a-516d-43c5-bed7-2cfaa97e81a5, request_id=16d61242-962a-47c1-af7d-0d0d1aedab34", "trace_id": "a2cc380a-516d-43c5-bed7-2cfaa97e81a5", "request_id": "16d61242-962a-47c1-af7d-0d0d1aedab34", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.708783Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/, remaining=99, limit=100", "trace_id": "a2cc380a-516d-43c5-bed7-2cfaa97e81a5", "request_id": "16d61242-962a-47c1-af7d-0d0d1aedab34", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.709610Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/, status=200, duration_ms=0.79, trace_id=a2cc380a-516d-43c5-bed7-2cfaa97e81a5, request_id=16d61242-962a-47c1-af7d-0d0d1aedab34", "trace_id": "a2cc380a-516d-43c5-bed7-2cfaa97e81a5", "request_id": "16d61242-962a-47c1-af7d-0d0d1aedab34", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.745971Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/favicon.ico, trace_id=5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc, request_id=690ec9fb-f11d-4398-ab63-2de446976f39", "trace_id": "5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc", "request_id": "690ec9fb-f11d-4398-ab63-2de446976f39", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.746313Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/favicon.ico, remaining=99, limit=100", "trace_id": "5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc", "request_id": "690ec9fb-f11d-4398-ab63-2de446976f39", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:32.746622Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/favicon.ico, status=404, duration_ms=0.68, trace_id=5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc, request_id=690ec9fb-f11d-4398-ab63-2de446976f39", "trace_id": "5f5c1b87-8f2c-482c-b7e3-a77a9bf112fc", "request_id": "690ec9fb-f11d-4398-ab63-2de446976f39", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:46.819801Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/docs, trace_id=b02518b9-0808-497b-825c-380147b41fe6, request_id=3a5154bb-8fcd-4bf0-a6cd-08f6dd3ba11d", "trace_id": "b02518b9-0808-497b-825c-380147b41fe6", "request_id": "3a5154bb-8fcd-4bf0-a6cd-08f6dd3ba11d", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:46.820304Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/docs, status=200, duration_ms=0.61, trace_id=b02518b9-0808-497b-825c-380147b41fe6, request_id=3a5154bb-8fcd-4bf0-a6cd-08f6dd3ba11d", "trace_id": "b02518b9-0808-497b-825c-380147b41fe6", "request_id": "3a5154bb-8fcd-4bf0-a6cd-08f6dd3ba11d", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:46.949364Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/openapi.json, trace_id=df1fc87f-d60b-407f-b66f-6cc0ffcf3059, request_id=75317f1c-1b56-4b9d-836c-b5aaa843e8da", "trace_id": "df1fc87f-d60b-407f-b66f-6cc0ffcf3059", "request_id": "75317f1c-1b56-4b9d-836c-b5aaa843e8da", "user_id_hash": null}
{"timestamp": "2026-01-12T10:37:46.954198Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/openapi.json, status=200, duration_ms=4.89, trace_id=df1fc87f-d60b-407f-b66f-6cc0ffcf3059, request_id=75317f1c-1b56-4b9d-836c-b5aaa843e8da", "trace_id": "df1fc87f-d60b-407f-b66f-6cc0ffcf3059", "request_id": "75317f1c-1b56-4b9d-836c-b5aaa843e8da", "user_id_hash": null}
{"timestamp": "2026-01-12T10:39:38.724782Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/auth/login, trace_id=d9248969-8abb-4d78-9cf8-6101387768c4, request_id=7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "trace_id": "d9248969-8abb-4d78-9cf8-6101387768c4", "request_id": "7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "user_id_hash": null}
{"timestamp": "2026-01-12T10:39:38.726119Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/auth/login, remaining=4, limit=5", "trace_id": "d9248969-8abb-4d78-9cf8-6101387768c4", "request_id": "7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "user_id_hash": null}
{"timestamp": "2026-01-12T10:39:40.409798Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=5aea7c64-d2e9-4767-970d-834ec6bf47ea", "trace_id": "5aea7c64-d2e9-4767-970d-834ec6bf47ea", "request_id": "79a8b758-e28e-474a-951f-03fc17a08087", "user_id_hash": null}
{"timestamp": "2026-01-12T10:39:40.410150Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=1685.67, trace_id=d9248969-8abb-4d78-9cf8-6101387768c4, request_id=7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "trace_id": "d9248969-8abb-4d78-9cf8-6101387768c4", "request_id": "7f5c1227-28f0-484c-bcc2-5a2240e8cd59", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:39.792076Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/chat, trace_id=4ae44142-b00d-4e45-be48-81240d17a13c, request_id=fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "trace_id": "4ae44142-b00d-4e45-be48-81240d17a13c", "request_id": "fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:39.793156Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat, remaining=19, limit=20", "trace_id": "4ae44142-b00d-4e45-be48-81240d17a13c", "request_id": "fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:39.794544Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/chat, status=401, duration_ms=3.13, trace_id=4ae44142-b00d-4e45-be48-81240d17a13c, request_id=fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "trace_id": "4ae44142-b00d-4e45-be48-81240d17a13c", "request_id": "fae474b2-e25a-40a1-b7d3-b5bd0e3ef2d6", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:59.792120Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/chat, trace_id=6e795f75-2874-4fa6-84ed-a0d1f5798b6b, request_id=0074e529-60fd-45b6-bb54-ee32babd8300", "trace_id": "6e795f75-2874-4fa6-84ed-a0d1f5798b6b", "request_id": "0074e529-60fd-45b6-bb54-ee32babd8300", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:59.792294Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat, remaining=18, limit=20", "trace_id": "6e795f75-2874-4fa6-84ed-a0d1f5798b6b", "request_id": "0074e529-60fd-45b6-bb54-ee32babd8300", "user_id_hash": null}
{"timestamp": "2026-01-12T10:40:59.793025Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/chat, status=401, duration_ms=0.97, trace_id=6e795f75-2874-4fa6-84ed-a0d1f5798b6b, request_id=0074e529-60fd-45b6-bb54-ee32babd8300", "trace_id": "6e795f75-2874-4fa6-84ed-a0d1f5798b6b", "request_id": "0074e529-60fd-45b6-bb54-ee32babd8300", "user_id_hash": null}
{"timestamp": "2026-01-12T10:41:48.457101Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/chat, trace_id=1bf202ce-02e9-4893-9d91-0d45c855ca4f, request_id=f67422dc-4351-408e-9eec-e1ff601df6ad", "trace_id": "1bf202ce-02e9-4893-9d91-0d45c855ca4f", "request_id": "f67422dc-4351-408e-9eec-e1ff601df6ad", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.457206Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat, remaining=19, limit=20", "trace_id": "1bf202ce-02e9-4893-9d91-0d45c855ca4f", "request_id": "f67422dc-4351-408e-9eec-e1ff601df6ad", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.458688Z", "level": "INFO", "logger": "app_logger", "module": "cache_manager", "function": "create_chat_session", "line": 147, "message": "chat_session_created - chat_id=string, trace_id=43228bf0-0953-420f-85ff-fdaa3227a438", "trace_id": "43228bf0-0953-420f-85ff-fdaa3227a438", "request_id": "a39ca352-a868-441d-b714-aede1d4e46ce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.458807Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 181, "message": "chat_continue - chat_id=string, user_id_hash=c55ea77e83770883", "trace_id": "43228bf0-0953-420f-85ff-fdaa3227a438", "request_id": "a39ca352-a868-441d-b714-aede1d4e46ce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.458907Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 232, "message": "agent_invoke_start - chat_id=string", "trace_id": "43228bf0-0953-420f-85ff-fdaa3227a438", "request_id": "a39ca352-a868-441d-b714-aede1d4e46ce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:41:48.462846Z", "level": "ERROR", "logger": "app_logger", "module": "routes", "function": "chat", "line": 249, "message": "chat_error - error=", "trace_id": "43228bf0-0953-420f-85ff-fdaa3227a438", "request_id": "a39ca352-a868-441d-b714-aede1d4e46ce", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/api/routes.py\", line 233, in chat\n    result = await agent_graph.ainvoke(initial_state, config)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/main.py\", line 3158, in ainvoke\n    async for chunk in self.astream(\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/main.py\", line 2888, in astream\n    async with AsyncPregelLoop(\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/_loop.py\", line 1264, in __aenter__\n    saved = await self.checkpointer.aget_tuple(self.checkpoint_config)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/checkpoint/base/__init__.py\", line 271, in aget_tuple\n    raise NotImplementedError\nNotImplementedError"}
{"timestamp": "2026-01-12T10:41:48.463709Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/chat, status=500, duration_ms=6.74, trace_id=1bf202ce-02e9-4893-9d91-0d45c855ca4f, request_id=f67422dc-4351-408e-9eec-e1ff601df6ad", "trace_id": "1bf202ce-02e9-4893-9d91-0d45c855ca4f", "request_id": "f67422dc-4351-408e-9eec-e1ff601df6ad", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:42:29.943837Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 282, "message": "app_shutdown", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.450247Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.451866Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.451920Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.451968Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.455272Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.460304Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:42:30.482055Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 270, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, metrics_enabled=True, rate_limiting=enabled", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:11.396517Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/auth/login, trace_id=5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5, request_id=cda126a8-5cc3-4619-b598-82a9408cc122", "trace_id": "5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5", "request_id": "cda126a8-5cc3-4619-b598-82a9408cc122", "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:11.396918Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/auth/login, remaining=4, limit=5", "trace_id": "5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5", "request_id": "cda126a8-5cc3-4619-b598-82a9408cc122", "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:12.926800Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=36eda188-91f8-4056-8170-4cb2af45d4b4", "trace_id": "36eda188-91f8-4056-8170-4cb2af45d4b4", "request_id": "5d27baf4-1412-48bc-9c9d-2f1c32ec454c", "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:12.927101Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=1530.66, trace_id=5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5, request_id=cda126a8-5cc3-4619-b598-82a9408cc122", "trace_id": "5c8ef3b4-f0ca-496b-ab60-7a1f051d9db5", "request_id": "cda126a8-5cc3-4619-b598-82a9408cc122", "user_id_hash": null}
{"timestamp": "2026-01-12T10:44:12.929530Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=GET, path=/api/chat/history, trace_id=7a46e461-cbb0-4234-bb3c-8d138f51efec, request_id=bb3dd184-5a61-405f-8b30-2390fb1d9fed", "trace_id": "7a46e461-cbb0-4234-bb3c-8d138f51efec", "request_id": "bb3dd184-5a61-405f-8b30-2390fb1d9fed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:12.929635Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat/history, remaining=99, limit=100", "trace_id": "7a46e461-cbb0-4234-bb3c-8d138f51efec", "request_id": "bb3dd184-5a61-405f-8b30-2390fb1d9fed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:12.929943Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=GET, path=/api/chat/history, status=404, duration_ms=0.48, trace_id=7a46e461-cbb0-4234-bb3c-8d138f51efec, request_id=bb3dd184-5a61-405f-8b30-2390fb1d9fed", "trace_id": "7a46e461-cbb0-4234-bb3c-8d138f51efec", "request_id": "bb3dd184-5a61-405f-8b30-2390fb1d9fed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.436329Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 71, "message": "request_start - method=POST, path=/api/chat, trace_id=b51c1149-d9db-45e3-a5d2-a31518f8a2ac, request_id=edc1fd70-020b-4262-8d20-c40288536dc7", "trace_id": "b51c1149-d9db-45e3-a5d2-a31518f8a2ac", "request_id": "edc1fd70-020b-4262-8d20-c40288536dc7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.436439Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 86, "message": "rate_limit_check - path=/api/chat, remaining=19, limit=20", "trace_id": "b51c1149-d9db-45e3-a5d2-a31518f8a2ac", "request_id": "edc1fd70-020b-4262-8d20-c40288536dc7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.437057Z", "level": "INFO", "logger": "app_logger", "module": "cache_manager", "function": "create_chat_session", "line": 147, "message": "chat_session_created - chat_id=chat_791a7aa8, trace_id=30173cca-6eec-4fd9-8064-f427d1228de4", "trace_id": "30173cca-6eec-4fd9-8064-f427d1228de4", "request_id": "121f5aa2-d8e8-421b-a30e-8a4efa59e204", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.437123Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_created - chat_id=chat_791a7aa8, user_id_hash=c55ea77e83770883", "trace_id": "30173cca-6eec-4fd9-8064-f427d1228de4", "request_id": "121f5aa2-d8e8-421b-a30e-8a4efa59e204", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.437200Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 232, "message": "agent_invoke_start - chat_id=chat_791a7aa8", "trace_id": "30173cca-6eec-4fd9-8064-f427d1228de4", "request_id": "121f5aa2-d8e8-421b-a30e-8a4efa59e204", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T10:44:17.440948Z", "level": "ERROR", "logger": "app_logger", "module": "routes", "function": "chat", "line": 249, "message": "chat_error - error=", "trace_id": "30173cca-6eec-4fd9-8064-f427d1228de4", "request_id": "121f5aa2-d8e8-421b-a30e-8a4efa59e204", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/api/routes.py\", line 233, in chat\n    result = await agent_graph.ainvoke(initial_state, config)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/main.py\", line 3158, in ainvoke\n    async for chunk in self.astream(\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/main.py\", line 2888, in astream\n    async with AsyncPregelLoop(\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/pregel/_loop.py\", line 1264, in __aenter__\n    saved = await self.checkpointer.aget_tuple(self.checkpoint_config)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/langgraph/checkpoint/base/__init__.py\", line 271, in aget_tuple\n    raise NotImplementedError\nNotImplementedError"}
{"timestamp": "2026-01-12T10:44:17.442790Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 128, "message": "request_complete - method=POST, path=/api/chat, status=500, duration_ms=6.51, trace_id=b51c1149-d9db-45e3-a5d2-a31518f8a2ac, request_id=edc1fd70-020b-4262-8d20-c40288536dc7", "trace_id": "b51c1149-d9db-45e3-a5d2-a31518f8a2ac", "request_id": "edc1fd70-020b-4262-8d20-c40288536dc7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:10:40.751962Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 282, "message": "app_shutdown", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.256304Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.257867Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.257928Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.257969Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.261233Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.265944Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:41.289098Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.603450Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.953321Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.954987Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.955049Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.955088Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.957712Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.961997Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:42.976055Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.517785Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.904161Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.906078Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.906157Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.906204Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 63, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.909134Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 76, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.913431Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:10:56.927873Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:09.052118Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:09.405247Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:21.640010Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:22.423196Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:11:47.692926Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.994263Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.996121Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 22, "message": "WindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.996219Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 112, "message": "AdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.996284Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 62, "message": "agent_graph_created - checkpointer=adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:30.998874Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 75, "message": "agent_graph_compiled_with_tools_and_windowing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:31.004200Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:31.019489Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:12:41.629219Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.080548Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.099941Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.101760Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.101834Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.101881Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.104594Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.110387Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:14.126174Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:30.019283Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/auth/login, trace_id=b05c2e3d-d38e-4975-8773-1ed116600de3, request_id=7923e239-0466-46b5-ac6a-7d426d3be33a", "trace_id": "b05c2e3d-d38e-4975-8773-1ed116600de3", "request_id": "7923e239-0466-46b5-ac6a-7d426d3be33a", "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:30.019442Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/auth/login, remaining=4", "trace_id": "b05c2e3d-d38e-4975-8773-1ed116600de3", "request_id": "7923e239-0466-46b5-ac6a-7d426d3be33a", "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:31.329455Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=ca5fe1f1-ff09-4a40-afbe-4e15fd36231a", "trace_id": "ca5fe1f1-ff09-4a40-afbe-4e15fd36231a", "request_id": "3169a578-565f-421c-94c6-cef5f3821be0", "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:31.329809Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=1310.59, trace_id=b05c2e3d-d38e-4975-8773-1ed116600de3", "trace_id": "b05c2e3d-d38e-4975-8773-1ed116600de3", "request_id": "7923e239-0466-46b5-ac6a-7d426d3be33a", "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:31.332524Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=cfbb2016-15b2-4d6f-ac3e-c6db4a778697, request_id=9664140a-2b73-4a10-8780-ba45139bf839", "trace_id": "cfbb2016-15b2-4d6f-ac3e-c6db4a778697", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:31.332614Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "cfbb2016-15b2-4d6f-ac3e-c6db4a778697", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:32.177747Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "2af1f357-1fa6-4dac-864e-a401fbe22c92", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 844.5849418640137, "row_count": 20, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:13:32.178478Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=20, total_time=845.51ms", "trace_id": "2af1f357-1fa6-4dac-864e-a401fbe22c92", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:32.178661Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=20", "trace_id": "2af1f357-1fa6-4dac-864e-a401fbe22c92", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:32.179334Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=846.80, trace_id=cfbb2016-15b2-4d6f-ac3e-c6db4a778697", "trace_id": "cfbb2016-15b2-4d6f-ac3e-c6db4a778697", "request_id": "9664140a-2b73-4a10-8780-ba45139bf839", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:36.745919Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=53999af3-8b7d-4fe1-9600-0eaa14293a4b, request_id=3991062d-a933-4684-91eb-5d759110fe7c", "trace_id": "53999af3-8b7d-4fe1-9600-0eaa14293a4b", "request_id": "3991062d-a933-4684-91eb-5d759110fe7c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:36.746027Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "53999af3-8b7d-4fe1-9600-0eaa14293a4b", "request_id": "3991062d-a933-4684-91eb-5d759110fe7c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.291125Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a843e971e5987b40", "execution_time_ms": 544.3010330200195, "row_count": 1, "query_preview": "\n        INSERT INTO chats (chat_id, user_id, topic, total_tokens, is_active, created_at, updated_at"}}
{"timestamp": "2026-01-12T11:13:37.291880Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=545.27ms", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.291992Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "create_new_chat", "line": 76, "message": "chat_created_db - chat_id=chat_e7792cd60731462d", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.292077Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 196, "message": "chat_created - chat_id=chat_e7792cd60731462d", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.292192Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_e7792cd60731462d", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.294155Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_e7792cd60731462d", "trace_id": "a8858714-17e5-4e21-bcf3-ef64abf44342", "request_id": "fda90521-dc8b-42f4-8157-2d0cb25b90ab", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.353261Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:37.355099Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_e7792cd60731462d, input_messages=3", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.107576Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 873, "output_tokens": 60, "total_tokens": 933, "latency_ms": 812.4947547912598}}
{"timestamp": "2026-01-12T11:13:38.107704Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=user, tokens=873, cumulative_total=873, unsaved_count=1", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.107753Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=assistant, tokens=60, cumulative_total=933, unsaved_count=2", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.107811Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_e7792cd60731462d, input_tokens=873, output_tokens=60, turn_total=933, cumulative_total=933, latency_ms=812.49", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.108761Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_e7792cd60731462d, cumulative_total=933, cumulative_input=873, cumulative_output=60, turns=2", "trace_id": "f669dfab-0163-460c-95e3-1dc5cf76efe6", "request_id": "7695b0d4-84dd-4cbd-ad43-596c38040e7b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.109470Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=1363.64, trace_id=53999af3-8b7d-4fe1-9600-0eaa14293a4b", "trace_id": "53999af3-8b7d-4fe1-9600-0eaa14293a4b", "request_id": "3991062d-a933-4684-91eb-5d759110fe7c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.112586Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=1569aae5-5e6d-461b-a038-3d2708a46334, request_id=9f1639a0-1872-41b1-b56a-9471f555ffe1", "trace_id": "1569aae5-5e6d-461b-a038-3d2708a46334", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.112654Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "1569aae5-5e6d-461b-a038-3d2708a46334", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.608963Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "0d0c2810-5dc2-4be8-99fa-4d00d418e68c", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 495.78094482421875, "row_count": 21, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:13:38.609230Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=21, total_time=496.27ms", "trace_id": "0d0c2810-5dc2-4be8-99fa-4d00d418e68c", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.609286Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=21", "trace_id": "0d0c2810-5dc2-4be8-99fa-4d00d418e68c", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.609515Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=496.99, trace_id=1569aae5-5e6d-461b-a038-3d2708a46334", "trace_id": "1569aae5-5e6d-461b-a038-3d2708a46334", "request_id": "9f1639a0-1872-41b1-b56a-9471f555ffe1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:13:38.617910Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "f1eacbcdbb4bec3c", "execution_time_ms": 507.997989654541, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T11:13:38.618224Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=508.45ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:39.101998Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "25eb4d9f28b0515c", "execution_time_ms": 483.43610763549805, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 933, updated_at = NOW()\n            WHERE c"}}
{"timestamp": "2026-01-12T11:13:39.102657Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=484.29ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:13:39.102795Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_e7792cd60731462d, messages_saved=2, cumulative_tokens=933", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:14:14.091653Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=680e41fe-efd9-4fc7-b218-b0f1865ec5a5, request_id=45c714e6-d312-4131-8e6b-e32246320a8b", "trace_id": "680e41fe-efd9-4fc7-b218-b0f1865ec5a5", "request_id": "45c714e6-d312-4131-8e6b-e32246320a8b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.091750Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=18", "trace_id": "680e41fe-efd9-4fc7-b218-b0f1865ec5a5", "request_id": "45c714e6-d312-4131-8e6b-e32246320a8b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.092312Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 109, "message": "chat_cache_hit - chat_id=chat_e7792cd60731462d", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.092381Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_e7792cd60731462d", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.092492Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_e7792cd60731462d", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.093642Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "aget_tuple", "line": 120, "message": "adaptive_checkpoint_windowed - original=12, windowed=10, tokens=148", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.094286Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_e7792cd60731462d", "trace_id": "7d68b7de-5ee1-491b-b103-1ef10eadabcf", "request_id": "1002241f-2ff9-4063-8bee-3c6595a81921", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.096556Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_e7792cd60731462d, input_messages=7", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.605517Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 969, "output_tokens": 144, "total_tokens": 1113, "latency_ms": 510.69092750549316}}
{"timestamp": "2026-01-12T11:14:14.605666Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=user, tokens=969, cumulative_total=1902, unsaved_count=1", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.605743Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=assistant, tokens=144, cumulative_total=2046, unsaved_count=2", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.605824Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_e7792cd60731462d, input_tokens=969, output_tokens=144, turn_total=1113, cumulative_total=2046, latency_ms=510.69", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.606202Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:14.608260Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=6c2f505c096b63fc", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:15.226894Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "6c2f505c096b63fc", "execution_time_ms": 618.1881427764893, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date, due_date, status, amount, balance, invoice"}}
{"timestamp": "2026-01-12T11:14:15.227192Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=618.82ms", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:15.227283Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 87, "message": "tool_exec_complete - tool=query_database, query_hash=6c2f505c096b63fc, rows=5, duration_ms=619.07, offload=no", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:15.229016Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=6c2f505c096b63fc, error=Object of type date is not JSON serializable, duration_ms=619.17", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 91, in query_database_with_offload\n    return json.dumps({\n           ^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type date is not JSON serializable"}
{"timestamp": "2026-01-12T11:14:15.232464Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_e7792cd60731462d, input_messages=7", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.103586Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1036, "output_tokens": 139, "total_tokens": 1175, "latency_ms": 873.2259273529053}}
{"timestamp": "2026-01-12T11:14:16.103706Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=user, tokens=1036, cumulative_total=3082, unsaved_count=3", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.103782Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=assistant, tokens=139, cumulative_total=3221, unsaved_count=4", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.103832Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_e7792cd60731462d, input_tokens=1036, output_tokens=139, turn_total=1175, cumulative_total=3221, latency_ms=873.23", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.104059Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.105290Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=44fb1af23d15f964", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.583186Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "44fb1af23d15f964", "execution_time_ms": 477.69999504089355, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text AS invoice_date, due_date::text AS du"}}
{"timestamp": "2026-01-12T11:14:16.583441Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=478.10ms", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.583493Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 87, "message": "tool_exec_complete - tool=query_database, query_hash=44fb1af23d15f964, rows=5, duration_ms=478.21, offload=no", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:16.585738Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_e7792cd60731462d, input_messages=7", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.206037Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1499, "output_tokens": 356, "total_tokens": 1855, "latency_ms": 2621.60587310791}}
{"timestamp": "2026-01-12T11:14:19.206195Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=user, tokens=1499, cumulative_total=4720, unsaved_count=5", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.206272Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_e7792cd60731462d, role=assistant, tokens=356, cumulative_total=5076, unsaved_count=6", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.206350Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_e7792cd60731462d, input_tokens=1499, output_tokens=356, turn_total=1855, cumulative_total=5076, latency_ms=2621.61", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.209122Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_e7792cd60731462d, cumulative_total=5076, cumulative_input=4377, cumulative_output=699, turns=8", "trace_id": "9214ef14-c6de-4351-b6aa-961301a57c8c", "request_id": "42597009-51c8-425a-9097-a8686ee6c677", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.212456Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=5120.89, trace_id=680e41fe-efd9-4fc7-b218-b0f1865ec5a5", "trace_id": "680e41fe-efd9-4fc7-b218-b0f1865ec5a5", "request_id": "45c714e6-d312-4131-8e6b-e32246320a8b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.215380Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=ec44a679-ba3f-4d3e-b115-de17197cd082, request_id=f6634936-01b4-430b-8744-939154ef4760", "trace_id": "ec44a679-ba3f-4d3e-b115-de17197cd082", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.215464Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=97", "trace_id": "ec44a679-ba3f-4d3e-b115-de17197cd082", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.616901Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "27e35d1eb264fdd6", "execution_time_ms": 404.00004386901855, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T11:14:19.617238Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=404.49ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:14:19.829830Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4a6b01be-6c1b-4193-92bf-6172e5608c61", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 613.8961315155029, "row_count": 21, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:14:19.830106Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=21, total_time=614.36ms", "trace_id": "4a6b01be-6c1b-4193-92bf-6172e5608c61", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.830164Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=21", "trace_id": "4a6b01be-6c1b-4193-92bf-6172e5608c61", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:19.830431Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=615.11, trace_id=ec44a679-ba3f-4d3e-b115-de17197cd082", "trace_id": "ec44a679-ba3f-4d3e-b115-de17197cd082", "request_id": "f6634936-01b4-430b-8744-939154ef4760", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:14:20.123630Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "7ba041a133d41d53", "execution_time_ms": 506.11376762390137, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 5076, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T11:14:20.123938Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=506.59ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:14:20.124002Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_e7792cd60731462d, messages_saved=6, cumulative_tokens=5076", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:15:13.774175Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_e7792cd60731462d/end, trace_id=30ad90f2-daa7-45a9-8b74-acf8e663e133, request_id=2f59ea6f-28ae-4fdb-9511-88be394dde2f", "trace_id": "30ad90f2-daa7-45a9-8b74-acf8e663e133", "request_id": "2f59ea6f-28ae-4fdb-9511-88be394dde2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.774319Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_e7792cd60731462d/end, remaining=99", "trace_id": "30ad90f2-daa7-45a9-8b74-acf8e663e133", "request_id": "2f59ea6f-28ae-4fdb-9511-88be394dde2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.774627Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "end_session", "line": 331, "message": "session_ended - chat_id=chat_e7792cd60731462d", "trace_id": "29898406-1742-4635-9b44-4a8b4f0b5fde", "request_id": "2f59ea6f-28ae-4fdb-9511-88be394dde2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.774851Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_e7792cd60731462d/end, status=200, duration_ms=0.78, trace_id=30ad90f2-daa7-45a9-8b74-acf8e663e133", "trace_id": "30ad90f2-daa7-45a9-8b74-acf8e663e133", "request_id": "2f59ea6f-28ae-4fdb-9511-88be394dde2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.776479Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_385af20397794cde/messages, trace_id=180f5700-26f8-46ca-a5cc-647ec8811734, request_id=a1200acd-3a59-4535-ab58-59bf0037770e", "trace_id": "180f5700-26f8-46ca-a5cc-647ec8811734", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:13.776582Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_385af20397794cde/messages, remaining=99", "trace_id": "180f5700-26f8-46ca-a5cc-647ec8811734", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:14.286366Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "53ab31ed-c3e2-4ac5-9404-a264fe1f25c6", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "f6d91f9474d80e60", "execution_time_ms": 509.397029876709, "row_count": 0, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T11:15:14.286660Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=509.88ms", "trace_id": "53ab31ed-c3e2-4ac5-9404-a264fe1f25c6", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:14.286873Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_385af20397794cde/messages, status=200, duration_ms=510.44, trace_id=180f5700-26f8-46ca-a5cc-647ec8811734", "trace_id": "180f5700-26f8-46ca-a5cc-647ec8811734", "request_id": "a1200acd-3a59-4535-ab58-59bf0037770e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.359917Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_385af20397794cde/end, trace_id=aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee, request_id=ed2ba627-001e-4a3f-969b-8f73bfd76393", "trace_id": "aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee", "request_id": "ed2ba627-001e-4a3f-969b-8f73bfd76393", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.360027Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_385af20397794cde/end, remaining=99", "trace_id": "aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee", "request_id": "ed2ba627-001e-4a3f-969b-8f73bfd76393", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.360396Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_385af20397794cde/end, status=200, duration_ms=0.58, trace_id=aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee", "trace_id": "aec9e2ff-30d8-4a82-b82d-ebf0809bc3ee", "request_id": "ed2ba627-001e-4a3f-969b-8f73bfd76393", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.362002Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_566d693dacc44704/messages, trace_id=65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95, request_id=cc0bb00e-f98d-408d-a17b-364f67c5029a", "trace_id": "65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.362110Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_566d693dacc44704/messages, remaining=99", "trace_id": "65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.773336Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4301c9a9-d8bb-4738-8c12-aa88bba3026b", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "01cd98f1dc02b855", "execution_time_ms": 410.8607769012451, "row_count": 3, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T11:15:16.773670Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=3, total_time=411.31ms", "trace_id": "4301c9a9-d8bb-4738-8c12-aa88bba3026b", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:16.774051Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_566d693dacc44704/messages, status=200, duration_ms=411.98, trace_id=65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95", "trace_id": "65c8b7bb-2cad-43ff-b9ea-0bd4f4e39b95", "request_id": "cc0bb00e-f98d-408d-a17b-364f67c5029a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.040081Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_566d693dacc44704/end, trace_id=ed9c09ca-3176-4d24-ae9c-ff054f60ed56, request_id=9dcdfe4e-e9bc-4f1d-87d9-2e7eb6609495", "trace_id": "ed9c09ca-3176-4d24-ae9c-ff054f60ed56", "request_id": "9dcdfe4e-e9bc-4f1d-87d9-2e7eb6609495", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.040194Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_566d693dacc44704/end, remaining=99", "trace_id": "ed9c09ca-3176-4d24-ae9c-ff054f60ed56", "request_id": "9dcdfe4e-e9bc-4f1d-87d9-2e7eb6609495", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.040605Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_566d693dacc44704/end, status=200, duration_ms=0.57, trace_id=ed9c09ca-3176-4d24-ae9c-ff054f60ed56", "trace_id": "ed9c09ca-3176-4d24-ae9c-ff054f60ed56", "request_id": "9dcdfe4e-e9bc-4f1d-87d9-2e7eb6609495", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.042235Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_ecdddea753724b5d/messages, trace_id=592dc84a-2d01-474d-af1c-2ab9c7bc66cf, request_id=f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "trace_id": "592dc84a-2d01-474d-af1c-2ab9c7bc66cf", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.042327Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_ecdddea753724b5d/messages, remaining=99", "trace_id": "592dc84a-2d01-474d-af1c-2ab9c7bc66cf", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.691662Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "34754783-d1be-4089-9a46-4a6db915839c", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "653748381cae0214", "execution_time_ms": 648.9739418029785, "row_count": 11, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T11:15:22.691935Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=11, total_time=649.39ms", "trace_id": "34754783-d1be-4089-9a46-4a6db915839c", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:15:22.692194Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_ecdddea753724b5d/messages, status=200, duration_ms=650.03, trace_id=592dc84a-2d01-474d-af1c-2ab9c7bc66cf", "trace_id": "592dc84a-2d01-474d-af1c-2ab9c7bc66cf", "request_id": "f2c1b7b0-7f25-48b9-b2bb-39c3550af86e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:16:23.068862Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_ecdddea753724b5d/end, trace_id=acab8b1a-6be9-4d44-bcb4-d785fb3e1d20, request_id=14beca18-be48-49df-956f-e421ff792e50", "trace_id": "acab8b1a-6be9-4d44-bcb4-d785fb3e1d20", "request_id": "14beca18-be48-49df-956f-e421ff792e50", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:16:23.069192Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_ecdddea753724b5d/end, remaining=99", "trace_id": "acab8b1a-6be9-4d44-bcb4-d785fb3e1d20", "request_id": "14beca18-be48-49df-956f-e421ff792e50", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:16:23.069655Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_ecdddea753724b5d/end, status=200, duration_ms=0.88, trace_id=acab8b1a-6be9-4d44-bcb4-d785fb3e1d20", "trace_id": "acab8b1a-6be9-4d44-bcb4-d785fb3e1d20", "request_id": "14beca18-be48-49df-956f-e421ff792e50", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:44.480959Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/auth/login, trace_id=2edea2e4-9e11-4803-87ad-fe410eaee4a1, request_id=233d1eca-55a9-4f24-ac0d-3269ad13861b", "trace_id": "2edea2e4-9e11-4803-87ad-fe410eaee4a1", "request_id": "233d1eca-55a9-4f24-ac0d-3269ad13861b", "user_id_hash": null}
{"timestamp": "2026-01-12T11:19:44.481215Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/auth/login, remaining=4", "trace_id": "2edea2e4-9e11-4803-87ad-fe410eaee4a1", "request_id": "233d1eca-55a9-4f24-ac0d-3269ad13861b", "user_id_hash": null}
{"timestamp": "2026-01-12T11:19:45.118085Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=46faa92a-addb-4e30-a5ec-ea73be9a9c5c", "trace_id": "46faa92a-addb-4e30-a5ec-ea73be9a9c5c", "request_id": "5aad5246-7aae-43ff-a7af-6b981911db46", "user_id_hash": null}
{"timestamp": "2026-01-12T11:19:45.118340Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=637.56, trace_id=2edea2e4-9e11-4803-87ad-fe410eaee4a1", "trace_id": "2edea2e4-9e11-4803-87ad-fe410eaee4a1", "request_id": "233d1eca-55a9-4f24-ac0d-3269ad13861b", "user_id_hash": null}
{"timestamp": "2026-01-12T11:19:45.120319Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=8f68b0fd-dec1-4fde-ae53-bdcd0de68533, request_id=d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "trace_id": "8f68b0fd-dec1-4fde-ae53-bdcd0de68533", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:45.120392Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "8f68b0fd-dec1-4fde-ae53-bdcd0de68533", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:45.647309Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "fa7b1ceb-fbdf-4544-bef0-df3c082c83c4", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 526.5028476715088, "row_count": 21, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:19:45.647720Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=21, total_time=527.08ms", "trace_id": "fa7b1ceb-fbdf-4544-bef0-df3c082c83c4", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:45.647810Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=21", "trace_id": "fa7b1ceb-fbdf-4544-bef0-df3c082c83c4", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:19:45.648179Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=527.90, trace_id=8f68b0fd-dec1-4fde-ae53-bdcd0de68533", "trace_id": "8f68b0fd-dec1-4fde-ae53-bdcd0de68533", "request_id": "d88c5f62-e339-4e9f-b7ab-0b04b11ad959", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:22:26.709193Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.234564Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.253860Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.255493Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.255549Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.255594Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.259109Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.265063Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:27.289055Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.098074Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.428670Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.446124Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.447728Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.447783Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.447828Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.450707Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.455895Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:28.471147Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:30.897335Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.220232Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.237810Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.239447Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.239501Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.239542Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.242125Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.247314Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:22:31.263641Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.305253Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.778480Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.797309Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.798831Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.798899Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.798948Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.801983Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.807893Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:48.831179Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.549331Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.874408Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.891845Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.893445Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.893501Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.893542Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.896132Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.901636Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:40:50.916705Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:44:42.714932Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_4c7727e6b3e344c1/messages, trace_id=f381e3cf-6e8b-4bef-911c-540283088c6f, request_id=2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "trace_id": "f381e3cf-6e8b-4bef-911c-540283088c6f", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:44:42.715271Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_4c7727e6b3e344c1/messages, remaining=99", "trace_id": "f381e3cf-6e8b-4bef-911c-540283088c6f", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:44:43.293759Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "b62d39a0-c3fd-46eb-8cd9-2db4dddecb7b", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "ae37f2793eda729b", "execution_time_ms": 577.5411128997803, "row_count": 3, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T11:44:43.294139Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=3, total_time=578.42ms", "trace_id": "b62d39a0-c3fd-46eb-8cd9-2db4dddecb7b", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:44:43.294452Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_4c7727e6b3e344c1/messages, status=200, duration_ms=579.74, trace_id=f381e3cf-6e8b-4bef-911c-540283088c6f", "trace_id": "f381e3cf-6e8b-4bef-911c-540283088c6f", "request_id": "2a4b481a-837c-4119-8eb5-4a79fc80e5c8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:53:56.977683Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:57.462643Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.056468Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.076560Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.078306Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.078364Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.078406Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.081687Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.087744Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:53:58.117112Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:03.777011Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.096600Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.114265Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.115896Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.115948Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.115991Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.118528Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.124028Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:04.139782Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.175651Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.496739Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.514835Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.516471Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.516523Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.516566Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.519437Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.525013Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:37.540589Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.494638Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.816807Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.835681Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.837393Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.837445Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.837486Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.840103Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.845881Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:54:52.863098Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:14.994818Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.321123Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.340033Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=200", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.341902Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.342001Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.342071Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.344761Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.349960Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:15.365486Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.387017Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.743524Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.763809Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=200", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.765519Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.765576Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.765620Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.768217Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.774233Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:27.790282Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.530239Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.851357Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.869577Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.871258Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.871311Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.871357Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.873945Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.879359Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:31.894539Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:35.512046Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_4c7727e6b3e344c1/end, trace_id=709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2, request_id=7c933d1f-535e-40a1-a2ea-5ceb67f9fe80", "trace_id": "709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2", "request_id": "7c933d1f-535e-40a1-a2ea-5ceb67f9fe80", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:35.512205Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_4c7727e6b3e344c1/end, remaining=99", "trace_id": "709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2", "request_id": "7c933d1f-535e-40a1-a2ea-5ceb67f9fe80", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:35.512724Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_4c7727e6b3e344c1/end, status=200, duration_ms=0.82, trace_id=709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2", "trace_id": "709f9e81-ded3-4db3-82d3-fa6b1f9cc3d2", "request_id": "7c933d1f-535e-40a1-a2ea-5ceb67f9fe80", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:35.514670Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=786baa2e-2310-4062-9c07-18f305d0d917, request_id=a8d81cab-1f89-4ef0-80f1-1464e759df32", "trace_id": "786baa2e-2310-4062-9c07-18f305d0d917", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:35.514744Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "786baa2e-2310-4062-9c07-18f305d0d917", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:36.088565Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "366dcbf2-4561-4f27-ba76-6fa7e614d3e8", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 573.0860233306885, "row_count": 21, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:55:36.088892Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=21, total_time=573.87ms", "trace_id": "366dcbf2-4561-4f27-ba76-6fa7e614d3e8", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:36.088941Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=21", "trace_id": "366dcbf2-4561-4f27-ba76-6fa7e614d3e8", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:36.089335Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=574.63, trace_id=786baa2e-2310-4062-9c07-18f305d0d917", "trace_id": "786baa2e-2310-4062-9c07-18f305d0d917", "request_id": "a8d81cab-1f89-4ef0-80f1-1464e759df32", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:46.792534Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=fc0735ad-c49a-4fce-ae54-280481dd6262, request_id=9b6f1a46-3552-4b8c-9444-1b115c338464", "trace_id": "fc0735ad-c49a-4fce-ae54-280481dd6262", "request_id": "9b6f1a46-3552-4b8c-9444-1b115c338464", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:46.792640Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "fc0735ad-c49a-4fce-ae54-280481dd6262", "request_id": "9b6f1a46-3552-4b8c-9444-1b115c338464", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.485561Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "315873be9d602855", "execution_time_ms": 692.2080516815186, "row_count": 1, "query_preview": "\n        INSERT INTO chats (chat_id, user_id, topic, total_tokens, is_active, created_at, updated_at"}}
{"timestamp": "2026-01-12T11:55:47.485915Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=692.78ms", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.485973Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "create_new_chat", "line": 76, "message": "chat_created_db - chat_id=chat_3ca399e0033f469a", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.486020Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 196, "message": "chat_created - chat_id=chat_3ca399e0033f469a", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.486087Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_3ca399e0033f469a", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.486848Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_3ca399e0033f469a", "trace_id": "f76d87c3-abc4-4f42-8619-d422bfc3f7ef", "request_id": "362548fe-e942-456f-a4ee-faf2865c452e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.555450Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:47.557116Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=3", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.261851Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 885, "output_tokens": 148, "total_tokens": 1033, "latency_ms": 774.2300033569336}}
{"timestamp": "2026-01-12T11:55:48.262013Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=885, cumulative_total=885, unsaved_count=1", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.262071Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=148, cumulative_total=1033, unsaved_count=2", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.262126Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=885, output_tokens=148, turn_total=1033, cumulative_total=1033, latency_ms=774.23", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.262466Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.263632Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=8ec48f770d7434cf", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.831428Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "8ec48f770d7434cf", "execution_time_ms": 567.5668716430664, "row_count": 5, "query_preview": "SELECT * FROM invoices"}}
{"timestamp": "2026-01-12T11:55:48.831746Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=568.05ms", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:48.832742Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=8ec48f770d7434cf, error=Object of type date is not JSON serializable, duration_ms=568.26", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type date is not JSON serializable"}
{"timestamp": "2026-01-12T11:55:48.835583Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.781802Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 970, "output_tokens": 219, "total_tokens": 1189, "latency_ms": 947.7570056915283}}
{"timestamp": "2026-01-12T11:55:49.781886Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=970, cumulative_total=2003, unsaved_count=3", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.781928Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=219, cumulative_total=2222, unsaved_count=4", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.781970Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=970, output_tokens=219, turn_total=1189, cumulative_total=2222, latency_ms=947.76", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.782160Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:49.783008Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=a45939829c1a3766", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:50.250170Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a45939829c1a3766", "execution_time_ms": 466.95566177368164, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text as invoice_date, payment_terms, due_d"}}
{"timestamp": "2026-01-12T11:55:50.250465Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=467.36ms", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:50.250726Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=a45939829c1a3766, error=Object of type UUID is not JSON serializable, duration_ms=467.58", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T11:55:50.253419Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.009501Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1062, "output_tokens": 194, "total_tokens": 1256, "latency_ms": 757.6870918273926}}
{"timestamp": "2026-01-12T11:55:51.009585Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=1062, cumulative_total=3284, unsaved_count=5", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.009625Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=194, cumulative_total=3478, unsaved_count=6", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.009663Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=1062, output_tokens=194, turn_total=1256, cumulative_total=3478, latency_ms=757.69", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.009905Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.010853Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=4b9adde55169f2d9", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.584088Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "4b9adde55169f2d9", "execution_time_ms": 573.0471611022949, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text as invoice_date, payment_terms, due_d"}}
{"timestamp": "2026-01-12T11:55:51.584328Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=573.42ms", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.584460Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 141, "message": "context_offload_stored - session_id=session_6524c2c99c0b, rows=5, chunks=5, chunk_size=100", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.584509Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=4b9adde55169f2d9, rows=5, chunks=5, duration_ms=573.54, offload=yes", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:51.587206Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.284017Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1360, "output_tokens": 78, "total_tokens": 1438, "latency_ms": 698.7242698669434}}
{"timestamp": "2026-01-12T11:55:52.284171Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=1360, cumulative_total=4838, unsaved_count=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.284262Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=78, cumulative_total=4916, unsaved_count=8", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.284342Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=1360, output_tokens=78, turn_total=1438, cumulative_total=4916, latency_ms=698.72", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.284712Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.288429Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_6524c2c99c0b, chunks=[0]", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.288623Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_6524c2c99c0b, chunks_requested=[0], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.288755Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_6524c2c99c0b, chunks=[0], rows=1, duration_ms=0.35", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.292292Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.818823Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1820, "output_tokens": 133, "total_tokens": 1953, "latency_ms": 528.8629531860352}}
{"timestamp": "2026-01-12T11:55:52.818908Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=1820, cumulative_total=6736, unsaved_count=9", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.818951Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=133, cumulative_total=6869, unsaved_count=10", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.818993Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=1820, output_tokens=133, turn_total=1953, cumulative_total=6869, latency_ms=528.86", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.819197Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.822281Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_6524c2c99c0b, chunks=[1, 2, 3, 4]", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.822409Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_6524c2c99c0b, chunks_requested=[1, 2, 3, 4], rows=4, progress=100.0%, retrieved=5/5", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.822492Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_6524c2c99c0b, chunks=[1, 2, 3, 4], rows=4, duration_ms=0.24", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:52.824774Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_3ca399e0033f469a, input_messages=7", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.207031Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2924, "output_tokens": 913, "total_tokens": 3837, "latency_ms": 2383.6259841918945}}
{"timestamp": "2026-01-12T11:55:55.207129Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=user, tokens=2924, cumulative_total=9793, unsaved_count=11", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.207177Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_3ca399e0033f469a, role=assistant, tokens=913, cumulative_total=10706, unsaved_count=12", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.207221Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_3ca399e0033f469a, input_tokens=2924, output_tokens=913, turn_total=3837, cumulative_total=10706, latency_ms=2383.63", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.208869Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_3ca399e0033f469a, cumulative_total=10706, cumulative_input=9021, cumulative_output=1685, turns=12", "trace_id": "4ada25a2-240e-4c17-8da9-f817bd22da6b", "request_id": "0dc0abec-fa5a-4e7b-ae5e-ba39389a518b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.211577Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=8419.09, trace_id=fc0735ad-c49a-4fce-ae54-280481dd6262", "trace_id": "fc0735ad-c49a-4fce-ae54-280481dd6262", "request_id": "9b6f1a46-3552-4b8c-9444-1b115c338464", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.214494Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=3948589e-dcca-4115-acaf-e5020083fc86, request_id=2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "trace_id": "3948589e-dcca-4115-acaf-e5020083fc86", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.214599Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "3948589e-dcca-4115-acaf-e5020083fc86", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.688405Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "4e5e31055afa414a", "execution_time_ms": 476.4223098754883, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T11:55:55.688694Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=476.81ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:55.761870Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "0e96309c-4234-411d-976b-18def2ce27aa", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 546.6229915618896, "row_count": 22, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:55:55.762085Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=22, total_time=547.20ms", "trace_id": "0e96309c-4234-411d-976b-18def2ce27aa", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.762137Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=22", "trace_id": "0e96309c-4234-411d-976b-18def2ce27aa", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:55.762425Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=547.94, trace_id=3948589e-dcca-4115-acaf-e5020083fc86", "trace_id": "3948589e-dcca-4115-acaf-e5020083fc86", "request_id": "2ea9de9f-9f3e-4cf9-bdf6-a0347b3bf32b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:55:56.159826Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "911a6bb07eeaa656", "execution_time_ms": 470.9198474884033, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 10706, updated_at = NOW()\n            WHERE"}}
{"timestamp": "2026-01-12T11:55:56.160138Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=471.37ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:55:56.160184Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_3ca399e0033f469a, messages_saved=12, cumulative_tokens=10706", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:37.682223Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.015945Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.034290Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.036010Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.036111Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.036168Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.038769Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.044106Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:38.060179Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.213802Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.541414Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.561390Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.563084Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.563136Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.563181Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.565803Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.571210Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:43.586872Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:47.730591Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.049082Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.067003Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.068595Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.068645Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.068686Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.071275Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.076560Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:48.092794Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:57:53.719492Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_3ca399e0033f469a/end, trace_id=6deca207-c18b-4df5-9006-e48f9720d56b, request_id=c6a3dc9e-e946-4098-9cab-3c49c287a6b3", "trace_id": "6deca207-c18b-4df5-9006-e48f9720d56b", "request_id": "c6a3dc9e-e946-4098-9cab-3c49c287a6b3", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:53.719607Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_3ca399e0033f469a/end, remaining=99", "trace_id": "6deca207-c18b-4df5-9006-e48f9720d56b", "request_id": "c6a3dc9e-e946-4098-9cab-3c49c287a6b3", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:53.720232Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_3ca399e0033f469a/end, status=200, duration_ms=0.82, trace_id=6deca207-c18b-4df5-9006-e48f9720d56b", "trace_id": "6deca207-c18b-4df5-9006-e48f9720d56b", "request_id": "c6a3dc9e-e946-4098-9cab-3c49c287a6b3", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:53.722077Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=c2e851d7-2ab5-44ed-87a3-27608ec745c3, request_id=fd23520e-850a-4c41-9c4c-40ac785cddce", "trace_id": "c2e851d7-2ab5-44ed-87a3-27608ec745c3", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:53.722150Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "c2e851d7-2ab5-44ed-87a3-27608ec745c3", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:54.441017Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "522eb8a7-3e7f-44db-894d-75b5f8b4ee78", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 718.1529998779297, "row_count": 22, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:57:54.441735Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=22, total_time=719.22ms", "trace_id": "522eb8a7-3e7f-44db-894d-75b5f8b4ee78", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:54.441841Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=22", "trace_id": "522eb8a7-3e7f-44db-894d-75b5f8b4ee78", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:57:54.442464Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=720.32, trace_id=c2e851d7-2ab5-44ed-87a3-27608ec745c3", "trace_id": "c2e851d7-2ab5-44ed-87a3-27608ec745c3", "request_id": "fd23520e-850a-4c41-9c4c-40ac785cddce", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.156957Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=177a5e76-48b8-4a48-8a61-8433c7f60e14, request_id=51711d10-4773-42ca-aebb-d43dc9497fbb", "trace_id": "177a5e76-48b8-4a48-8a61-8433c7f60e14", "request_id": "51711d10-4773-42ca-aebb-d43dc9497fbb", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.157115Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "177a5e76-48b8-4a48-8a61-8433c7f60e14", "request_id": "51711d10-4773-42ca-aebb-d43dc9497fbb", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.797417Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a44d1c7b68f7976f", "execution_time_ms": 639.6210193634033, "row_count": 1, "query_preview": "\n        INSERT INTO chats (chat_id, user_id, topic, total_tokens, is_active, created_at, updated_at"}}
{"timestamp": "2026-01-12T11:58:02.797822Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=640.14ms", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.797887Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "create_new_chat", "line": 76, "message": "chat_created_db - chat_id=chat_b1d05aca94c94f8c", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.797927Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 196, "message": "chat_created - chat_id=chat_b1d05aca94c94f8c", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.797983Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_b1d05aca94c94f8c", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.798738Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_b1d05aca94c94f8c", "trace_id": "33a6c42e-0805-49bc-9ae4-11c1b65a21bf", "request_id": "541e1ade-6d3f-4b74-94af-4507ef36a8b8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.862767Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:02.864443Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=3", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.342738Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 885, "output_tokens": 149, "total_tokens": 1034, "latency_ms": 1543.2376861572266}}
{"timestamp": "2026-01-12T11:58:04.342855Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=885, cumulative_total=885, unsaved_count=1", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.342905Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=149, cumulative_total=1034, unsaved_count=2", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.342960Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=885, output_tokens=149, turn_total=1034, cumulative_total=1034, latency_ms=1543.24", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.343247Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.344457Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=45b4e2382f2bf29f", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.952770Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "45b4e2382f2bf29f", "execution_time_ms": 608.0639362335205, "row_count": 5, "query_preview": "SELECT * FROM invoices ORDER BY invoice_date"}}
{"timestamp": "2026-01-12T11:58:04.953095Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=608.53ms", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:04.954051Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=45b4e2382f2bf29f, error=Object of type date is not JSON serializable, duration_ms=608.79", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type date is not JSON serializable"}
{"timestamp": "2026-01-12T11:58:04.957037Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.974750Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 978, "output_tokens": 281, "total_tokens": 1259, "latency_ms": 1019.395112991333}}
{"timestamp": "2026-01-12T11:58:05.974842Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=978, cumulative_total=2012, unsaved_count=3", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.974892Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=281, cumulative_total=2293, unsaved_count=4", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.974946Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=978, output_tokens=281, turn_total=1259, cumulative_total=2293, latency_ms=1019.40", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.975201Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:05.976071Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=fd20b3cf47dc4207", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:06.465191Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "fd20b3cf47dc4207", "execution_time_ms": 488.9211654663086, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, to_char(invoice_date, 'YYYY-MM-DD') AS invoice_date, pay"}}
{"timestamp": "2026-01-12T11:58:06.465541Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=489.40ms", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:06.465772Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=fd20b3cf47dc4207, error=Object of type UUID is not JSON serializable, duration_ms=489.55", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T11:58:06.468448Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.817431Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1119, "output_tokens": 245, "total_tokens": 1364, "latency_ms": 1350.60715675354}}
{"timestamp": "2026-01-12T11:58:07.817510Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1119, cumulative_total=3412, unsaved_count=5", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.817548Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=245, cumulative_total=3657, unsaved_count=6", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.817590Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1119, output_tokens=245, turn_total=1364, cumulative_total=3657, latency_ms=1350.61", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.817820Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:07.818797Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=a36b0d89f6d3d35f", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:08.290572Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a36b0d89f6d3d35f", "execution_time_ms": 471.57907485961914, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, to_char(invoice_date, 'YYYY-MM-DD') AS invoice_date, pay"}}
{"timestamp": "2026-01-12T11:58:08.290911Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=472.02ms", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:08.291092Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 141, "message": "context_offload_stored - session_id=session_0696bfb953bb, rows=5, chunks=5, chunk_size=100", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:08.291146Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=a36b0d89f6d3d35f, rows=5, chunks=5, duration_ms=472.19, offload=yes", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:08.293849Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.937344Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1464, "output_tokens": 66, "total_tokens": 1530, "latency_ms": 4645.501136779785}}
{"timestamp": "2026-01-12T11:58:12.937424Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1464, cumulative_total=5121, unsaved_count=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.937466Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=66, cumulative_total=5187, unsaved_count=8", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.937508Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1464, output_tokens=66, turn_total=1530, cumulative_total=5187, latency_ms=4645.50", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.937697Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.939400Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_0696bfb953bb, chunks=[0]", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.939486Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_0696bfb953bb, chunks_requested=[0], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.939547Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_0696bfb953bb, chunks=[0], rows=1, duration_ms=0.15", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:12.941731Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.064820Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1888, "output_tokens": 404, "total_tokens": 2292, "latency_ms": 1124.5088577270508}}
{"timestamp": "2026-01-12T11:58:14.065068Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1888, cumulative_total=7075, unsaved_count=9", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.065209Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=404, cumulative_total=7479, unsaved_count=10", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.065327Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1888, output_tokens=404, turn_total=2292, cumulative_total=7479, latency_ms=1124.51", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.067875Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_b1d05aca94c94f8c, cumulative_total=7479, cumulative_input=6334, cumulative_output=1145, turns=10", "trace_id": "345cbe68-6386-4f5e-acf7-75cfd6bf1241", "request_id": "3e72ee14-7d20-47ca-b7d7-8b3032cf3d9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.071819Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=11914.83, trace_id=177a5e76-48b8-4a48-8a61-8433c7f60e14", "trace_id": "177a5e76-48b8-4a48-8a61-8433c7f60e14", "request_id": "51711d10-4773-42ca-aebb-d43dc9497fbb", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.074968Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=f0092190-b67e-43be-9c74-3924ed325765, request_id=01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "trace_id": "f0092190-b67e-43be-9c74-3924ed325765", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.075039Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "f0092190-b67e-43be-9c74-3924ed325765", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.542267Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "38f4889f-edf1-42bb-889f-8140a60782df", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 466.5510654449463, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T11:58:14.542835Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=467.49ms", "trace_id": "38f4889f-edf1-42bb-889f-8140a60782df", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.542935Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "38f4889f-edf1-42bb-889f-8140a60782df", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.543505Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=468.47, trace_id=f0092190-b67e-43be-9c74-3924ed325765", "trace_id": "f0092190-b67e-43be-9c74-3924ed325765", "request_id": "01cc0d6d-2ade-44e0-be3a-a62bf7952a47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T11:58:14.650648Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "8058b45202d733e2", "execution_time_ms": 578.2709121704102, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T11:58:14.650959Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=578.72ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:58:15.341723Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "8a8f36441d151db5", "execution_time_ms": 690.5310153961182, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 7479, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T11:58:15.342003Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=690.98ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T11:58:15.342050Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_b1d05aca94c94f8c, messages_saved=10, cumulative_tokens=7479", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:01:28.986097Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=03608518-fe7e-4af6-8281-a1697ef019a1, request_id=ef3da02a-ed9f-4509-837f-5aaad6368ea5", "trace_id": "03608518-fe7e-4af6-8281-a1697ef019a1", "request_id": "ef3da02a-ed9f-4509-837f-5aaad6368ea5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.986997Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "03608518-fe7e-4af6-8281-a1697ef019a1", "request_id": "ef3da02a-ed9f-4509-837f-5aaad6368ea5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.987782Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 109, "message": "chat_cache_hit - chat_id=chat_b1d05aca94c94f8c", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.987858Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_b1d05aca94c94f8c", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.988017Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_b1d05aca94c94f8c", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.990269Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "aget_tuple", "line": 120, "message": "adaptive_checkpoint_windowed - original=312, windowed=10, tokens=881", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.990884Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 45, "message": "input_validated - chat_id=chat_b1d05aca94c94f8c", "trace_id": "d0b345a8-0c7d-449b-8f21-c16813b9307c", "request_id": "839a160a-94b9-4ea1-b0fd-dc7bcd849b06", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:28.993920Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.981619Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1249, "output_tokens": 57, "total_tokens": 1306, "latency_ms": 1990.0548458099365}}
{"timestamp": "2026-01-12T12:01:30.981712Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1249, cumulative_total=8728, unsaved_count=1", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.981752Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=57, cumulative_total=8785, unsaved_count=2", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.981793Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1249, output_tokens=57, turn_total=1306, cumulative_total=8785, latency_ms=1990.05", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.982031Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:30.983287Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=45b4e2382f2bf29f", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:31.533388Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "45b4e2382f2bf29f", "execution_time_ms": 549.8530864715576, "row_count": 5, "query_preview": "SELECT * FROM invoices ORDER BY invoice_date"}}
{"timestamp": "2026-01-12T12:01:31.533688Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=550.30ms", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:31.534000Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=45b4e2382f2bf29f, error=Object of type date is not JSON serializable, duration_ms=550.53", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type date is not JSON serializable"}
{"timestamp": "2026-01-12T12:01:31.537427Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.029579Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1288, "output_tokens": 250, "total_tokens": 1538, "latency_ms": 1493.5753345489502}}
{"timestamp": "2026-01-12T12:01:33.029693Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1288, cumulative_total=10073, unsaved_count=3", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.029764Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=250, cumulative_total=10323, unsaved_count=4", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.029811Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1288, output_tokens=250, turn_total=1538, cumulative_total=10323, latency_ms=1493.58", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.030007Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.031536Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=9d8b059dbc6c8912", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.612668Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "9d8b059dbc6c8912", "execution_time_ms": 580.9340476989746, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text as invoice_date, payment_terms, due_d"}}
{"timestamp": "2026-01-12T12:01:33.612967Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=581.35ms", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:33.613255Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=9d8b059dbc6c8912, error=Object of type UUID is not JSON serializable, duration_ms=581.54", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 107, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 33, in _chunk_data\n    row_str = json.dumps(row)\n              ^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T12:01:33.617808Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.375600Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1400, "output_tokens": 203, "total_tokens": 1603, "latency_ms": 760.2221965789795}}
{"timestamp": "2026-01-12T12:01:34.375706Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1400, cumulative_total=11723, unsaved_count=5", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.375762Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=203, cumulative_total=11926, unsaved_count=6", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.375828Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1400, output_tokens=203, turn_total=1603, cumulative_total=11926, latency_ms=760.22", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.376058Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.378556Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=0609a982aa2889b7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.850567Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "0609a982aa2889b7", "execution_time_ms": 471.7979431152344, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date::text as invoice_date, payment_terms, due_d"}}
{"timestamp": "2026-01-12T12:01:34.850876Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=472.23ms", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.851008Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 141, "message": "context_offload_stored - session_id=session_7b1b59b20203, rows=5, chunks=5, chunk_size=100", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.851058Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=0609a982aa2889b7, rows=5, chunks=5, duration_ms=472.40, offload=yes", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:34.854060Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.944150Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1370, "output_tokens": 77, "total_tokens": 1447, "latency_ms": 3091.850996017456}}
{"timestamp": "2026-01-12T12:01:37.944240Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1370, cumulative_total=13296, unsaved_count=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.944279Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=77, cumulative_total=13373, unsaved_count=8", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.944318Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1370, output_tokens=77, turn_total=1447, cumulative_total=13373, latency_ms=3091.85", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.944549Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.953728Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_7b1b59b20203, chunks=[0]", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.953807Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_7b1b59b20203, chunks_requested=[0], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.953851Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_7b1b59b20203, chunks=[0], rows=1, duration_ms=0.14", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:37.956972Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.686544Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1806, "output_tokens": 120, "total_tokens": 1926, "latency_ms": 1730.828046798706}}
{"timestamp": "2026-01-12T12:01:39.686708Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1806, cumulative_total=15179, unsaved_count=9", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.686788Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=120, cumulative_total=15299, unsaved_count=10", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.686869Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1806, output_tokens=120, turn_total=1926, cumulative_total=15299, latency_ms=1730.83", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.687284Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 209, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.712856Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_7b1b59b20203, chunks=[1, 2, 3, 4]", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.712975Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 220, "message": "context_offload_retrieved - session_id=session_7b1b59b20203, chunks_requested=[1, 2, 3, 4], rows=4, progress=100.0%, retrieved=5/5", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.713022Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_7b1b59b20203, chunks=[1, 2, 3, 4], rows=4, duration_ms=0.22", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:39.719391Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.600959Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2922, "output_tokens": 779, "total_tokens": 3701, "latency_ms": 4883.671998977661}}
{"timestamp": "2026-01-12T12:01:44.601080Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=2922, cumulative_total=18221, unsaved_count=11", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.601130Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=779, cumulative_total=19000, unsaved_count=12", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.601173Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=2922, output_tokens=779, turn_total=3701, cumulative_total=19000, latency_ms=4883.67", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.610037Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_b1d05aca94c94f8c, cumulative_total=19000, cumulative_input=16369, cumulative_output=2631, turns=22", "trace_id": "72b550cf-0bd0-4ff7-883d-92192353700a", "request_id": "b4cc54c6-10af-43da-8c09-d706f3bb4660", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.626862Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=15641.07, trace_id=03608518-fe7e-4af6-8281-a1697ef019a1", "trace_id": "03608518-fe7e-4af6-8281-a1697ef019a1", "request_id": "ef3da02a-ed9f-4509-837f-5aaad6368ea5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.629795Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=0b51c4f0-ef42-4e6a-9c39-d1accbe25b98, request_id=3d83287e-2220-4766-80b6-1ed2bd4f16dd", "trace_id": "0b51c4f0-ef42-4e6a-9c39-d1accbe25b98", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:44.629876Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "0b51c4f0-ef42-4e6a-9c39-d1accbe25b98", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:45.088182Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "bc70b319dff1556d", "execution_time_ms": 460.82115173339844, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:01:45.088452Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "dc33c699-655e-429c-be48-c7ab208ec569", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 457.86333084106445, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:01:45.088607Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=461.36ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:01:45.088735Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=458.61ms", "trace_id": "dc33c699-655e-429c-be48-c7ab208ec569", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:45.088773Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "dc33c699-655e-429c-be48-c7ab208ec569", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:45.089122Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=459.37, trace_id=0b51c4f0-ef42-4e6a-9c39-d1accbe25b98", "trace_id": "0b51c4f0-ef42-4e6a-9c39-d1accbe25b98", "request_id": "3d83287e-2220-4766-80b6-1ed2bd4f16dd", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:01:45.581463Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "47e244b527354a49", "execution_time_ms": 492.42305755615234, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 19000, updated_at = NOW()\n            WHERE"}}
{"timestamp": "2026-01-12T12:01:45.581803Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=493.13ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:01:45.581867Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_b1d05aca94c94f8c, messages_saved=12, cumulative_tokens=19000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:28.706599Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:29.191760Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:29.209341Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:29.210930Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:29.211009Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:29.211054Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:29.214484Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:29.219981Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:29.246657Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.006519Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.318365Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.356421Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.358112Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.358171Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.358215Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.360590Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.365554Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:35.380930Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:54.347603Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/auth/login, trace_id=566084ae-28e4-41fc-8253-1c6948df30a0, request_id=0e48b976-e4c3-43ab-991b-fdc0937a1ede", "trace_id": "566084ae-28e4-41fc-8253-1c6948df30a0", "request_id": "0e48b976-e4c3-43ab-991b-fdc0937a1ede", "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:54.348035Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/auth/login, remaining=4", "trace_id": "566084ae-28e4-41fc-8253-1c6948df30a0", "request_id": "0e48b976-e4c3-43ab-991b-fdc0937a1ede", "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:55.511770Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=6ba844d7-57fa-4372-9cca-ac1eec7ae0d5", "trace_id": "6ba844d7-57fa-4372-9cca-ac1eec7ae0d5", "request_id": "e7d5a29b-66e0-4d5d-a1b6-569f5c7a39a6", "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:55.512155Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=1164.60, trace_id=566084ae-28e4-41fc-8253-1c6948df30a0", "trace_id": "566084ae-28e4-41fc-8253-1c6948df30a0", "request_id": "0e48b976-e4c3-43ab-991b-fdc0937a1ede", "user_id_hash": null}
{"timestamp": "2026-01-12T12:37:55.514309Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=b6b1a40b-cede-4e4d-a5e8-5f98d60a56e5, request_id=29cb6375-7b2b-4c43-8343-a668ad126617", "trace_id": "b6b1a40b-cede-4e4d-a5e8-5f98d60a56e5", "request_id": "29cb6375-7b2b-4c43-8343-a668ad126617", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:37:55.514409Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "b6b1a40b-cede-4e4d-a5e8-5f98d60a56e5", "request_id": "29cb6375-7b2b-4c43-8343-a668ad126617", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:37:56.145674Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "3b79596d-7fd1-4d86-9b1d-8e18112ae10f", "request_id": "29cb6375-7b2b-4c43-8343-a668ad126617", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 630.8531761169434, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:37:56.146057Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=631.35ms", "trace_id": "3b79596d-7fd1-4d86-9b1d-8e18112ae10f", "request_id": "29cb6375-7b2b-4c43-8343-a668ad126617", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:37:56.146125Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "3b79596d-7fd1-4d86-9b1d-8e18112ae10f", "request_id": "29cb6375-7b2b-4c43-8343-a668ad126617", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:37:56.146445Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=632.19, trace_id=b6b1a40b-cede-4e4d-a5e8-5f98d60a56e5", "trace_id": "b6b1a40b-cede-4e4d-a5e8-5f98d60a56e5", "request_id": "29cb6375-7b2b-4c43-8343-a668ad126617", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:37:56.148313Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=73e344de-0ad6-4b4a-8dc7-7ba43c4f851b, request_id=718461f4-43ba-4e98-95b0-eed55fbd7e6d", "trace_id": "73e344de-0ad6-4b4a-8dc7-7ba43c4f851b", "request_id": "718461f4-43ba-4e98-95b0-eed55fbd7e6d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:37:56.148397Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=99", "trace_id": "73e344de-0ad6-4b4a-8dc7-7ba43c4f851b", "request_id": "718461f4-43ba-4e98-95b0-eed55fbd7e6d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:37:56.148608Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.37, trace_id=73e344de-0ad6-4b4a-8dc7-7ba43c4f851b", "trace_id": "73e344de-0ad6-4b4a-8dc7-7ba43c4f851b", "request_id": "718461f4-43ba-4e98-95b0-eed55fbd7e6d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:13.958448Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_e7792cd60731462d/messages, trace_id=e2e9961a-0199-4d68-ba82-d628afab8814, request_id=c3128147-e1bf-4186-8c26-159754a484de", "trace_id": "e2e9961a-0199-4d68-ba82-d628afab8814", "request_id": "c3128147-e1bf-4186-8c26-159754a484de", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:13.958573Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_e7792cd60731462d/messages, remaining=99", "trace_id": "e2e9961a-0199-4d68-ba82-d628afab8814", "request_id": "c3128147-e1bf-4186-8c26-159754a484de", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:14.366253Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "a63c3963-a5b3-4a63-b15d-ed7be6044313", "request_id": "c3128147-e1bf-4186-8c26-159754a484de", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "20d1d1d4040cda15", "execution_time_ms": 407.0780277252197, "row_count": 8, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T12:38:14.366810Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=8, total_time=407.87ms", "trace_id": "a63c3963-a5b3-4a63-b15d-ed7be6044313", "request_id": "c3128147-e1bf-4186-8c26-159754a484de", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:14.367670Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_e7792cd60731462d/messages, status=200, duration_ms=409.00, trace_id=e2e9961a-0199-4d68-ba82-d628afab8814", "trace_id": "e2e9961a-0199-4d68-ba82-d628afab8814", "request_id": "c3128147-e1bf-4186-8c26-159754a484de", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:25.343828Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_e7792cd60731462d/end, trace_id=a365d4dd-53f4-491b-9be4-306754004533, request_id=21de8cf3-11c0-483f-95aa-4f8d8aa04754", "trace_id": "a365d4dd-53f4-491b-9be4-306754004533", "request_id": "21de8cf3-11c0-483f-95aa-4f8d8aa04754", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:25.343997Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_e7792cd60731462d/end, remaining=99", "trace_id": "a365d4dd-53f4-491b-9be4-306754004533", "request_id": "21de8cf3-11c0-483f-95aa-4f8d8aa04754", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:25.344384Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_e7792cd60731462d/end, status=200, duration_ms=0.68, trace_id=a365d4dd-53f4-491b-9be4-306754004533", "trace_id": "a365d4dd-53f4-491b-9be4-306754004533", "request_id": "21de8cf3-11c0-483f-95aa-4f8d8aa04754", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:25.345978Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_33304d436a264d3e/messages, trace_id=ac225c81-dfec-43f1-850e-6155905471ef, request_id=3339228c-10ef-4145-bcd9-7c5c2468b8ed", "trace_id": "ac225c81-dfec-43f1-850e-6155905471ef", "request_id": "3339228c-10ef-4145-bcd9-7c5c2468b8ed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:25.346067Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_33304d436a264d3e/messages, remaining=99", "trace_id": "ac225c81-dfec-43f1-850e-6155905471ef", "request_id": "3339228c-10ef-4145-bcd9-7c5c2468b8ed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:25.804659Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "f40ed1ef-c1f4-4558-aba9-3d95694756ad", "request_id": "3339228c-10ef-4145-bcd9-7c5c2468b8ed", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "68225ec04f7e78a6", "execution_time_ms": 458.2047462463379, "row_count": 4, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T12:38:25.805003Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=4, total_time=458.65ms", "trace_id": "f40ed1ef-c1f4-4558-aba9-3d95694756ad", "request_id": "3339228c-10ef-4145-bcd9-7c5c2468b8ed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:25.805278Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_33304d436a264d3e/messages, status=200, duration_ms=459.34, trace_id=ac225c81-dfec-43f1-850e-6155905471ef", "trace_id": "ac225c81-dfec-43f1-850e-6155905471ef", "request_id": "3339228c-10ef-4145-bcd9-7c5c2468b8ed", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:29.457845Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_33304d436a264d3e/end, trace_id=ff45d896-70a6-48a3-a1eb-0bc2bf2b2dad, request_id=0d72bc40-0c57-4cfa-b91d-94d921813391", "trace_id": "ff45d896-70a6-48a3-a1eb-0bc2bf2b2dad", "request_id": "0d72bc40-0c57-4cfa-b91d-94d921813391", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:29.458724Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_33304d436a264d3e/end, remaining=99", "trace_id": "ff45d896-70a6-48a3-a1eb-0bc2bf2b2dad", "request_id": "0d72bc40-0c57-4cfa-b91d-94d921813391", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:29.459185Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_33304d436a264d3e/end, status=200, duration_ms=1.40, trace_id=ff45d896-70a6-48a3-a1eb-0bc2bf2b2dad", "trace_id": "ff45d896-70a6-48a3-a1eb-0bc2bf2b2dad", "request_id": "0d72bc40-0c57-4cfa-b91d-94d921813391", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:29.461142Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_4de18712a8f04cca/messages, trace_id=9348cace-2cb0-4397-8d9d-2ce58aa89168, request_id=60b46492-126f-4105-ae71-00c09b9c29f1", "trace_id": "9348cace-2cb0-4397-8d9d-2ce58aa89168", "request_id": "60b46492-126f-4105-ae71-00c09b9c29f1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:29.461218Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_4de18712a8f04cca/messages, remaining=99", "trace_id": "9348cace-2cb0-4397-8d9d-2ce58aa89168", "request_id": "60b46492-126f-4105-ae71-00c09b9c29f1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:29.928156Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "a80911be-e382-4604-8581-d5974b1c9d6a", "request_id": "60b46492-126f-4105-ae71-00c09b9c29f1", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "91be9d69e5539d7c", "execution_time_ms": 466.54677391052246, "row_count": 3, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T12:38:29.928440Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=3, total_time=467.00ms", "trace_id": "a80911be-e382-4604-8581-d5974b1c9d6a", "request_id": "60b46492-126f-4105-ae71-00c09b9c29f1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:29.928690Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_4de18712a8f04cca/messages, status=200, duration_ms=467.59, trace_id=9348cace-2cb0-4397-8d9d-2ce58aa89168", "trace_id": "9348cace-2cb0-4397-8d9d-2ce58aa89168", "request_id": "60b46492-126f-4105-ae71-00c09b9c29f1", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:34.055499Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_4de18712a8f04cca/end, trace_id=dc8874ba-eba6-4cda-9039-55d85a43ac8e, request_id=454c2adf-6166-4251-b0ad-091fcb866c78", "trace_id": "dc8874ba-eba6-4cda-9039-55d85a43ac8e", "request_id": "454c2adf-6166-4251-b0ad-091fcb866c78", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:34.055611Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_4de18712a8f04cca/end, remaining=99", "trace_id": "dc8874ba-eba6-4cda-9039-55d85a43ac8e", "request_id": "454c2adf-6166-4251-b0ad-091fcb866c78", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:34.055983Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_4de18712a8f04cca/end, status=200, duration_ms=0.58, trace_id=dc8874ba-eba6-4cda-9039-55d85a43ac8e", "trace_id": "dc8874ba-eba6-4cda-9039-55d85a43ac8e", "request_id": "454c2adf-6166-4251-b0ad-091fcb866c78", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:34.057524Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_b1d05aca94c94f8c/messages, trace_id=325bc7ff-d8b3-4c2c-b528-f06d82b2af17, request_id=b4069667-b22f-4730-bb58-3971713f3319", "trace_id": "325bc7ff-d8b3-4c2c-b528-f06d82b2af17", "request_id": "b4069667-b22f-4730-bb58-3971713f3319", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:34.057605Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_b1d05aca94c94f8c/messages, remaining=99", "trace_id": "325bc7ff-d8b3-4c2c-b528-f06d82b2af17", "request_id": "b4069667-b22f-4730-bb58-3971713f3319", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:34.540138Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "0c49a8b1-1adc-49c7-87ba-4729eeb4c35a", "request_id": "b4069667-b22f-4730-bb58-3971713f3319", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "7b70139ea29dcb2b", "execution_time_ms": 482.1920394897461, "row_count": 22, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T12:38:34.540416Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=22, total_time=482.61ms", "trace_id": "0c49a8b1-1adc-49c7-87ba-4729eeb4c35a", "request_id": "b4069667-b22f-4730-bb58-3971713f3319", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:38:34.540691Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_b1d05aca94c94f8c/messages, status=200, duration_ms=483.20, trace_id=325bc7ff-d8b3-4c2c-b528-f06d82b2af17", "trace_id": "325bc7ff-d8b3-4c2c-b528-f06d82b2af17", "request_id": "b4069667-b22f-4730-bb58-3971713f3319", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:36.544700Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=c755009b-b6cf-4e5f-9e20-ed66a6e573b6, request_id=4b0b16eb-1236-466d-beca-a1cb9a95e9bf", "trace_id": "c755009b-b6cf-4e5f-9e20-ed66a6e573b6", "request_id": "4b0b16eb-1236-466d-beca-a1cb9a95e9bf", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:36.544997Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "c755009b-b6cf-4e5f-9e20-ed66a6e573b6", "request_id": "4b0b16eb-1236-466d-beca-a1cb9a95e9bf", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:37.099299Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "699bb6ee-0fa7-4208-affe-8d39378ca3e1", "request_id": "4b0b16eb-1236-466d-beca-a1cb9a95e9bf", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 553.8818836212158, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:39:37.099575Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=554.31ms", "trace_id": "699bb6ee-0fa7-4208-affe-8d39378ca3e1", "request_id": "4b0b16eb-1236-466d-beca-a1cb9a95e9bf", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:37.099627Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "699bb6ee-0fa7-4208-affe-8d39378ca3e1", "request_id": "4b0b16eb-1236-466d-beca-a1cb9a95e9bf", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:37.099937Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=555.30, trace_id=c755009b-b6cf-4e5f-9e20-ed66a6e573b6", "trace_id": "c755009b-b6cf-4e5f-9e20-ed66a6e573b6", "request_id": "4b0b16eb-1236-466d-beca-a1cb9a95e9bf", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:37.101755Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=43e81598-05ab-495c-b392-f384ce2f8681, request_id=1f8bb2ef-4ae8-4c82-b1a4-f332835bfd02", "trace_id": "43e81598-05ab-495c-b392-f384ce2f8681", "request_id": "1f8bb2ef-4ae8-4c82-b1a4-f332835bfd02", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:37.101831Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=99", "trace_id": "43e81598-05ab-495c-b392-f384ce2f8681", "request_id": "1f8bb2ef-4ae8-4c82-b1a4-f332835bfd02", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:37.102051Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.36, trace_id=43e81598-05ab-495c-b392-f384ce2f8681", "trace_id": "43e81598-05ab-495c-b392-f384ce2f8681", "request_id": "1f8bb2ef-4ae8-4c82-b1a4-f332835bfd02", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:40.652608Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=9804ffaf-c34c-4870-9b02-eefb4e278d6b, request_id=081e50da-a287-4f31-844b-502e785d4de7", "trace_id": "9804ffaf-c34c-4870-9b02-eefb4e278d6b", "request_id": "081e50da-a287-4f31-844b-502e785d4de7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:40.652721Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "9804ffaf-c34c-4870-9b02-eefb4e278d6b", "request_id": "081e50da-a287-4f31-844b-502e785d4de7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:40.653268Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 119, "message": "chat_cache_miss_loading - chat_id=chat_b1d05aca94c94f8c", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.153621Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a8b53dce54ac3c33", "execution_time_ms": 500.0629425048828, "row_count": 1, "query_preview": "\n        SELECT chat_id, topic, total_tokens, created_at\n        FROM chats\n        WHERE chat_id = "}}
{"timestamp": "2026-01-12T12:39:41.153972Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=500.59ms", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.647586Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "a0a91fb885190564", "execution_time_ms": 493.35193634033203, "row_count": 22, "query_preview": "\n        SELECT session_id, role, content, tokens, created_at\n        FROM messages\n        WHERE ch"}}
{"timestamp": "2026-01-12T12:39:41.647892Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=22, total_time=493.80ms", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.647992Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 174, "message": "chat_loaded - chat_id=chat_b1d05aca94c94f8c, messages=22, total_tokens=19000", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.648039Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_b1d05aca94c94f8c", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.648166Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_b1d05aca94c94f8c", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.649064Z", "level": "WARNING", "logger": "app_logger", "module": "chat_manager", "function": "check_token_limit", "line": 237, "message": "token_limit_exceeded - chat_id=chat_b1d05aca94c94f8c, cumulative=19000, limit=10240", "trace_id": "5f1f5b2e-7136-424e-86ed-e32d5ffd1519", "request_id": "0163d0fb-3f19-4d19-9fba-c20130ef8ad6", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.649116Z", "level": "WARNING", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 34, "message": "token_limit_reached - chat_id=chat_b1d05aca94c94f8c, cumulative_total=19000", "trace_id": "5f1f5b2e-7136-424e-86ed-e32d5ffd1519", "request_id": "0163d0fb-3f19-4d19-9fba-c20130ef8ad6", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.702431Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:41.704105Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 67, "message": "llm_invoke_start - chat_id=chat_b1d05aca94c94f8c, input_messages=7", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.490143Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1537, "output_tokens": 150, "total_tokens": 1687, "latency_ms": 1840.2900695800781}}
{"timestamp": "2026-01-12T12:39:43.490250Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=user, tokens=1537, cumulative_total=20537, unsaved_count=1", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.490290Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 223, "message": "message_cached - chat_id=chat_b1d05aca94c94f8c, role=assistant, tokens=150, cumulative_total=20687, unsaved_count=2", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.490334Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 155, "message": "llm_response_generated - chat_id=chat_b1d05aca94c94f8c, input_tokens=1537, output_tokens=150, turn_total=1687, cumulative_total=20687, latency_ms=1840.29", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.491397Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 192, "message": "conversation_turn_complete - chat_id=chat_b1d05aca94c94f8c, cumulative_total=20687, cumulative_input=17906, cumulative_output=2781, turns=24", "trace_id": "39071a15-9dfd-4d5b-88ae-903a9f093915", "request_id": "5d8daab3-f634-45f7-a0db-ff64aa83d16a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.492555Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=2840.02, trace_id=9804ffaf-c34c-4870-9b02-eefb4e278d6b", "trace_id": "9804ffaf-c34c-4870-9b02-eefb4e278d6b", "request_id": "081e50da-a287-4f31-844b-502e785d4de7", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.495467Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=699d0650-7a78-42b0-b8e7-5534f2a54beb, request_id=072373ab-81c8-4252-90a3-178e266ea945", "trace_id": "699d0650-7a78-42b0-b8e7-5534f2a54beb", "request_id": "072373ab-81c8-4252-90a3-178e266ea945", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.495559Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "699d0650-7a78-42b0-b8e7-5534f2a54beb", "request_id": "072373ab-81c8-4252-90a3-178e266ea945", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.968126Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "53a0bf1d-eb7e-495f-a3d6-f3718ed2b6e9", "request_id": "072373ab-81c8-4252-90a3-178e266ea945", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 472.06711769104004, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:39:43.968389Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=472.55ms", "trace_id": "53a0bf1d-eb7e-495f-a3d6-f3718ed2b6e9", "request_id": "072373ab-81c8-4252-90a3-178e266ea945", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.968431Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 361, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "53a0bf1d-eb7e-495f-a3d6-f3718ed2b6e9", "request_id": "072373ab-81c8-4252-90a3-178e266ea945", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.968663Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=473.26, trace_id=699d0650-7a78-42b0-b8e7-5534f2a54beb", "trace_id": "699d0650-7a78-42b0-b8e7-5534f2a54beb", "request_id": "072373ab-81c8-4252-90a3-178e266ea945", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.970333Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=ec233ac0-3f4d-4c4c-ac84-34534fecdc37, request_id=76f9e23c-aa4c-468d-9a96-af35adbcfe4e", "trace_id": "ec233ac0-3f4d-4c4c-ac84-34534fecdc37", "request_id": "76f9e23c-aa4c-468d-9a96-af35adbcfe4e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.970415Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=98", "trace_id": "ec233ac0-3f4d-4c4c-ac84-34534fecdc37", "request_id": "76f9e23c-aa4c-468d-9a96-af35adbcfe4e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.970616Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.36, trace_id=ec233ac0-3f4d-4c4c-ac84-34534fecdc37", "trace_id": "ec233ac0-3f4d-4c4c-ac84-34534fecdc37", "request_id": "76f9e23c-aa4c-468d-9a96-af35adbcfe4e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:39:43.980564Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "5f0fb13e0fec52aa", "execution_time_ms": 487.6689910888672, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:39:43.980839Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=488.04ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:44.445210Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "c6e36dabb3c42375", "execution_time_ms": 464.1740322113037, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 20687, updated_at = NOW()\n            WHERE"}}
{"timestamp": "2026-01-12T12:39:44.445554Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=464.61ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:44.445624Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 308, "message": "chat_saved - chat_id=chat_b1d05aca94c94f8c, messages_saved=2, cumulative_tokens=20687", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.168527Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.696286Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.715751Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.717348Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.717419Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.717472Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.720949Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.726530Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:39:57.751198Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:09.673658Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:10.006332Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:10.023247Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:10.024805Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:10.024863Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:10.024908Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:10.027430Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:10.032642Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:10.047551Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.098416Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.561405Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.580609Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.582219Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.582290Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.582337Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.585640Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.591161Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:40:44.613030Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:03.608901Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:04.058891Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:04.077925Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 24, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:04.079634Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:04.079705Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:04.079751Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:04.082979Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:04.088487Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:04.104906Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:12.897165Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:13.237963Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:13.258387Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:13.260254Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:13.260329Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:13.260401Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:13.263189Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:13.268596Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:13.284758Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.590213Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.929359Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.948285Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.949898Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.949952Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.949992Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.952650Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.957840Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:23.973580Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.361870Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.701461Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.718887Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.720471Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.720529Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.720572Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.723131Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.728480Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:32.743575Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:34.663552Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:34.992459Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:35.010723Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:35.012354Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:35.012408Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:35.012455Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:35.015031Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:35.020210Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:35.035201Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.429901Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.786257Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.803134Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.804716Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.804769Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.804811Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.807298Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.813182Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:41:44.828254Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:42:18.617909Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/auth/login, trace_id=fe0789a8-6d04-4c0c-b1ff-d05b05dd8064, request_id=7e4aa77a-cb19-4924-820e-7a2cf6bd12bb", "trace_id": "fe0789a8-6d04-4c0c-b1ff-d05b05dd8064", "request_id": "7e4aa77a-cb19-4924-820e-7a2cf6bd12bb", "user_id_hash": null}
{"timestamp": "2026-01-12T12:42:18.618181Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/auth/login, remaining=4", "trace_id": "fe0789a8-6d04-4c0c-b1ff-d05b05dd8064", "request_id": "7e4aa77a-cb19-4924-820e-7a2cf6bd12bb", "user_id_hash": null}
{"timestamp": "2026-01-12T12:42:19.355077Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=da5e85b2-3968-48c7-8315-a2dd62192343", "trace_id": "da5e85b2-3968-48c7-8315-a2dd62192343", "request_id": "bb779f71-eacc-4cb9-bd02-15f13cd52e04", "user_id_hash": null}
{"timestamp": "2026-01-12T12:42:19.355369Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=737.54, trace_id=fe0789a8-6d04-4c0c-b1ff-d05b05dd8064", "trace_id": "fe0789a8-6d04-4c0c-b1ff-d05b05dd8064", "request_id": "7e4aa77a-cb19-4924-820e-7a2cf6bd12bb", "user_id_hash": null}
{"timestamp": "2026-01-12T12:42:19.357365Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=98daf388-aca8-452f-a609-7bc18623997e, request_id=c9747ed5-5df9-4123-aff5-7334ea879f71", "trace_id": "98daf388-aca8-452f-a609-7bc18623997e", "request_id": "c9747ed5-5df9-4123-aff5-7334ea879f71", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:19.357458Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "98daf388-aca8-452f-a609-7bc18623997e", "request_id": "c9747ed5-5df9-4123-aff5-7334ea879f71", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:19.904049Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "e5d48495-3f18-4429-80b4-469094158bde", "request_id": "c9747ed5-5df9-4123-aff5-7334ea879f71", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 546.1158752441406, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:42:19.904506Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=546.75ms", "trace_id": "e5d48495-3f18-4429-80b4-469094158bde", "request_id": "c9747ed5-5df9-4123-aff5-7334ea879f71", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:19.904603Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "e5d48495-3f18-4429-80b4-469094158bde", "request_id": "c9747ed5-5df9-4123-aff5-7334ea879f71", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:19.905007Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=547.67, trace_id=98daf388-aca8-452f-a609-7bc18623997e", "trace_id": "98daf388-aca8-452f-a609-7bc18623997e", "request_id": "c9747ed5-5df9-4123-aff5-7334ea879f71", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:19.906765Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=cd92a9b1-7ffd-42bb-b6d1-1fb601122723, request_id=e6cc12e4-2ee5-441f-b69f-4ad84c30d84f", "trace_id": "cd92a9b1-7ffd-42bb-b6d1-1fb601122723", "request_id": "e6cc12e4-2ee5-441f-b69f-4ad84c30d84f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:19.906852Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=99", "trace_id": "cd92a9b1-7ffd-42bb-b6d1-1fb601122723", "request_id": "e6cc12e4-2ee5-441f-b69f-4ad84c30d84f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:19.907102Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.41, trace_id=cd92a9b1-7ffd-42bb-b6d1-1fb601122723", "trace_id": "cd92a9b1-7ffd-42bb-b6d1-1fb601122723", "request_id": "e6cc12e4-2ee5-441f-b69f-4ad84c30d84f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:26.856110Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_3ca399e0033f469a/messages, trace_id=ecaf182b-e722-4c78-ad67-89822d2accb3, request_id=77299ca5-4055-4e07-90e5-0265375ccd4a", "trace_id": "ecaf182b-e722-4c78-ad67-89822d2accb3", "request_id": "77299ca5-4055-4e07-90e5-0265375ccd4a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:26.856226Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_3ca399e0033f469a/messages, remaining=99", "trace_id": "ecaf182b-e722-4c78-ad67-89822d2accb3", "request_id": "77299ca5-4055-4e07-90e5-0265375ccd4a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:27.366901Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "634e2d84-eb34-4b90-b7d9-602082ab525f", "request_id": "77299ca5-4055-4e07-90e5-0265375ccd4a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "eb82be3450075022", "execution_time_ms": 509.462833404541, "row_count": 12, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T12:42:27.367236Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=12, total_time=510.71ms", "trace_id": "634e2d84-eb34-4b90-b7d9-602082ab525f", "request_id": "77299ca5-4055-4e07-90e5-0265375ccd4a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:42:27.367484Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_3ca399e0033f469a/messages, status=200, duration_ms=511.49, trace_id=ecaf182b-e722-4c78-ad67-89822d2accb3", "trace_id": "ecaf182b-e722-4c78-ad67-89822d2accb3", "request_id": "77299ca5-4055-4e07-90e5-0265375ccd4a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:44:15.372682Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:15.730028Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:15.750515Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:15.752410Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:15.752481Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:15.752525Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:15.755466Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:15.761690Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:15.777948Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:44:17.192125Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:20.614694Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:20.632151Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:20.633778Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:20.633831Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:20.633872Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:20.636420Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:20.641657Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:20.657088Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:45.211827Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:54.153928Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:54.171381Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:54.173857Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:54.173919Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:54.173960Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:54.176658Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:54.182045Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:54.198214Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.209062Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.536812Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.554221Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.555885Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.555941Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.555983Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.558669Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.564447Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:45:55.580255Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:00.960432Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_3ca399e0033f469a/end, trace_id=7d46ac11-5c33-41e7-bd93-a5dd15a37813, request_id=fa1e958f-fadc-4972-802d-f5197463156f", "trace_id": "7d46ac11-5c33-41e7-bd93-a5dd15a37813", "request_id": "fa1e958f-fadc-4972-802d-f5197463156f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:00.960606Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_3ca399e0033f469a/end, remaining=99", "trace_id": "7d46ac11-5c33-41e7-bd93-a5dd15a37813", "request_id": "fa1e958f-fadc-4972-802d-f5197463156f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:00.961021Z", "level": "WARNING", "logger": "app_logger", "module": "chat_manager", "function": "end_session", "line": 332, "message": "end_session_chat_not_found - chat_id=chat_3ca399e0033f469a", "trace_id": "cad7c785-eb09-4033-889b-7ad3b46fa5ba", "request_id": "fa1e958f-fadc-4972-802d-f5197463156f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:00.961269Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_3ca399e0033f469a/end, status=200, duration_ms=1.10, trace_id=7d46ac11-5c33-41e7-bd93-a5dd15a37813", "trace_id": "7d46ac11-5c33-41e7-bd93-a5dd15a37813", "request_id": "fa1e958f-fadc-4972-802d-f5197463156f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:00.963471Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=c53d00bd-e7be-47c4-a890-02e3692730f1, request_id=6790fd6a-70b2-4991-b24a-b6bd425fddff", "trace_id": "c53d00bd-e7be-47c4-a890-02e3692730f1", "request_id": "6790fd6a-70b2-4991-b24a-b6bd425fddff", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:00.963566Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "c53d00bd-e7be-47c4-a890-02e3692730f1", "request_id": "6790fd6a-70b2-4991-b24a-b6bd425fddff", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:01.489351Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "a0a60211-8a76-479c-be1a-fe8ab3d6e794", "request_id": "6790fd6a-70b2-4991-b24a-b6bd425fddff", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 525.1169204711914, "row_count": 23, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:46:01.489746Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=23, total_time=525.87ms", "trace_id": "a0a60211-8a76-479c-be1a-fe8ab3d6e794", "request_id": "6790fd6a-70b2-4991-b24a-b6bd425fddff", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:01.489805Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=23", "trace_id": "a0a60211-8a76-479c-be1a-fe8ab3d6e794", "request_id": "6790fd6a-70b2-4991-b24a-b6bd425fddff", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:01.490184Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=526.83, trace_id=c53d00bd-e7be-47c4-a890-02e3692730f1", "trace_id": "c53d00bd-e7be-47c4-a890-02e3692730f1", "request_id": "6790fd6a-70b2-4991-b24a-b6bd425fddff", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.007086Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=eae28b64-8fe6-447a-a634-45aabed0e310, request_id=268fd9e4-eaa2-4b48-b6cb-c35fcec87b47", "trace_id": "eae28b64-8fe6-447a-a634-45aabed0e310", "request_id": "268fd9e4-eaa2-4b48-b6cb-c35fcec87b47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.007198Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "eae28b64-8fe6-447a-a634-45aabed0e310", "request_id": "268fd9e4-eaa2-4b48-b6cb-c35fcec87b47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.502814Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "d8b080deba101583", "execution_time_ms": 494.9359893798828, "row_count": 1, "query_preview": "\n        INSERT INTO chats (chat_id, user_id, topic, total_tokens, is_active, created_at, updated_at"}}
{"timestamp": "2026-01-12T12:46:04.503138Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=495.39ms", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.503200Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "create_new_chat", "line": 76, "message": "chat_created_db - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.503250Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 196, "message": "chat_created - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.503335Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.504303Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 47, "message": "input_validated - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "539e6ebd-8757-49e5-b6e5-339fd9d39d9e", "request_id": "4a7d5229-f2ca-4743-901a-b81343797700", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.567954Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:04.569779Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=2", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.387333Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 959, "output_tokens": 56, "total_tokens": 1015, "latency_ms": 882.2600841522217}}
{"timestamp": "2026-01-12T12:46:05.387448Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=user, tokens=959, cumulative_total=959, unsaved_count=1", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.387492Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=56, cumulative_total=1015, unsaved_count=2", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.387542Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=959, output_tokens=56, turn_total=1015, cumulative_total=1015, latency_ms=882.26", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.388470Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 206, "message": "conversation_turn_complete - chat_id=chat_f21d7b5df35b4dc1, cumulative_total=1015, cumulative_input=959, cumulative_output=56, turns=2", "trace_id": "7b7d61af-9d31-486e-a8c8-25ffe9923f9b", "request_id": "13326cc0-f4b3-4624-bc5c-c1498c315d56", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.389085Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=1382.10, trace_id=eae28b64-8fe6-447a-a634-45aabed0e310", "trace_id": "eae28b64-8fe6-447a-a634-45aabed0e310", "request_id": "268fd9e4-eaa2-4b48-b6cb-c35fcec87b47", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.392118Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=c421bcbe-6de5-4219-b1dc-04b65e224543, request_id=f7b2cdfe-f244-4a81-90e9-6f08d9d9ead5", "trace_id": "c421bcbe-6de5-4219-b1dc-04b65e224543", "request_id": "f7b2cdfe-f244-4a81-90e9-6f08d9d9ead5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.392200Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "c421bcbe-6de5-4219-b1dc-04b65e224543", "request_id": "f7b2cdfe-f244-4a81-90e9-6f08d9d9ead5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.838908Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "3345f87e-25bd-427d-a9a9-f1c568d9ebb7", "request_id": "f7b2cdfe-f244-4a81-90e9-6f08d9d9ead5", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 446.2249279022217, "row_count": 24, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:46:05.839210Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=24, total_time=446.70ms", "trace_id": "3345f87e-25bd-427d-a9a9-f1c568d9ebb7", "request_id": "f7b2cdfe-f244-4a81-90e9-6f08d9d9ead5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.839276Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=24", "trace_id": "3345f87e-25bd-427d-a9a9-f1c568d9ebb7", "request_id": "f7b2cdfe-f244-4a81-90e9-6f08d9d9ead5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.839561Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=447.49, trace_id=c421bcbe-6de5-4219-b1dc-04b65e224543", "trace_id": "c421bcbe-6de5-4219-b1dc-04b65e224543", "request_id": "f7b2cdfe-f244-4a81-90e9-6f08d9d9ead5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.841230Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=8938b07a-1e2c-4f49-b95a-0b14c4cfb1ab, request_id=758d70b6-3f82-4978-8b73-bec19ee6f23b", "trace_id": "8938b07a-1e2c-4f49-b95a-0b14c4cfb1ab", "request_id": "758d70b6-3f82-4978-8b73-bec19ee6f23b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.841312Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=99", "trace_id": "8938b07a-1e2c-4f49-b95a-0b14c4cfb1ab", "request_id": "758d70b6-3f82-4978-8b73-bec19ee6f23b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.841569Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.38, trace_id=8938b07a-1e2c-4f49-b95a-0b14c4cfb1ab", "trace_id": "8938b07a-1e2c-4f49-b95a-0b14c4cfb1ab", "request_id": "758d70b6-3f82-4978-8b73-bec19ee6f23b", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:05.873862Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "f42c0a828cd0a890", "execution_time_ms": 484.3640327453613, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:46:05.874132Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=484.81ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:06.363776Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "2c8bd21f28a7a9f3", "execution_time_ms": 489.37296867370605, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 1015, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T12:46:06.364109Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=489.91ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:06.364173Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 310, "message": "chat_saved - chat_id=chat_f21d7b5df35b4dc1, messages_saved=2, cumulative_tokens=1015", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:13.846207Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=45abdfb1-9489-4f8b-a196-80e6ee8b4374, request_id=43bef3af-21e4-4260-91e5-fb77830b124c", "trace_id": "45abdfb1-9489-4f8b-a196-80e6ee8b4374", "request_id": "43bef3af-21e4-4260-91e5-fb77830b124c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:13.846359Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=18", "trace_id": "45abdfb1-9489-4f8b-a196-80e6ee8b4374", "request_id": "43bef3af-21e4-4260-91e5-fb77830b124c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:13.846951Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 110, "message": "chat_cache_hit - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:13.847002Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:13.847081Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:13.847370Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "aget_tuple", "line": 120, "message": "adaptive_checkpoint_windowed - original=6, windowed=6, tokens=58", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:13.847775Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 47, "message": "input_validated - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "676c4d18-7e6a-40e8-8f27-e841c6e0af08", "request_id": "fe749c8d-29ab-4e31-a51e-8bd6c7dca295", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:13.848100Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:14.416394Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1042, "output_tokens": 143, "total_tokens": 1185, "latency_ms": 568.2220458984375}}
{"timestamp": "2026-01-12T12:46:14.416477Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=user, tokens=1042, cumulative_total=2057, unsaved_count=1", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:14.416520Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=143, cumulative_total=2200, unsaved_count=2", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:14.416567Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1042, output_tokens=143, turn_total=1185, cumulative_total=2200, latency_ms=568.22", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:14.416753Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:14.417781Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=45b4e2382f2bf29f", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:14.885187Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "45b4e2382f2bf29f", "execution_time_ms": 467.1621322631836, "row_count": 5, "query_preview": "SELECT * FROM invoices ORDER BY invoice_date"}}
{"timestamp": "2026-01-12T12:46:14.885447Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=467.59ms", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:14.886591Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=45b4e2382f2bf29f, error=Object of type UUID is not JSON serializable, duration_ms=467.82", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 129, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 42, in _chunk_data\n    row_str = json.dumps(row, cls=DateTimeEncoder)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n          ^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 18, in default\n    return super().default(obj)\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T12:46:14.888048Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:15.539856Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1088, "output_tokens": 208, "total_tokens": 1296, "latency_ms": 651.7479419708252}}
{"timestamp": "2026-01-12T12:46:15.539959Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=208, cumulative_total=2408, unsaved_count=3", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:15.540018Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1088, output_tokens=208, turn_total=1296, cumulative_total=2408, latency_ms=651.75", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:15.540310Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:15.541184Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=f7d60b5a565d5a4a", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:16.034784Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "f7d60b5a565d5a4a", "execution_time_ms": 493.4120178222656, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date, payment_terms, due_date, po_number, item_d"}}
{"timestamp": "2026-01-12T12:46:16.035067Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=493.82ms", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:16.035254Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 163, "message": "context_offload_stored - session_id=session_cfe56b15c00c, rows=5, chunks=2, chunk_size=2000", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:16.035308Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=f7d60b5a565d5a4a, rows=5, chunks=2, duration_ms=493.95, offload=yes", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:16.035825Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.586990Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1361, "output_tokens": 51, "total_tokens": 1412, "latency_ms": 1551.1093139648438}}
{"timestamp": "2026-01-12T12:46:17.587071Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=51, cumulative_total=2459, unsaved_count=4", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.587117Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1361, output_tokens=51, turn_total=1412, cumulative_total=2459, latency_ms=1551.11", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.587314Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.588182Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_cfe56b15c00c, chunks=[0]", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.588243Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 242, "message": "context_offload_retrieved - session_id=session_cfe56b15c00c, chunks_requested=[0], rows=3, progress=50.0%, retrieved=1/2", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.588353Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_cfe56b15c00c, chunks=[0], rows=3, duration_ms=0.15", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.588848Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.967211Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2313, "output_tokens": 66, "total_tokens": 2379, "latency_ms": 378.3080577850342}}
{"timestamp": "2026-01-12T12:46:17.967291Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=66, cumulative_total=2525, unsaved_count=5", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.967336Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=2313, output_tokens=66, turn_total=2379, cumulative_total=2525, latency_ms=378.31", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.967537Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.968527Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_cfe56b15c00c, chunks=[1]", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.968598Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 242, "message": "context_offload_retrieved - session_id=session_cfe56b15c00c, chunks_requested=[1], rows=2, progress=100.0%, retrieved=2/2", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.968729Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_cfe56b15c00c, chunks=[1], rows=2, duration_ms=0.19", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:17.969277Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.557790Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2969, "output_tokens": 787, "total_tokens": 3756, "latency_ms": 2588.451147079468}}
{"timestamp": "2026-01-12T12:46:20.557874Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=787, cumulative_total=3312, unsaved_count=6", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.557917Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=2969, output_tokens=787, turn_total=3756, cumulative_total=3312, latency_ms=2588.45", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.558586Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 206, "message": "conversation_turn_complete - chat_id=chat_f21d7b5df35b4dc1, cumulative_total=3312, cumulative_input=2001, cumulative_output=1311, turns=8", "trace_id": "208b792b-7830-413a-b970-63e09fe3d6db", "request_id": "8628c5fa-f1b3-45c1-baeb-f7d20e54ae2d", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.559282Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=6713.20, trace_id=45abdfb1-9489-4f8b-a196-80e6ee8b4374", "trace_id": "45abdfb1-9489-4f8b-a196-80e6ee8b4374", "request_id": "43bef3af-21e4-4260-91e5-fb77830b124c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.562058Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=a745068f-836a-4a4c-b0ad-d9e00a717201, request_id=018c32bb-aa20-4a98-9eaa-f204c6e7fb9a", "trace_id": "a745068f-836a-4a4c-b0ad-d9e00a717201", "request_id": "018c32bb-aa20-4a98-9eaa-f204c6e7fb9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.562132Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=97", "trace_id": "a745068f-836a-4a4c-b0ad-d9e00a717201", "request_id": "018c32bb-aa20-4a98-9eaa-f204c6e7fb9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.947228Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "29dbcdb0-d9b2-4202-83e2-d3b0fa0d0b63", "request_id": "018c32bb-aa20-4a98-9eaa-f204c6e7fb9a", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 384.6752643585205, "row_count": 24, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:46:20.947513Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=24, total_time=385.16ms", "trace_id": "29dbcdb0-d9b2-4202-83e2-d3b0fa0d0b63", "request_id": "018c32bb-aa20-4a98-9eaa-f204c6e7fb9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.947566Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=24", "trace_id": "29dbcdb0-d9b2-4202-83e2-d3b0fa0d0b63", "request_id": "018c32bb-aa20-4a98-9eaa-f204c6e7fb9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.947848Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=385.83, trace_id=a745068f-836a-4a4c-b0ad-d9e00a717201", "trace_id": "a745068f-836a-4a4c-b0ad-d9e00a717201", "request_id": "018c32bb-aa20-4a98-9eaa-f204c6e7fb9a", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.949554Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=db73c4e4-b97e-4956-9f0f-f56509b3cd54, request_id=0224a61e-c15a-4040-98b9-6eb80fa87dd5", "trace_id": "db73c4e4-b97e-4956-9f0f-f56509b3cd54", "request_id": "0224a61e-c15a-4040-98b9-6eb80fa87dd5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.949632Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=98", "trace_id": "db73c4e4-b97e-4956-9f0f-f56509b3cd54", "request_id": "0224a61e-c15a-4040-98b9-6eb80fa87dd5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:20.949905Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.35, trace_id=db73c4e4-b97e-4956-9f0f-f56509b3cd54", "trace_id": "db73c4e4-b97e-4956-9f0f-f56509b3cd54", "request_id": "0224a61e-c15a-4040-98b9-6eb80fa87dd5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:21.045263Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "858262e62f8251db", "execution_time_ms": 485.49389839172363, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:46:21.045652Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=486.09ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:21.425442Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "fff9f67d3d37fed4", "execution_time_ms": 379.5609474182129, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 3312, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T12:46:21.425689Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=379.97ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:21.425731Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 310, "message": "chat_saved - chat_id=chat_f21d7b5df35b4dc1, messages_saved=6, cumulative_tokens=3312", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:27.367998Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat/chat_f21d7b5df35b4dc1/end, trace_id=db6c5fe2-8461-4b7b-b2c5-e1f03f6c796d, request_id=0b0ded2d-962b-4798-9dc8-622eceebf389", "trace_id": "db6c5fe2-8461-4b7b-b2c5-e1f03f6c796d", "request_id": "0b0ded2d-962b-4798-9dc8-622eceebf389", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:27.368144Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_f21d7b5df35b4dc1/end, remaining=99", "trace_id": "db6c5fe2-8461-4b7b-b2c5-e1f03f6c796d", "request_id": "0b0ded2d-962b-4798-9dc8-622eceebf389", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:27.734144Z", "level": "ERROR", "logger": "app_logger", "module": "client", "function": "_connect_and_exec", "line": 157, "message": "db_query_error - error=column \"user_id\" of relation \"chat_metrics\" does not exist\nLINE 5:             user_id,\n                    ^, time=364.1517162322998ms", "trace_id": "f4a7cb1f-a8eb-4b10-9ab9-441469dd3cf2", "request_id": "0b0ded2d-962b-4798-9dc8-622eceebf389", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/database/client.py\", line 116, in _connect_and_exec\n    cur.execute(query)\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/psycopg/cursor.py\", line 97, in execute\n    raise ex.with_traceback(None)\npsycopg.errors.UndefinedColumn: column \"user_id\" of relation \"chat_metrics\" does not exist\nLINE 5:             user_id,\n                    ^"}
{"timestamp": "2026-01-12T12:46:27.736169Z", "level": "ERROR", "logger": "app_logger", "module": "client", "function": "run_query", "line": 214, "message": "query_unexpected_error - error=500: Error executing query, time=366.38ms", "trace_id": "f4a7cb1f-a8eb-4b10-9ab9-441469dd3cf2", "request_id": "0b0ded2d-962b-4798-9dc8-622eceebf389", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/database/client.py\", line 116, in _connect_and_exec\n    cur.execute(query)\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/psycopg/cursor.py\", line 97, in execute\n    raise ex.with_traceback(None)\npsycopg.errors.UndefinedColumn: column \"user_id\" of relation \"chat_metrics\" does not exist\nLINE 5:             user_id,\n                    ^\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/database/client.py\", line 169, in run_query\n    result = await run_in_threadpool(_connect_and_exec, access_token)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/anyio/to_thread.py\", line 61, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 2525, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/database/client.py\", line 160, in _connect_and_exec\n    raise HTTPException(status_code=500, detail=\"Error executing query\")\nfastapi.exceptions.HTTPException: 500: Error executing query"}
{"timestamp": "2026-01-12T12:46:27.737829Z", "level": "ERROR", "logger": "app_logger", "module": "chat_manager", "function": "end_session", "line": 388, "message": "session_metrics_save_error - chat_id=chat_f21d7b5df35b4dc1, error=500: Unexpected error executing query", "trace_id": "f4a7cb1f-a8eb-4b10-9ab9-441469dd3cf2", "request_id": "0b0ded2d-962b-4798-9dc8-622eceebf389", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/database/client.py\", line 116, in _connect_and_exec\n    cur.execute(query)\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/psycopg/cursor.py\", line 97, in execute\n    raise ex.with_traceback(None)\npsycopg.errors.UndefinedColumn: column \"user_id\" of relation \"chat_metrics\" does not exist\nLINE 5:             user_id,\n                    ^\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/database/client.py\", line 169, in run_query\n    result = await run_in_threadpool(_connect_and_exec, access_token)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/starlette/concurrency.py\", line 32, in run_in_threadpool\n    return await anyio.to_thread.run_sync(func)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/anyio/to_thread.py\", line 61, in run_sync\n    return await get_async_backend().run_sync_in_worker_thread(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 2525, in run_sync_in_worker_thread\n    return await future\n           ^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent/venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    result = context.run(func, *args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/database/client.py\", line 160, in _connect_and_exec\n    raise HTTPException(status_code=500, detail=\"Error executing query\")\nfastapi.exceptions.HTTPException: 500: Error executing query\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/chat_manager.py\", line 381, in end_session\n    await run_query(metrics_query, access_token, refresh_token)\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/database/client.py\", line 216, in run_query\n    raise HTTPException(status_code=500, detail=\"Unexpected error executing query\")\nfastapi.exceptions.HTTPException: 500: Unexpected error executing query"}
{"timestamp": "2026-01-12T12:46:27.739006Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "end_session", "line": 391, "message": "session_ended - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "f4a7cb1f-a8eb-4b10-9ab9-441469dd3cf2", "request_id": "0b0ded2d-962b-4798-9dc8-622eceebf389", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:27.739253Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat/chat_f21d7b5df35b4dc1/end, status=200, duration_ms=371.32, trace_id=db6c5fe2-8461-4b7b-b2c5-e1f03f6c796d", "trace_id": "db6c5fe2-8461-4b7b-b2c5-e1f03f6c796d", "request_id": "0b0ded2d-962b-4798-9dc8-622eceebf389", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:34.502738Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/auth/login, trace_id=611cad15-c17c-40d3-b5d3-003cf1664567, request_id=adcdf1b6-4886-4d17-89b0-455963e7027d", "trace_id": "611cad15-c17c-40d3-b5d3-003cf1664567", "request_id": "adcdf1b6-4886-4d17-89b0-455963e7027d", "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:34.502926Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/auth/login, remaining=4", "trace_id": "611cad15-c17c-40d3-b5d3-003cf1664567", "request_id": "adcdf1b6-4886-4d17-89b0-455963e7027d", "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:35.918453Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "get_access_token", "line": 51, "message": "auth_success - email=vikram.dev@pwc.com, uid=752110e1-4280-4bab-a935-2013305ed39b, trace_id=b64c2652-7c1d-4c3c-8ec3-567d207537fe", "trace_id": "b64c2652-7c1d-4c3c-8ec3-567d207537fe", "request_id": "bb977919-c569-48a4-a4ef-f2bba48c6b77", "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:35.918796Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/auth/login, status=200, duration_ms=1416.07, trace_id=611cad15-c17c-40d3-b5d3-003cf1664567", "trace_id": "611cad15-c17c-40d3-b5d3-003cf1664567", "request_id": "adcdf1b6-4886-4d17-89b0-455963e7027d", "user_id_hash": null}
{"timestamp": "2026-01-12T12:46:35.920831Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=498ee290-dcae-47dd-bc02-6444a4e7e0ca, request_id=d56b615a-ca11-4e35-bbae-c9f0bd02d686", "trace_id": "498ee290-dcae-47dd-bc02-6444a4e7e0ca", "request_id": "d56b615a-ca11-4e35-bbae-c9f0bd02d686", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:35.920908Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=96", "trace_id": "498ee290-dcae-47dd-bc02-6444a4e7e0ca", "request_id": "d56b615a-ca11-4e35-bbae-c9f0bd02d686", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:36.340964Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "fab97319-67fc-4a0a-99bf-98d74159d2ef", "request_id": "d56b615a-ca11-4e35-bbae-c9f0bd02d686", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 419.65794563293457, "row_count": 24, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:46:36.341297Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=24, total_time=420.14ms", "trace_id": "fab97319-67fc-4a0a-99bf-98d74159d2ef", "request_id": "d56b615a-ca11-4e35-bbae-c9f0bd02d686", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:36.341359Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=24", "trace_id": "fab97319-67fc-4a0a-99bf-98d74159d2ef", "request_id": "d56b615a-ca11-4e35-bbae-c9f0bd02d686", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:36.341647Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=420.88, trace_id=498ee290-dcae-47dd-bc02-6444a4e7e0ca", "trace_id": "498ee290-dcae-47dd-bc02-6444a4e7e0ca", "request_id": "d56b615a-ca11-4e35-bbae-c9f0bd02d686", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:36.343561Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=68d360cd-36fa-4063-a339-d0d6c0f54188, request_id=960603dc-432c-4d71-9a83-897a6f9b7f75", "trace_id": "68d360cd-36fa-4063-a339-d0d6c0f54188", "request_id": "960603dc-432c-4d71-9a83-897a6f9b7f75", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:36.343628Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=97", "trace_id": "68d360cd-36fa-4063-a339-d0d6c0f54188", "request_id": "960603dc-432c-4d71-9a83-897a6f9b7f75", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:36.343910Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.39, trace_id=68d360cd-36fa-4063-a339-d0d6c0f54188", "trace_id": "68d360cd-36fa-4063-a339-d0d6c0f54188", "request_id": "960603dc-432c-4d71-9a83-897a6f9b7f75", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:37.527947Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/chat_f21d7b5df35b4dc1/messages, trace_id=cfeeb404-f060-4a25-ba84-aecb12c61f26, request_id=93bc51ea-078c-4dd7-afa8-a0ca76912ca6", "trace_id": "cfeeb404-f060-4a25-ba84-aecb12c61f26", "request_id": "93bc51ea-078c-4dd7-afa8-a0ca76912ca6", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:37.528077Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/chat_f21d7b5df35b4dc1/messages, remaining=99", "trace_id": "cfeeb404-f060-4a25-ba84-aecb12c61f26", "request_id": "93bc51ea-078c-4dd7-afa8-a0ca76912ca6", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:38.002261Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "63a1c833-eaeb-4fd1-8958-eb836331de81", "request_id": "93bc51ea-078c-4dd7-afa8-a0ca76912ca6", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "3c51dd3423420681", "execution_time_ms": 473.7699031829834, "row_count": 8, "query_preview": "\n        SELECT role, content, tokens, created_at\n        FROM messages\n        WHERE chat_id = 'cha"}}
{"timestamp": "2026-01-12T12:46:38.002565Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=8, total_time=474.21ms", "trace_id": "63a1c833-eaeb-4fd1-8958-eb836331de81", "request_id": "93bc51ea-078c-4dd7-afa8-a0ca76912ca6", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:46:38.002844Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/chat_f21d7b5df35b4dc1/messages, status=200, duration_ms=475.00, trace_id=cfeeb404-f060-4a25-ba84-aecb12c61f26", "trace_id": "cfeeb404-f060-4a25-ba84-aecb12c61f26", "request_id": "93bc51ea-078c-4dd7-afa8-a0ca76912ca6", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:47:05.999734Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:24.786724Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:24.804911Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:24.806537Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:24.806590Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:24.806632Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:24.809322Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:24.814813Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:24.831638Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:28.168691Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:29.726173Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:29.744196Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:29.745835Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:29.745890Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:29.745932Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:29.748867Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:29.754241Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:29.769393Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.376546Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.701715Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.719807Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=2000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.721486Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.721541Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.721584Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.724270Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.729467Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:47:30.745126Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:05.726177Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.215093Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.234980Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=1000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.236557Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.236610Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.236648Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.240040Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.246067Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.269673Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.674345Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:06.991726Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:07.010268Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:07.011900Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:07.011950Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:07.011992Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:07.014685Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:07.020169Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:07.036273Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:13.399933Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=32ab2c8c-4915-4547-9cf3-7d11788f6a3e, request_id=0b140ee8-b49b-489b-ae93-6ae386745d4f", "trace_id": "32ab2c8c-4915-4547-9cf3-7d11788f6a3e", "request_id": "0b140ee8-b49b-489b-ae93-6ae386745d4f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:13.400058Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "32ab2c8c-4915-4547-9cf3-7d11788f6a3e", "request_id": "0b140ee8-b49b-489b-ae93-6ae386745d4f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:13.400717Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 120, "message": "chat_cache_miss_loading - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:13.968003Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "9c5fdcfdbcc60e7d", "execution_time_ms": 566.9229030609131, "row_count": 1, "query_preview": "\n        SELECT chat_id, topic, total_tokens, created_at\n        FROM chats\n        WHERE chat_id = "}}
{"timestamp": "2026-01-12T12:49:13.968361Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=567.57ms", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:14.436846Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "c8fb1dba76097ed2", "execution_time_ms": 468.17588806152344, "row_count": 8, "query_preview": "\n        SELECT session_id, role, content, tokens, created_at\n        FROM messages\n        WHERE ch"}}
{"timestamp": "2026-01-12T12:49:14.437236Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=8, total_time=468.78ms", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:14.437366Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 176, "message": "chat_loaded - chat_id=chat_f21d7b5df35b4dc1, messages=8, total_tokens=3312", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:14.437428Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:14.437566Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:14.438646Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 47, "message": "input_validated - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "4a000074-9f54-467b-ba74-b18db42cd20c", "request_id": "0cfe2ae1-e3d2-49a4-8119-404105202b4c", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:14.511868Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:14.513715Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:16.184342Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1618, "output_tokens": 76, "total_tokens": 1694, "latency_ms": 1745.0859546661377}}
{"timestamp": "2026-01-12T12:49:16.184479Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=user, tokens=1618, cumulative_total=4930, unsaved_count=1", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:16.184521Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=76, cumulative_total=5006, unsaved_count=2", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:16.184570Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1618, output_tokens=76, turn_total=1694, cumulative_total=5006, latency_ms=1745.09", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:16.184836Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:16.185945Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=45b4e2382f2bf29f", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:16.552088Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "45b4e2382f2bf29f", "execution_time_ms": 365.9536838531494, "row_count": 5, "query_preview": "SELECT * FROM invoices ORDER BY invoice_date"}}
{"timestamp": "2026-01-12T12:49:16.552363Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=366.37ms", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:16.553618Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=45b4e2382f2bf29f, error=Object of type UUID is not JSON serializable, duration_ms=366.53", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 129, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 42, in _chunk_data\n    row_str = json.dumps(row, cls=DateTimeEncoder)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n          ^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 18, in default\n    return super().default(obj)\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T12:49:16.554945Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.193585Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1662, "output_tokens": 206, "total_tokens": 1868, "latency_ms": 4638.597249984741}}
{"timestamp": "2026-01-12T12:49:21.193803Z", "level": "ERROR", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 179, "message": "llm_error - chat_id=chat_f21d7b5df35b4dc1, latency_ms=4638.74, error=cannot access local variable 'ai_content' where it is not associated with a value", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/nodes.py\", line 149, in generate_response\n    elif ai_content!= \"\":\n         ^^^^^^^^^^\nUnboundLocalError: cannot access local variable 'ai_content' where it is not associated with a value"}
{"timestamp": "2026-01-12T12:49:21.194727Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 206, "message": "conversation_turn_complete - chat_id=chat_f21d7b5df35b4dc1, cumulative_total=5006, cumulative_input=3619, cumulative_output=1387, turns=10", "trace_id": "b89c2dbb-1da0-41eb-9041-b4e89eaa454c", "request_id": "883100ab-3afd-40d9-9ad3-479d6fab2dba", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.195492Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=7795.80, trace_id=32ab2c8c-4915-4547-9cf3-7d11788f6a3e", "trace_id": "32ab2c8c-4915-4547-9cf3-7d11788f6a3e", "request_id": "0b140ee8-b49b-489b-ae93-6ae386745d4f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.198263Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=586733c5-3b84-4ff1-9bee-d54ac458187b, request_id=cfed7e2b-e023-4dee-8f63-dd32efce12a9", "trace_id": "586733c5-3b84-4ff1-9bee-d54ac458187b", "request_id": "cfed7e2b-e023-4dee-8f63-dd32efce12a9", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.198344Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "586733c5-3b84-4ff1-9bee-d54ac458187b", "request_id": "cfed7e2b-e023-4dee-8f63-dd32efce12a9", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.644030Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "26599d20-bbc5-47ae-bc45-4337359ee9d0", "request_id": "cfed7e2b-e023-4dee-8f63-dd32efce12a9", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 445.1310634613037, "row_count": 24, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:49:21.644342Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=24, total_time=445.65ms", "trace_id": "26599d20-bbc5-47ae-bc45-4337359ee9d0", "request_id": "cfed7e2b-e023-4dee-8f63-dd32efce12a9", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.644423Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=24", "trace_id": "26599d20-bbc5-47ae-bc45-4337359ee9d0", "request_id": "cfed7e2b-e023-4dee-8f63-dd32efce12a9", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.644788Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=446.54, trace_id=586733c5-3b84-4ff1-9bee-d54ac458187b", "trace_id": "586733c5-3b84-4ff1-9bee-d54ac458187b", "request_id": "cfed7e2b-e023-4dee-8f63-dd32efce12a9", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.645833Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "aa405718585ba6f6", "execution_time_ms": 449.97715950012207, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:49:21.646049Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=450.28ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:21.646624Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=cb211651-5d28-4bb0-a04f-d80e80b7f77b, request_id=af7b6b88-1f7c-4a4b-a21e-b763bd73092f", "trace_id": "cb211651-5d28-4bb0-a04f-d80e80b7f77b", "request_id": "af7b6b88-1f7c-4a4b-a21e-b763bd73092f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.646708Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=99", "trace_id": "cb211651-5d28-4bb0-a04f-d80e80b7f77b", "request_id": "af7b6b88-1f7c-4a4b-a21e-b763bd73092f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:21.646969Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.38, trace_id=cb211651-5d28-4bb0-a04f-d80e80b7f77b", "trace_id": "cb211651-5d28-4bb0-a04f-d80e80b7f77b", "request_id": "af7b6b88-1f7c-4a4b-a21e-b763bd73092f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:49:22.149803Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "52fd52cf0c6624bc", "execution_time_ms": 503.52001190185547, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 5006, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T12:49:22.150097Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=503.97ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:22.150149Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 310, "message": "chat_saved - chat_id=chat_f21d7b5df35b4dc1, messages_saved=2, cumulative_tokens=5006", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.012998Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.471302Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.489836Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.491491Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.491568Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.491616Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.494792Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.500867Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:49:53.523276Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:01.808984Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "shutdown_event", "line": 287, "message": "app_shutdown - saving all active chats", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:02.136364Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "__init__", "line": 37, "message": "ChatSessionManager initialized - max_tokens=10240, auto_save_interval=5min", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:02.154179Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "__init__", "line": 32, "message": "InMemoryContextOffloader initialized - chunk_size=100", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:02.155812Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 16, "message": "AsyncWindowedCheckpointer initialized with window_size=10", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:02.155865Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "__init__", "line": 76, "message": "AsyncAdaptiveWindowedCheckpointer initialized - base_window=10, max_tokens=8000", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:02.155907Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 57, "message": "agent_graph_created - checkpointer=async_adaptive, window_size=10, max_tokens=1024", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:02.158837Z", "level": "INFO", "logger": "app_logger", "module": "graph", "function": "create_agent_graph", "line": 70, "message": "agent_graph_compiled_with_async_checkpointing", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:02.164373Z", "level": "INFO", "logger": "app_logger", "module": "rate_limiter", "function": "__init__", "line": 33, "message": "InMemoryRateLimiter initialized", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:02.180184Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "startup_event", "line": 271, "message": "app_startup - version=2.0.0, llm_model=openai/gpt-oss-120b, checkpoint_window=10, auto_save_interval=5min, metrics_enabled=True", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:11.185485Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=4cfbe24e-1379-43fc-afe1-a427e4c5a8d1, request_id=daa3af12-ee01-4b36-a01f-c460ade9c6b0", "trace_id": "4cfbe24e-1379-43fc-afe1-a427e4c5a8d1", "request_id": "daa3af12-ee01-4b36-a01f-c460ade9c6b0", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:11.185881Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "4cfbe24e-1379-43fc-afe1-a427e4c5a8d1", "request_id": "daa3af12-ee01-4b36-a01f-c460ade9c6b0", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:11.186627Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 120, "message": "chat_cache_miss_loading - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:11.583041Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "9c5fdcfdbcc60e7d", "execution_time_ms": 396.0440158843994, "row_count": 1, "query_preview": "\n        SELECT chat_id, topic, total_tokens, created_at\n        FROM chats\n        WHERE chat_id = "}}
{"timestamp": "2026-01-12T12:50:11.583387Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=1, total_time=396.68ms", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:12.044631Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "c8fb1dba76097ed2", "execution_time_ms": 461.0011577606201, "row_count": 10, "query_preview": "\n        SELECT session_id, role, content, tokens, created_at\n        FROM messages\n        WHERE ch"}}
{"timestamp": "2026-01-12T12:50:12.044962Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=10, total_time=461.47ms", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:12.045060Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 176, "message": "chat_loaded - chat_id=chat_f21d7b5df35b4dc1, messages=10, total_tokens=5006", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:12.045105Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:12.045352Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:12.046356Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 47, "message": "input_validated - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "e42f020c-061c-41c5-a1b3-3770137154ff", "request_id": "4d3fc282-bc9e-4097-af94-dc29c3da5f79", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:12.112101Z", "level": "INFO", "logger": "app_logger", "module": "llm", "function": "get_llm", "line": 24, "message": "llm_initialized - model=openai/gpt-oss-120b, provider=groq", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:12.113822Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:16.188319Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1622, "output_tokens": 78, "total_tokens": 1700, "latency_ms": 4141.238212585449}}
{"timestamp": "2026-01-12T12:50:16.188424Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=user, tokens=1622, cumulative_total=6628, unsaved_count=1", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:16.188461Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=78, cumulative_total=6706, unsaved_count=2", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:16.188517Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1622, output_tokens=78, turn_total=1700, cumulative_total=6706, latency_ms=4141.24", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:16.188775Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:16.189851Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=45b4e2382f2bf29f", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:16.643789Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "45b4e2382f2bf29f", "execution_time_ms": 453.7050724029541, "row_count": 5, "query_preview": "SELECT * FROM invoices ORDER BY invoice_date"}}
{"timestamp": "2026-01-12T12:50:16.644100Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=454.16ms", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:16.645367Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=45b4e2382f2bf29f, error=Object of type UUID is not JSON serializable, duration_ms=454.39", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 129, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 42, in _chunk_data\n    row_str = json.dumps(row, cls=DateTimeEncoder)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n          ^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 18, in default\n    return super().default(obj)\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T12:50:16.646793Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:17.514320Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1666, "output_tokens": 170, "total_tokens": 1836, "latency_ms": 867.487907409668}}
{"timestamp": "2026-01-12T12:50:17.514404Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1666, output_tokens=170, turn_total=1836, cumulative_total=5006, latency_ms=867.49", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:17.514637Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:17.515440Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=b00a91ecc7f8fd98", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:17.927988Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "b00a91ecc7f8fd98", "execution_time_ms": 412.3539924621582, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date, due_date, po_number, item_description, spe"}}
{"timestamp": "2026-01-12T12:50:17.928266Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=412.76ms", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:17.928425Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 163, "message": "context_offload_stored - session_id=session_42409719042a, rows=5, chunks=5, chunk_size=100", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:17.928479Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=b00a91ecc7f8fd98, rows=5, chunks=5, duration_ms=412.89, offload=yes", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:17.929053Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:22.120981Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1311, "output_tokens": 49, "total_tokens": 1360, "latency_ms": 4191.860914230347}}
{"timestamp": "2026-01-12T12:50:22.121073Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1311, output_tokens=49, turn_total=1360, cumulative_total=5006, latency_ms=4191.86", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:22.121353Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:22.122448Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_42409719042a, chunks=[0]", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:22.122530Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 242, "message": "context_offload_retrieved - session_id=session_42409719042a, chunks_requested=[0], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:22.122605Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_42409719042a, chunks=[0], rows=1, duration_ms=0.16", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:22.123179Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:24.682473Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1686, "output_tokens": 465, "total_tokens": 2151, "latency_ms": 2559.2451095581055}}
{"timestamp": "2026-01-12T12:50:24.682561Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=465, cumulative_total=7171, unsaved_count=3", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:24.682607Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1686, output_tokens=465, turn_total=2151, cumulative_total=7171, latency_ms=2559.25", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:24.683341Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 206, "message": "conversation_turn_complete - chat_id=chat_f21d7b5df35b4dc1, cumulative_total=7171, cumulative_input=5241, cumulative_output=1930, turns=13", "trace_id": "c7f2b533-df0d-4322-bf74-b35903861e51", "request_id": "e1a3a225-38a3-4abd-ae1c-e867d0dd1ca4", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:24.684155Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=13499.00, trace_id=4cfbe24e-1379-43fc-afe1-a427e4c5a8d1", "trace_id": "4cfbe24e-1379-43fc-afe1-a427e4c5a8d1", "request_id": "daa3af12-ee01-4b36-a01f-c460ade9c6b0", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:24.687072Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=61a5e3af-99f5-4e94-a126-48a94adfd3e7, request_id=069905c3-4027-4276-9d86-5aaed349d457", "trace_id": "61a5e3af-99f5-4e94-a126-48a94adfd3e7", "request_id": "069905c3-4027-4276-9d86-5aaed349d457", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:24.687181Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "61a5e3af-99f5-4e94-a126-48a94adfd3e7", "request_id": "069905c3-4027-4276-9d86-5aaed349d457", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:25.148377Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "8d69f9bd-9981-47b7-af37-01d3cf0c14f7", "request_id": "069905c3-4027-4276-9d86-5aaed349d457", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 460.6761932373047, "row_count": 24, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:50:25.148676Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=24, total_time=461.18ms", "trace_id": "8d69f9bd-9981-47b7-af37-01d3cf0c14f7", "request_id": "069905c3-4027-4276-9d86-5aaed349d457", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:25.148734Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=24", "trace_id": "8d69f9bd-9981-47b7-af37-01d3cf0c14f7", "request_id": "069905c3-4027-4276-9d86-5aaed349d457", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:25.149098Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=462.11, trace_id=61a5e3af-99f5-4e94-a126-48a94adfd3e7", "trace_id": "61a5e3af-99f5-4e94-a126-48a94adfd3e7", "request_id": "069905c3-4027-4276-9d86-5aaed349d457", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:25.150937Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=2df94f62-5dd9-4942-9142-cd27be7e756d, request_id=308c00bb-499c-4a06-a6f3-174d778c209e", "trace_id": "2df94f62-5dd9-4942-9142-cd27be7e756d", "request_id": "308c00bb-499c-4a06-a6f3-174d778c209e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:25.151028Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=99", "trace_id": "2df94f62-5dd9-4942-9142-cd27be7e756d", "request_id": "308c00bb-499c-4a06-a6f3-174d778c209e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:25.151365Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.43, trace_id=2df94f62-5dd9-4942-9142-cd27be7e756d", "trace_id": "2df94f62-5dd9-4942-9142-cd27be7e756d", "request_id": "308c00bb-499c-4a06-a6f3-174d778c209e", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:25.241803Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "eba4e2df4bb01c40", "execution_time_ms": 557.1987628936768, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:50:25.242195Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=557.75ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:25.743196Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "eab5cb8273d84c76", "execution_time_ms": 500.78320503234863, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 7171, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T12:50:25.743883Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=501.59ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:25.743940Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 310, "message": "chat_saved - chat_id=chat_f21d7b5df35b4dc1, messages_saved=3, cumulative_tokens=7171", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:47.463270Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=0502936b-c1ec-4556-9471-ddb9a75d36d8, request_id=31d37c3b-0d23-4c76-be57-4a22d72da936", "trace_id": "0502936b-c1ec-4556-9471-ddb9a75d36d8", "request_id": "31d37c3b-0d23-4c76-be57-4a22d72da936", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.463418Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=18", "trace_id": "0502936b-c1ec-4556-9471-ddb9a75d36d8", "request_id": "31d37c3b-0d23-4c76-be57-4a22d72da936", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.463941Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 110, "message": "chat_cache_hit - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.463989Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.464082Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.464752Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "aget_tuple", "line": 120, "message": "adaptive_checkpoint_windowed - original=58, windowed=10, tokens=715", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.465246Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 47, "message": "input_validated - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "781d2e56-be0c-40f4-9500-d74615d73ec4", "request_id": "2c806f29-ff6c-4209-95b8-b83e700500da", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.465846Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.965098Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1310, "output_tokens": 114, "total_tokens": 1424, "latency_ms": 499.17006492614746}}
{"timestamp": "2026-01-12T12:50:47.965949Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=user, tokens=1310, cumulative_total=8481, unsaved_count=1", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.966019Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=114, cumulative_total=8595, unsaved_count=2", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.966067Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1310, output_tokens=114, turn_total=1424, cumulative_total=8595, latency_ms=499.17", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.966291Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:47.967263Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=45b4e2382f2bf29f", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:48.503329Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "45b4e2382f2bf29f", "execution_time_ms": 535.8471870422363, "row_count": 5, "query_preview": "SELECT * FROM invoices ORDER BY invoice_date"}}
{"timestamp": "2026-01-12T12:50:48.503658Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=536.30ms", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:48.503976Z", "level": "ERROR", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 132, "message": "tool_exec_error - tool=query_database, query_hash=45b4e2382f2bf29f, error=Object of type UUID is not JSON serializable, duration_ms=536.52", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "exception": "Traceback (most recent call last):\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/tools.py\", line 99, in query_database_with_offload\n    session_id = context_offloader.store(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 129, in store\n    chunks = self._chunk_data(rows)\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 42, in _chunk_data\n    row_str = json.dumps(row, cls=DateTimeEncoder)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n          ^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 200, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 258, in iterencode\n    return _iterencode(o, 0)\n           ^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/Documents/projects/vendor_helpdesk_agent version2/agent/context_offloader.py\", line 18, in default\n    return super().default(obj)\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/vikram/.local/share/uv/python/cpython-3.11.13-macos-aarch64-none/lib/python3.11/json/encoder.py\", line 180, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type UUID is not JSON serializable"}
{"timestamp": "2026-01-12T12:50:48.506049Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:50.590756Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1350, "output_tokens": 167, "total_tokens": 1517, "latency_ms": 2084.542989730835}}
{"timestamp": "2026-01-12T12:50:50.590914Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1350, output_tokens=167, turn_total=1517, cumulative_total=7171, latency_ms=2084.54", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:50.591254Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:50.593004Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=04bcd76805b55f4c", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:51.143351Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "04bcd76805b55f4c", "execution_time_ms": 550.0411987304688, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date, payment_terms, due_date, po_number, item_d"}}
{"timestamp": "2026-01-12T12:50:51.143673Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=550.55ms", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:51.143796Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 163, "message": "context_offload_stored - session_id=session_6d1b967c793d, rows=5, chunks=5, chunk_size=100", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:51.143842Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=04bcd76805b55f4c, rows=5, chunks=5, duration_ms=550.79, offload=yes", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:51.144589Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:52.843788Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1636, "output_tokens": 143, "total_tokens": 1779, "latency_ms": 1699.1331577301025}}
{"timestamp": "2026-01-12T12:50:52.843895Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1636, output_tokens=143, turn_total=1779, cumulative_total=7171, latency_ms=1699.13", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:52.844151Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:52.845496Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_6d1b967c793d, chunks=[1]", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:52.845593Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 242, "message": "context_offload_retrieved - session_id=session_6d1b967c793d, chunks_requested=[1], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:52.845661Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_6d1b967c793d, chunks=[1], rows=1, duration_ms=0.18", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:52.846140Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:54.787514Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1718, "output_tokens": 66, "total_tokens": 1784, "latency_ms": 1941.2188529968262}}
{"timestamp": "2026-01-12T12:50:54.787663Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1718, output_tokens=66, turn_total=1784, cumulative_total=7171, latency_ms=1941.22", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:54.788016Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:54.790591Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_6d1b967c793d, chunks=[0]", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:54.790733Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 242, "message": "context_offload_retrieved - session_id=session_6d1b967c793d, chunks_requested=[0], rows=1, progress=40.0%, retrieved=2/5", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:54.790796Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_6d1b967c793d, chunks=[0], rows=1, duration_ms=0.26", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:54.791377Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:56.945822Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2067, "output_tokens": 150, "total_tokens": 2217, "latency_ms": 2154.4110774993896}}
{"timestamp": "2026-01-12T12:50:56.945911Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=2067, output_tokens=150, turn_total=2217, cumulative_total=7171, latency_ms=2154.41", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:56.946095Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:56.947575Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_6d1b967c793d, chunks=[2, 3, 4]", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:56.947666Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 242, "message": "context_offload_retrieved - session_id=session_6d1b967c793d, chunks_requested=[2, 3, 4], rows=3, progress=100.0%, retrieved=5/5", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:56.947758Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_6d1b967c793d, chunks=[2, 3, 4], rows=3, duration_ms=0.21", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:56.948358Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:57.757285Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2529, "output_tokens": 129, "total_tokens": 2658, "latency_ms": 808.8960647583008}}
{"timestamp": "2026-01-12T12:50:57.757356Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=129, cumulative_total=8724, unsaved_count=3", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:57.757396Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=2529, output_tokens=129, turn_total=2658, cumulative_total=8724, latency_ms=808.90", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:57.758224Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 206, "message": "conversation_turn_complete - chat_id=chat_f21d7b5df35b4dc1, cumulative_total=8724, cumulative_input=6551, cumulative_output=2173, turns=16", "trace_id": "f0c5c2b3-29f4-4b98-848a-89a86952140e", "request_id": "e615565c-b91e-4111-9445-2c06ef29e162", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:57.759069Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=10295.89, trace_id=0502936b-c1ec-4556-9471-ddb9a75d36d8", "trace_id": "0502936b-c1ec-4556-9471-ddb9a75d36d8", "request_id": "31d37c3b-0d23-4c76-be57-4a22d72da936", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:57.761798Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=d71cd5f0-37ce-4fd3-9e01-1cef246350e7, request_id=066aa261-5d6b-41f2-9282-fe81305496b5", "trace_id": "d71cd5f0-37ce-4fd3-9e01-1cef246350e7", "request_id": "066aa261-5d6b-41f2-9282-fe81305496b5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:57.761896Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=98", "trace_id": "d71cd5f0-37ce-4fd3-9e01-1cef246350e7", "request_id": "066aa261-5d6b-41f2-9282-fe81305496b5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:58.242641Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "ddaa6252a7971dcd", "execution_time_ms": 483.1998348236084, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:50:58.242950Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=483.59ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:58.245198Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "185cf30d-f6d5-4b5c-a499-4702d6b2d0a6", "request_id": "066aa261-5d6b-41f2-9282-fe81305496b5", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 482.84077644348145, "row_count": 24, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:50:58.245410Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=24, total_time=483.27ms", "trace_id": "185cf30d-f6d5-4b5c-a499-4702d6b2d0a6", "request_id": "066aa261-5d6b-41f2-9282-fe81305496b5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:58.245457Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=24", "trace_id": "185cf30d-f6d5-4b5c-a499-4702d6b2d0a6", "request_id": "066aa261-5d6b-41f2-9282-fe81305496b5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:58.245685Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=483.94, trace_id=d71cd5f0-37ce-4fd3-9e01-1cef246350e7", "trace_id": "d71cd5f0-37ce-4fd3-9e01-1cef246350e7", "request_id": "066aa261-5d6b-41f2-9282-fe81305496b5", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:58.247193Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=92eae091-c2e4-4ab8-9573-9900e5f66a23, request_id=71702d3c-35cf-45d2-b408-c1a7da2a5b2f", "trace_id": "92eae091-c2e4-4ab8-9573-9900e5f66a23", "request_id": "71702d3c-35cf-45d2-b408-c1a7da2a5b2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:58.247249Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=98", "trace_id": "92eae091-c2e4-4ab8-9573-9900e5f66a23", "request_id": "71702d3c-35cf-45d2-b408-c1a7da2a5b2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:58.247447Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.29, trace_id=92eae091-c2e4-4ab8-9573-9900e5f66a23", "trace_id": "92eae091-c2e4-4ab8-9573-9900e5f66a23", "request_id": "71702d3c-35cf-45d2-b408-c1a7da2a5b2f", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:50:58.750737Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "8553a37acfe966d3", "execution_time_ms": 507.5693130493164, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 8724, updated_at = NOW()\n            WHERE "}}
{"timestamp": "2026-01-12T12:50:58.751032Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=507.98ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:50:58.751093Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 310, "message": "chat_saved - chat_id=chat_f21d7b5df35b4dc1, messages_saved=3, cumulative_tokens=8724", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:54:37.345472Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=POST, path=/api/chat, trace_id=52ad4a8f-338c-45b0-9e5e-770118c0e6e9, request_id=0aee6d65-b6ee-4c81-9961-d0b901b04b96", "trace_id": "52ad4a8f-338c-45b0-9e5e-770118c0e6e9", "request_id": "0aee6d65-b6ee-4c81-9961-d0b901b04b96", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:37.345576Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat, remaining=19", "trace_id": "52ad4a8f-338c-45b0-9e5e-770118c0e6e9", "request_id": "0aee6d65-b6ee-4c81-9961-d0b901b04b96", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:37.346013Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "get_or_load_chat", "line": 110, "message": "chat_cache_hit - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:37.346055Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 189, "message": "chat_continue - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:37.346140Z", "level": "INFO", "logger": "app_logger", "module": "routes", "function": "chat", "line": 240, "message": "agent_invoke_start - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:37.347059Z", "level": "INFO", "logger": "app_logger", "module": "checkpointer", "function": "aget_tuple", "line": 120, "message": "adaptive_checkpoint_windowed - original=118, windowed=10, tokens=1334", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:37.347577Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "process_input", "line": 47, "message": "input_validated - chat_id=chat_f21d7b5df35b4dc1", "trace_id": "cd58cbff-c27a-4b3c-9288-388fdd349086", "request_id": "7fa80cce-a61b-442b-b026-f6e7ed5681b8", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:37.348182Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:44.897587Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1338, "output_tokens": 250, "total_tokens": 1588, "latency_ms": 7549.365997314453}}
{"timestamp": "2026-01-12T12:54:44.897693Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=user, tokens=1338, cumulative_total=10062, unsaved_count=1", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:44.897739Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=250, cumulative_total=10312, unsaved_count=2", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:44.897780Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1338, output_tokens=250, turn_total=1588, cumulative_total=10312, latency_ms=7549.37", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:44.898009Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['query_database_with_offload']", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:44.898949Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 66, "message": "tool_exec_start - tool=query_database, query_hash=b00a91ecc7f8fd98", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:45.446428Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "b00a91ecc7f8fd98", "execution_time_ms": 547.2698211669922, "row_count": 5, "query_preview": "SELECT invoice_number, vendor_id, customer, invoice_date, due_date, po_number, item_description, spe"}}
{"timestamp": "2026-01-12T12:54:45.446733Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=5, total_time=547.72ms", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:45.446865Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "store", "line": 163, "message": "context_offload_stored - session_id=session_f168bab03266, rows=5, chunks=5, chunk_size=100", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:45.446912Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "query_database_with_offload", "line": 108, "message": "tool_exec_complete - tool=query_database, query_hash=b00a91ecc7f8fd98, rows=5, chunks=5, duration_ms=547.85, offload=yes", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:45.447559Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:47.416721Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1299, "output_tokens": 99, "total_tokens": 1398, "latency_ms": 1969.106912612915}}
{"timestamp": "2026-01-12T12:54:47.416805Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1299, output_tokens=99, turn_total=1398, cumulative_total=8724, latency_ms=1969.11", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:47.417058Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:47.418303Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_f168bab03266, chunks=[0]", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:47.418374Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 242, "message": "context_offload_retrieved - session_id=session_f168bab03266, chunks_requested=[0], rows=1, progress=20.0%, retrieved=1/5", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:47.418448Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_f168bab03266, chunks=[0], rows=1, duration_ms=0.15", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:47.419061Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:49.902332Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 1674, "output_tokens": 92, "total_tokens": 1766, "latency_ms": 2483.229160308838}}
{"timestamp": "2026-01-12T12:54:49.902406Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=1674, output_tokens=92, turn_total=1766, cumulative_total=8724, latency_ms=2483.23", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:49.902578Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "route_after_llm", "line": 223, "message": "routing_to_tools - tools=['get_context_chunks']", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:49.904281Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 167, "message": "tool_exec_start - tool=get_chunks, session_id=session_f168bab03266, chunks=[1, 2, 3, 4]", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:49.904467Z", "level": "INFO", "logger": "app_logger", "module": "context_offloader", "function": "get_chunks", "line": 242, "message": "context_offload_retrieved - session_id=session_f168bab03266, chunks_requested=[1, 2, 3, 4], rows=4, progress=100.0%, retrieved=5/5", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:49.904558Z", "level": "INFO", "logger": "app_logger", "module": "tools", "function": "get_context_chunks", "line": 184, "message": "tool_exec_complete - tool=get_chunks, session_id=session_f168bab03266, chunks=[1, 2, 3, 4], rows=4, duration_ms=0.36", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:49.905136Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 65, "message": "llm_invoke_start - chat_id=chat_f21d7b5df35b4dc1, input_messages=6", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.075027Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_llm_call", "line": 160, "message": "llm_call", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883", "extra": {"model": "openai/gpt-oss-120b", "input_tokens": 2448, "output_tokens": 849, "total_tokens": 3297, "latency_ms": 3169.8219776153564}}
{"timestamp": "2026-01-12T12:54:53.075118Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "add_message_to_cache", "line": 225, "message": "message_cached - chat_id=chat_f21d7b5df35b4dc1, role=assistant, tokens=849, cumulative_total=11161, unsaved_count=3", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.075163Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "generate_response", "line": 166, "message": "llm_response_generated - chat_id=chat_f21d7b5df35b4dc1, input_tokens=2448, output_tokens=849, turn_total=3297, cumulative_total=11161, latency_ms=3169.82", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.075925Z", "level": "INFO", "logger": "app_logger", "module": "nodes", "function": "save_messages", "line": 206, "message": "conversation_turn_complete - chat_id=chat_f21d7b5df35b4dc1, cumulative_total=11161, cumulative_input=7889, cumulative_output=3272, turns=19", "trace_id": "90277100-ccde-461c-bd04-b7156c6f2fd5", "request_id": "7bf64cb4-a467-4f79-ab07-62128c661bbc", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.076792Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=POST, path=/api/chat, status=200, duration_ms=15731.41, trace_id=52ad4a8f-338c-45b0-9e5e-770118c0e6e9", "trace_id": "52ad4a8f-338c-45b0-9e5e-770118c0e6e9", "request_id": "0aee6d65-b6ee-4c81-9961-d0b901b04b96", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.080067Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/chat/history, trace_id=3c05844a-cbb5-4a39-993b-bdd3e4db783e, request_id=832728ed-da21-4581-9994-a9d7b0c0e873", "trace_id": "3c05844a-cbb5-4a39-993b-bdd3e4db783e", "request_id": "832728ed-da21-4581-9994-a9d7b0c0e873", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.080128Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/chat/history, remaining=99", "trace_id": "3c05844a-cbb5-4a39-993b-bdd3e4db783e", "request_id": "832728ed-da21-4581-9994-a9d7b0c0e873", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.576307Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "4fbbd2485d5b50f4", "execution_time_ms": 499.1002082824707, "row_count": 0, "query_preview": "\n            INSERT INTO messages (chat_id, session_id, role, content, tokens, created_at)\n         "}}
{"timestamp": "2026-01-12T12:54:53.576566Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=499.46ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:54:53.603966Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": "329f12e7-9a68-4f77-9981-b8ba6e70da20", "request_id": "832728ed-da21-4581-9994-a9d7b0c0e873", "user_id_hash": "c55ea77e83770883", "extra": {"query_hash": "95d04ea0799f4b08", "execution_time_ms": 523.345947265625, "row_count": 24, "query_preview": "\n        SELECT \n            c.chat_id,\n            c.topic,\n            c.total_tokens,\n           "}}
{"timestamp": "2026-01-12T12:54:53.604241Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=24, total_time=523.85ms", "trace_id": "329f12e7-9a68-4f77-9981-b8ba6e70da20", "request_id": "832728ed-da21-4581-9994-a9d7b0c0e873", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.604290Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "load_chat_history", "line": 421, "message": "chat_history_loaded - user_id=752110e1..., count=24", "trace_id": "329f12e7-9a68-4f77-9981-b8ba6e70da20", "request_id": "832728ed-da21-4581-9994-a9d7b0c0e873", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.604568Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/chat/history, status=200, duration_ms=524.53, trace_id=3c05844a-cbb5-4a39-993b-bdd3e4db783e", "trace_id": "3c05844a-cbb5-4a39-993b-bdd3e4db783e", "request_id": "832728ed-da21-4581-9994-a9d7b0c0e873", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.606156Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 84, "message": "request_start - method=GET, path=/api/metrics/user, trace_id=08389e9c-d4b1-405d-833e-d6f6494fbb0a, request_id=7c6ae9c6-33f6-43be-b57f-adbc42171825", "trace_id": "08389e9c-d4b1-405d-833e-d6f6494fbb0a", "request_id": "7c6ae9c6-33f6-43be-b57f-adbc42171825", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.606227Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 96, "message": "rate_limit_check - path=/api/metrics/user, remaining=99", "trace_id": "08389e9c-d4b1-405d-833e-d6f6494fbb0a", "request_id": "7c6ae9c6-33f6-43be-b57f-adbc42171825", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:53.606424Z", "level": "INFO", "logger": "app_logger", "module": "main", "function": "request_tracking_and_rate_limiting_middleware", "line": 131, "message": "request_complete - method=GET, path=/api/metrics/user, status=404, duration_ms=0.32, trace_id=08389e9c-d4b1-405d-833e-d6f6494fbb0a", "trace_id": "08389e9c-d4b1-405d-833e-d6f6494fbb0a", "request_id": "7c6ae9c6-33f6-43be-b57f-adbc42171825", "user_id_hash": "c55ea77e83770883"}
{"timestamp": "2026-01-12T12:54:54.074259Z", "level": "INFO", "logger": "app_logger", "module": "log", "function": "log_query", "line": 145, "message": "db_query_executed", "trace_id": null, "request_id": null, "user_id_hash": null, "extra": {"query_hash": "24747546475d4681", "execution_time_ms": 497.420072555542, "row_count": 0, "query_preview": "\n            UPDATE chats\n            SET total_tokens = 11161, updated_at = NOW()\n            WHERE"}}
{"timestamp": "2026-01-12T12:54:54.074634Z", "level": "INFO", "logger": "app_logger", "module": "client", "function": "run_query", "line": 171, "message": "query_success - rows=0, total_time=497.95ms", "trace_id": null, "request_id": null, "user_id_hash": null}
{"timestamp": "2026-01-12T12:54:54.074723Z", "level": "INFO", "logger": "app_logger", "module": "chat_manager", "function": "save_chat_to_db", "line": 310, "message": "chat_saved - chat_id=chat_f21d7b5df35b4dc1, messages_saved=3, cumulative_tokens=11161", "trace_id": null, "request_id": null, "user_id_hash": null}
